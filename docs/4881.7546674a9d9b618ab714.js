(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[4881],{4881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapPageModule:()=>ur});var o=n(1862),r=n(6274),i=n(3324),a=n(1515),s=n(1855),c=n(3306),l=n(6006),u=n(8561);function p(...e){const t=e.length;if(0===t)throw new Error("list of properties cannot be empty.");return n=>(0,u.U)(function(e,t){return n=>{let o=n;for(let r=0;r<t;r++){const t=null!=o?o[e[r]]:void 0;if(void 0===t)return;o=t}return o}}(e,t))(n)}var f=n(6790);function d(e){return t=>t.lift(new h(e))}class h{constructor(e){this.notifier=e}call(e,t){const n=new g(e),o=(0,f.ft)(this.notifier,new f.IY(n));return o&&!n.seenValue?(n.add(o),t.subscribe(n)):n}}class g extends f.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var m=n(9917),v=n(4089),y=n(3305),b=n(7272),S=n(6550);function w(e,t){if(1&e&&b._UZ(0,"img",5),2&e){const e=b.oxw();b.Q6J("src",e.feature.webView,b.LSH)}}let Z=(()=>{class e{constructor(e,t){this.modalController=e,this.mapService=t}onCloseModal(){this.modalController.dismiss(),this.mapService.clearFeatureSelection()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN),b.Y36(S.S))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-feature-info-modal"]],inputs:{feature:"feature"},decls:5,vars:1,consts:[["fullscreen",""],["alt","Billede","class","image",3,"src",4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","close"],["alt","Billede",1,"image",3,"src"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-content",0),b.YNc(1,w,1,1,"img",1),b.TgZ(2,"ion-fab",2),b.TgZ(3,"ion-fab-button",3),b.NdJ("click",function(){return t.onCloseModal()}),b._UZ(4,"ion-icon",4),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(1),b.Q6J("ngIf",t.feature.webView))},directives:[o.W2,r.O5,o.IJ,o.W4,o.gu],styles:[""]}),e})();var k=n(2329),x=n(7802),A=n(5342);let T=(()=>{class e{constructor(e,t){this.mapService=e,this.projectStore=t,this.center=[1360103,7491908],this.zoom=13}ngAfterViewInit(){this.mapService.createMap(this.center,this.zoom)}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(S.S),b.Y36(x.c))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map"]],decls:1,vars:0,consts:[["id","ol-map",1,"map-container"]],template:function(e,t){1&e&&b._UZ(0,"div",0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var _=n(477);function C(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-item"),b.TgZ(1,"ion-label"),b._uU(2),b.qZA(),b.TgZ(3,"ion-toggle",11),b.NdJ("ionChange",function(t){const n=b.CHM(e).$implicit,o=b.oxw().$implicit;return b.oxw(2).onOverlayToggle(t,o,n)}),b.qZA(),b.qZA()}if(2&e){const e=t.$implicit;b.xp6(2),b.Oqu(e.label),b.xp6(1),b.Q6J("name",e.name)("checked",e.addedToMap)}}function O(e,t){if(1&e&&(b.TgZ(0,"ion-list"),b.TgZ(1,"ion-list-header",9),b.TgZ(2,"ion-label",10),b._uU(3),b.qZA(),b.qZA(),b.YNc(4,C,4,3,"ion-item",8),b.qZA()),2&e){const e=t.$implicit,n=b.oxw(2);b.xp6(3),b.hij(" ",e.name," "),b.xp6(1),b.Q6J("ngForOf",e.layers)("ngForTrackBy",n.trackItems)}}function j(e,t){if(1&e&&(b.ynx(0),b.YNc(1,O,5,3,"ion-list",8),b.ALo(2,"async"),b.BQk()),2&e){const e=b.oxw();b.xp6(1),b.Q6J("ngForOf",b.lcZ(2,2,e.overlays$))("ngForTrackBy",e.trackItems)}}function q(e,t){if(1&e&&(b.TgZ(0,"ion-item"),b.TgZ(1,"ion-label"),b._uU(2),b.qZA(),b._UZ(3,"ion-radio",14),b.qZA()),2&e){const e=t.$implicit;b.xp6(2),b.Oqu(e.name),b.xp6(1),b.Q6J("value",e.id)}}function I(e,t){if(1&e){const e=b.EpF();b.ynx(0),b.TgZ(1,"ion-list"),b.TgZ(2,"ion-radio-group",12),b.NdJ("ionChange",function(t){return b.CHM(e),b.oxw().onBaseLayerSelect(t)}),b.ALo(3,"async"),b.YNc(4,q,4,2,"ion-item",13),b.ALo(5,"async"),b.qZA(),b.qZA(),b.BQk()}if(2&e){const e=b.oxw();b.xp6(2),b.Q6J("value",b.lcZ(3,2,e.selectedBaseMap$)),b.xp6(2),b.Q6J("ngForOf",b.lcZ(5,4,e.baseMaps$))}}let M=(()=>{class e{constructor(e,t,n){this.modalController=e,this.mapLayersService=t,this.mapService=n,this.segment="overlays",this.overlays$=this.mapLayersService.overlays$,this.baseMaps$=this.mapLayersService.baseMaps$,this.selectedBaseMap$=this.mapLayersService.baseMaps$.pipe((0,u.U)(e=>e.find(e=>e.selected).id))}ngOnInit(){}onOverlayToggle(e,t,n){this.mapLayersService.updateOverlays(t.name,n.name,e.detail.checked),e.detail.checked?this.mapService.addLayer(t.url,n):this.mapService.removeLayer(n.name)}onBaseLayerSelect(e){this.mapLayersService.updateBaseLayerSelection(e.detail.value),this.mapService.changeBaseMap(e.detail.value)}dismiss(){this.modalController.dismiss()}trackItems(e,t){return t.name}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN),b.Y36(_.Y),b.Y36(S.S))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-layers-control-modal"]],decls:17,vars:3,consts:[["color","primary",1,"ion-text-center"],["color","secondary","mode","md",3,"ngModel","ngModelChange"],["value","overlays"],["value","baselayers"],[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","light"],["role","heading","aria-level","2"],["slot","end",3,"name","checked","ionChange"],[3,"value","ionChange"],[4,"ngFor","ngForOf"],["slot","start",3,"value"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-header"),b.TgZ(1,"ion-toolbar",0),b.TgZ(2,"ion-title"),b._uU(3,"Lag"),b.qZA(),b.qZA(),b.TgZ(4,"ion-segment",1),b.NdJ("ngModelChange",function(e){return t.segment=e}),b.TgZ(5,"ion-segment-button",2),b.TgZ(6,"ion-label"),b._uU(7,"Lag"),b.qZA(),b.qZA(),b.TgZ(8,"ion-segment-button",3),b.TgZ(9,"ion-label"),b._uU(10,"Baggrundskort"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(11,"ion-content"),b.YNc(12,j,3,4,"ng-container",4),b.YNc(13,I,6,6,"ng-container",4),b.qZA(),b.TgZ(14,"ion-fab",5),b.TgZ(15,"ion-fab-button",6),b.NdJ("click",function(){return t.dismiss()}),b._UZ(16,"ion-icon",7),b.qZA(),b.qZA()),2&e&&(b.xp6(4),b.Q6J("ngModel",t.segment),b.xp6(8),b.Q6J("ngIf","overlays"===t.segment),b.xp6(1),b.Q6J("ngIf","baselayers"===t.segment))},directives:[o.Gu,o.sr,o.wd,o.cJ,o.QI,i.JJ,i.On,o.GO,o.Q$,o.W2,r.O5,o.IJ,o.W4,o.gu,r.sg,o.q_,o.yh,o.Ie,o.ho,o.w,o.se,o.B7,o.U5],pipes:[r.Ov],styles:[""]}),e})(),$=(()=>{class e{constructor(e){this.modalController=e}ngOnInit(){}onShowLayersControl(){return(0,s.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:M,cssClass:"my-custom-class"});return yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-fab",0),b.TgZ(1,"ion-fab-button",1),b.NdJ("click",function(){return t.onShowLayersControl()}),b._UZ(2,"ion-icon",2),b.qZA(),b.qZA())},directives:[o.IJ,o.W4,o.gu],styles:[""]}),e})();var L=n(6513),U=n(361),P=n(9450);function N(e,t){return e(t={exports:{}},t.exports),t.exports}var J=N(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),E=N(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),D=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Y=function(e){if(!D(e))throw TypeError(e+" is not an object!");return e},R=function(e){try{return!!e()}catch(t){return!0}},F=!R(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Q=J.document,z=D(Q)&&D(Q.createElement),G=function(e){return z?Q.createElement(e):{}},B=!F&&!R(function(){return 7!=Object.defineProperty(G("div"),"a",{get:function(){return 7}}).a}),W=Object.defineProperty,H={f:F?Object.defineProperty:function(e,t,n){if(Y(e),t=function(e,t){if(!D(e))return e;var n,o;if("function"==typeof(n=e.toString)&&!D(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!D(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}(t),Y(n),B)try{return W(e,t,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},V=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},X=F?function(e,t,n){return H.f(e,t,V(1,n))}:function(e,t,n){return e[t]=n,e},K={}.hasOwnProperty,ee=function(e,t){return K.call(e,t)},te=0,ne=Math.random(),oe=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++te+ne).toString(36))},re=N(function(e){var t="__core-js_shared__",n=J[t]||(J[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:E.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),ie=re("native-function-to-string",Function.toString),ae=N(function(e){var t=oe("src"),n="toString",o=(""+ie).split(n);E.inspectSource=function(e){return ie.call(e)},(e.exports=function(e,n,r,i){var a="function"==typeof r;a&&(ee(r,"name")||X(r,"name",n)),e[n]!==r&&(a&&(ee(r,t)||X(r,t,e[n]?""+e[n]:o.join(String(n)))),e===J?e[n]=r:i?e[n]?e[n]=r:X(e,n,r):(delete e[n],X(e,n,r)))})(Function.prototype,n,function(){return"function"==typeof this&&this[t]||ie.call(this)})}),se=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},ce=function(e,t,n){if(se(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},le=function(e,t,n){var o,r,i,a,s=e&le.F,c=e&le.G,l=e&le.P,u=e&le.B,p=c?J:e&le.S?J[t]||(J[t]={}):(J[t]||{}).prototype,f=c?E:E[t]||(E[t]={}),d=f.prototype||(f.prototype={});for(o in c&&(n=t),n)i=((r=!s&&p&&void 0!==p[o])?p:n)[o],a=u&&r?ce(i,J):l&&"function"==typeof i?ce(Function.call,i):i,p&&ae(p,o,i,e&le.U),f[o]!=i&&X(f,o,a),l&&d[o]!=i&&(d[o]=i)};J.core=E,le.F=1,le.G=2,le.S=4,le.P=8,le.B=16,le.W=32,le.U=64,le.R=128;var ue=le,pe={}.toString,fe=function(e){return pe.call(e).slice(8,-1)},de=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==fe(e)?e.split(""):Object(e)},he=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},ge=function(e){return de(he(e))},me=Math.ceil,ve=Math.floor,ye=function(e){return isNaN(e=+e)?0:(e>0?ve:me)(e)},be=Math.min,Se=function(e){return e>0?be(ye(e),9007199254740991):0},we=Math.max,Ze=Math.min,ke=re("keys"),xe=function(e){return ke[e]||(ke[e]=oe(e))},Ae=(!1,function(e,t,n){for(var o=ge(e),r=Se(o.length),i=function(e,t){return(e=ye(e))<0?we(e+t,0):Ze(e,t)}(n,r);r>i;i++)if(i in o&&o[i]===t)return i||0;return-1}),Te=xe("IE_PROTO"),_e="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ce=Object.keys||function(e){return function(e,t){var n,o=ge(e),r=0,i=[];for(n in o)n!=Te&&ee(o,n)&&i.push(n);for(;t.length>r;)ee(o,n=t[r++])&&(~Ae(i,n)||i.push(n));return i}(e,_e)},Oe={f:Object.getOwnPropertySymbols},je={f:{}.propertyIsEnumerable},qe=function(e){return Object(he(e))},Ie=Object.assign,Me=!Ie||R(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=Ie({},e)[n]||Object.keys(Ie({},t)).join("")!=o})?function(e,t){for(var n=qe(e),o=arguments.length,r=1,i=Oe.f,a=je.f;o>r;)for(var s,c=de(arguments[r++]),l=i?Ce(c).concat(i(c)):Ce(c),u=l.length,p=0;u>p;)a.call(c,s=l[p++])&&(n[s]=c[s]);return n}:Ie;ue(ue.S+ue.F,"Object",{assign:Me});var $e,Le,Ue=function(e,t){var n,o,r=String(he(e)),i=ye(t),a=r.length;return i<0||i>=a?"":(n=r.charCodeAt(i))<55296||n>56319||i+1===a||(o=r.charCodeAt(i+1))<56320||o>57343?r.charAt(i):r.slice(i,i+2)},Pe=function(e,t,n){return t+(n?Ue(e,t).length:1)},Ne=N(function(e){var t=re("wks"),n=J.Symbol,o="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=o&&n[e]||(o?n:oe)("Symbol."+e))}).store=t}),Je=Ne("toStringTag"),Ee="Arguments"==fe(function(){return arguments}()),De=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Je))?n:Ee?fe(t):"Object"==(o=fe(t))&&"function"==typeof t.callee?"Arguments":o},Ye=RegExp.prototype.exec,Re=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==De(e))throw new TypeError("RegExp#exec called on incompatible receiver");return Ye.call(e,t)},Fe=function(){var e=Y(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Qe=RegExp.prototype.exec,ze=String.prototype.replace,Ge=Qe,Be=(Le=/b*/g,Qe.call($e=/a/,"a"),Qe.call(Le,"a"),0!==$e.lastIndex||0!==Le.lastIndex),We=void 0!==/()??/.exec("")[1];(Be||We)&&(Ge=function(e){var t,n,o,r,i=this;return We&&(n=new RegExp("^"+i.source+"$(?!\\s)",Fe.call(i))),Be&&(t=i.lastIndex),o=Qe.call(i,e),Be&&o&&(i.lastIndex=i.global?o.index+o[0].length:t),We&&o&&o.length>1&&ze.call(o[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)}),o});var He=Ge;ue({target:"RegExp",proto:!0,forced:He!==/./.exec},{exec:He});var Ve=Ne("species"),Xe=!R(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Ke=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),et=function(e,t,n){var o=Ne(e),r=!R(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),i=r?!R(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[Ve]=function(){return n}),n[o](""),!t}):void 0;if(!r||!i||"replace"===e&&!Xe||"split"===e&&!Ke){var a=/./[o],s=n(he,o,""[e],function(e,t,n,o,i){return t.exec===He?r&&!i?{done:!0,value:a.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),c=s[1];ae(String.prototype,e,s[0]),X(RegExp.prototype,o,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}},tt=Math.max,nt=Math.min,ot=Math.floor,rt=/\$([$&`']|\d\d?|<[^>]*>)/g,it=/\$([$&`']|\d\d?)/g;et("replace",2,function(e,t,n,o){return[function(o,r){var i=e(this),a=null==o?void 0:o[t];return void 0!==a?a.call(o,i,r):n.call(String(i),o,r)},function(e,t){var i=o(n,e,this,t);if(i.done)return i.value;var a=Y(e),s=String(this),c="function"==typeof t;c||(t=String(t));var l=a.global;if(l){var u=a.unicode;a.lastIndex=0}for(var p=[];;){var f=Re(a,s);if(null===f)break;if(p.push(f),!l)break;""===String(f[0])&&(a.lastIndex=Pe(s,Se(a.lastIndex),u))}for(var d,h="",g=0,m=0;m<p.length;m++){f=p[m];for(var v=String(f[0]),y=tt(nt(ye(f.index),s.length),0),b=[],S=1;S<f.length;S++)b.push(void 0===(d=f[S])?d:String(d));var w=f.groups;if(c){var Z=[v].concat(b,y,s);void 0!==w&&Z.push(w);var k=String(t.apply(void 0,Z))}else k=r(v,s,y,b,w,t);y>=g&&(h+=s.slice(g,y)+k,g=y+v.length)}return h+s.slice(g)}];function r(e,t,o,r,i,a){var s=o+e.length,c=r.length,l=it;return void 0!==i&&(i=qe(i),l=rt),n.call(a,l,function(n,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,o);case"'":return t.slice(s);case"<":l=i[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>c){var p=ot(u/10);return 0===p?n:p<=c?void 0===r[p-1]?a.charAt(1):r[p-1]+a.charAt(1):n}l=r[u-1]}return void 0===l?"":l})}});var at=Ne("match"),st=Ne("species"),ct=function(e,t){var n,o=Y(e).constructor;return void 0===o||null==(n=Y(o)[st])?t:se(n)},lt=Math.min,ut=[].push,pt=4294967295,ft=!R(function(){});et("split",2,function(e,t,n,o){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var o,r,i=String(this);if(void 0===e&&0===t)return[];if(!D(o=e)||!(void 0!==(r=o[at])?r:"RegExp"==fe(o)))return n.call(i,e,t);for(var a,s,c,l=[],u=0,p=void 0===t?pt:t>>>0,f=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(a=He.call(f,i))&&!((s=f.lastIndex)>u&&(l.push(i.slice(u,a.index)),a.length>1&&a.index<i.length&&ut.apply(l,a.slice(1)),c=a[0].length,u=s,l.length>=p));)f.lastIndex===a.index&&f.lastIndex++;return u===i.length?!c&&f.test("")||l.push(""):l.push(i.slice(u)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,o){var i=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,i,o):r.call(String(i),n,o)},function(e,t){var i=o(r,e,this,t,r!==n);if(i.done)return i.value;var a=Y(e),s=String(this),c=ct(a,RegExp),l=a.unicode,u=new c(ft?a:"^(?:"+a.source+")",(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ft?"y":"g")),p=void 0===t?pt:t>>>0;if(0===p)return[];if(0===s.length)return null===Re(u,s)?[s]:[];for(var f=0,d=0,h=[];d<s.length;){u.lastIndex=ft?d:0;var g,m=Re(u,ft?s:s.slice(d));if(null===m||(g=lt(Se(u.lastIndex+(ft?0:d)),s.length))===f)d=Pe(s,d,l);else{if(h.push(s.slice(f,d)),h.length===p)return h;for(var v=1;v<=m.length-1;v++)if(h.push(m[v]),h.length===p)return h;d=f=g}}return h.push(s.slice(f)),h}]});var dt,ht=N(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={default:"__default"},o=Object.prototype.hasOwnProperty;function r(){}function i(e,t){return o.call(e,t)}function a(){return new r}function s(e,t){for(;e.length>t;)e.pop()}function c(e,t,n){if(null==n)e.removeAttribute(t);else{var o=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0}(t);o?e.setAttributeNS(o,t,String(n)):e.setAttribute(t,String(n))}}function l(e,t,n){e[t]=n}function u(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n}r.prototype=Object.create(null);var p=a();function f(e,t,o){(p[t]||p[n.default])(e,t,o)}p[n.default]=function(e,t,n){var o=typeof n;"object"===o||"function"===o?l(e,t,n):c(e,t,n)},p.style=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var o=e.style;for(var r in n)i(n,r)&&u(o,r,n[r])}};var d={nodesCreated:null,nodesDeleted:null},h=function(){function e(){this.created=[],this.deleted=[]}return e.prototype.markCreated=function(e){this.created.push(e)},e.prototype.markDeleted=function(e){this.deleted.push(e)},e.prototype.notifyChanges=function(){d.nodesCreated&&this.created.length>0&&d.nodesCreated(this.created),d.nodesDeleted&&this.deleted.length>0&&d.nodesDeleted(this.deleted)},e}();function g(e){return 1===e.nodeType}var m=Node.prototype.getRootNode||function(){for(var e=this,t=e;e;)t=e,e=e.parentNode;return t},v=function(){function e(e,t,n){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=e,this.key=t,this.text=n}return e.prototype.hasEmptyAttrsArr=function(){var e=this._attrsArr;return!e||!e.length},e.prototype.getAttrsArr=function(e){return this._attrsArr||(this._attrsArr=new Array(e))},e}();function y(e,t,n,o){var r=new v(t,n,o);return e.__incrementalDOMData=r,r}function b(e,t){return S(e,t)}function S(e,t){if(e.__incrementalDOMData)return e.__incrementalDOMData;var n=g(e)?e.localName:e.nodeName,o=g(e)?e.getAttribute("key")||t:null,r=y(e,n,o,function(e){return 3===e.nodeType}(e)?e.data:void 0);return g(e)&&function(e,t){var n=e.attributes,o=n.length;if(o)for(var r=t.getAttrsArr(o),i=0,a=0;i<o;i+=1,a+=2){var s=n[i],c=s.value;r[a]=s.name,r[a+1]=c}}(e,r),r}var w=null,Z=null,k=null,x=null,A=[],T=[];function _(){return T}function C(e){return function(t,n,o){var r=w,i=x,a=A,s=T,c=Z,l=k;w=new h,x=t.ownerDocument,T=[],A=function(e,t){var n=function(e){var t=m.call(e);return function(e){return 11===e.nodeType||9===e.nodeType}(t)?t.activeElement:null}(e);return n&&e.contains(n)?function(e,t){for(var n=[],o=e;o!==t;){var r=o;n.push(r),o=r.parentNode}return n}(n,t):[]}(t,k=t.parentNode);try{return e(t,n,o)}finally{x=i,T=s,Z=c,k=l,A=a,w.notifyChanges(),w=r}}}var O=C(function(e,t,n){return Z=e,$(),t(n),P(),e}),j=C(function(e,t,n){var o={nextSibling:e};return Z=o,t(n),k&&M(k,L(),e.nextSibling),o===Z?null:Z});function q(e,t,n){var o=b(e,n);return t==o.nameOrCtor&&n==o.key}function I(e,t){var n=function(e,t,n){if(!e)return null;if(q(e,t,n))return e;if(n)for(;e=e.nextSibling;)if(q(e,t,n))return e;return null}(Z,e,t)||function(e,t){var n;return n="#text"===e?function(e){var t=e.createTextNode("");return y(t,"#text",null),t}(x):function(e,t,n,o){var r;if("function"==typeof n)r=new n;else{var i=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/Math/MathML":null==t||"foreignObject"===b(t).nameOrCtor?null:t.namespaceURI}(n,t);r=i?e.createElementNS(i,n):e.createElement(n)}return y(r,n,o),r}(x,k,e,t),w.markCreated(n),n}(e,t);n!==Z&&(A.indexOf(n)>=0?function(e,t,n){for(var o=t.nextSibling,r=n;null!==r&&r!==t;){var i=r.nextSibling;e.insertBefore(r,o),r=i}}(k,n,Z):k.insertBefore(n,Z),Z=n)}function M(e,t,n){for(var o=e,r=t;r!==n;){var i=r.nextSibling;o.removeChild(r),w.markDeleted(r),r=i}}function $(){k=Z,Z=null}function L(){return Z?Z.nextSibling:k.firstChild}function U(){Z=L()}function P(){M(k,L(),null),Z=k,k=k.parentNode}function N(e,t){return U(),I(e,t),$(),k}function J(){return P(),Z}function E(){return U(),I("#text",null),Z}var D=a();function Y(e,t,n){if(t.staticsApplied=!0,n&&n.length)if(t.hasEmptyAttrsArr())for(var o=0;o<n.length;o+=2)f(e,n[o],n[o+1]);else{for(o=0;o<n.length;o+=2)D[n[o]]=o+1;var r=t.getAttrsArr(0),i=0;for(o=0;o<r.length;o+=2){var a=r[o+1],c=D[l=r[o]];c?n[c]===a&&delete D[l]:(r[i]=l,r[i+1]=a,i+=2)}for(var l in s(r,i),D)f(e,l,n[D[l]]),delete D[l]}}function R(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var i=N(e,t),a=b(i);a.staticsApplied||Y(i,a,n);var c=Math.max(0,arguments.length-3),l=a.hasEmptyAttrsArr();if(!c&&l)return i;for(var u=a.getAttrsArr(c),p=3,d=0;p<arguments.length;p+=2,d+=2){var h=arguments[p];if(l)u[d]=h;else if(u[d]!==h)break;var g=arguments[p+1];(l||u[d+1]!==g)&&(u[d+1]=g,f(i,h,g))}if(p<arguments.length||d<u.length){for(var m=d;d<u.length;d+=2)D[u[d]]=u[d+1];for(d=m;p<arguments.length;p+=2,d+=2)D[h=arguments[p]]!==(g=arguments[p+1])&&f(i,h,g),u[d]=h,u[d+1]=g,delete D[h];for(var h in s(u,d),D)f(i,h,void 0),delete D[h]}return i}function F(e){return J()}t.applyAttr=c,t.applyProp=l,t.attributes=p,t.close=J,t.currentElement=function(){return k},t.currentPointer=function(){return L()},t.open=N,t.patch=O,t.patchInner=O,t.patchOuter=j,t.skip=function(){Z=k.lastChild},t.skipNode=U,t.getKey=function(e){return b(e).key},t.clearCache=function e(t){t.__incrementalDOMData=null;for(var n=t.firstChild;n;n=n.nextSibling)e(n)},t.importNode=function e(t){S(t);for(var n=t.firstChild;n;n=n.nextSibling)e(n)},t.isDataInitialized=function(e){return Boolean(e.__incrementalDOMData)},t.notifications=d,t.symbols=n,t.attr=function(e,t){var n=_();n.push(e),n.push(t)},t.elementClose=F,t.elementOpen=R,t.elementOpenEnd=function(){var e=_(),t=R.apply(null,e);return s(e,0),t},t.elementOpenStart=function(e,t,n){var o=_();o[0]=e,o[1]=t,o[2]=n},t.elementVoid=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];return R.apply(null,arguments),F()},t.text=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=E(),r=b(o);if(r.text!==e){r.text=e;for(var i=e,a=1;a<arguments.length;a+=1){var s=arguments[a];i=s(i)}o.data=i}return o},t.key=function(e){_()[1]=e}});(dt=ht)&&dt.__esModule&&Object.prototype.hasOwnProperty.call(dt,"default");var gt=ht.applyProp,mt=ht.attributes,vt=ht.patch,yt=ht.elementClose,bt=ht.elementOpen,St=ht.elementVoid,wt=ht.text;mt.caretpos=function(e,t,n){e.setSelectionRange(n,n)},mt.value=gt;var Zt=function(e,t,n,o){vt(e,function(){!function(e,t,n){if(e.suggestions.length>0&&e.focused){bt("ul","",["class","dawa-autocomplete-suggestions","role","listbox","unselectable","on"]);for(var o=function(o){var r=e.suggestions[o],i="dawa-autocomplete-suggestion";e.selected===o&&(i+=" dawa-selected"),bt("li","",["role","option"],"class",i,"onmousedown",function(e){t(o),e.preventDefault()});var a=r.forslagstekst.split("\n");if(a=a.map(function(e){return e.replace(/ /g,"\xa0")}),n){wt(a[0]);for(var s=1;s<a.length;++s)St("br"),wt(a[s])}else wt(a.join(", "));yt("li")},r=0;r<e.suggestions.length;++r)o(r);yt("ul")}}(t,n,o)})};var kt,xt,At,Tt=function(e,t,n,o){try{return o?t(Y(n)[0],n[1]):t(n)}catch(i){var r=e.return;throw void 0!==r&&Y(r.call(e)),i}},_t={},Ct=Ne("iterator"),Ot=Array.prototype,jt=function(e){return void 0!==e&&(_t.Array===e||Ot[Ct]===e)},qt=Ne("iterator"),It=E.getIteratorMethod=function(e){if(null!=e)return e[qt]||e["@@iterator"]||_t[De(e)]},Mt=N(function(e){var t={},n={},o=e.exports=function(e,o,r,i,a){var s,c,l,u,p=a?function(){return e}:It(e),f=ce(r,i,o?2:1),d=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(jt(p)){for(s=Se(e.length);s>d;d++)if((u=o?f(Y(c=e[d])[0],c[1]):f(e[d]))===t||u===n)return u}else for(l=p.call(e);!(c=l.next()).done;)if((u=Tt(l,f,c.value,o))===t||u===n)return u};o.BREAK=t,o.RETURN=n}),$t=function(e,t,n){var o=void 0===n;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},Lt=J.document,Ut=Lt&&Lt.documentElement,Pt=J.process,Nt=J.setImmediate,Jt=J.clearImmediate,Et=J.MessageChannel,Dt=J.Dispatch,Yt=0,Rt={},Ft=function(){var e=+this;if(Rt.hasOwnProperty(e)){var t=Rt[e];delete Rt[e],t()}},Qt=function(e){Ft.call(e.data)};Nt&&Jt||(Nt=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Rt[++Yt]=function(){$t("function"==typeof e?e:Function(e),t)},kt(Yt),Yt},Jt=function(e){delete Rt[e]},"process"==fe(Pt)?kt=function(e){Pt.nextTick(ce(Ft,e,1))}:Dt&&Dt.now?kt=function(e){Dt.now(ce(Ft,e,1))}:Et?(At=(xt=new Et).port2,xt.port1.onmessage=Qt,kt=ce(At.postMessage,At,1)):J.addEventListener&&"function"==typeof postMessage&&!J.importScripts?(kt=function(e){J.postMessage(e+"","*")},J.addEventListener("message",Qt,!1)):kt="onreadystatechange"in G("script")?function(e){Ut.appendChild(G("script")).onreadystatechange=function(){Ut.removeChild(this),Ft.call(e)}}:function(e){setTimeout(ce(Ft,e,1),0)});var zt={set:Nt,clear:Jt},Gt=zt.set,Bt=J.MutationObserver||J.WebKitMutationObserver,Wt=J.process,Ht=J.Promise,Vt="process"==fe(Wt);function Xt(e){var t,n;this.promise=new e(function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o}),this.resolve=se(t),this.reject=se(n)}var Kt={f:function(e){return new Xt(e)}},en=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}},tn=J.navigator,nn=tn&&tn.userAgent||"",on=H.f,rn=Ne("toStringTag"),an=function(e,t,n){e&&!ee(e=n?e:e.prototype,rn)&&on(e,rn,{configurable:!0,value:t})},sn=Ne("species"),cn=Ne("iterator"),ln=!1;try{[7][cn]().return=function(){ln=!0}}catch(pr){}var un,pn,fn,dn,hn,gn=zt.set,mn=function(){var e,t,n,o=function(){var o,r;for(Vt&&(o=Wt.domain)&&o.exit();e;){r=e.fn,e=e.next;try{r()}catch(pr){throw e?n():t=void 0,pr}}t=void 0,o&&o.enter()};if(Vt)n=function(){Wt.nextTick(o)};else if(!Bt||J.navigator&&J.navigator.standalone)if(Ht&&Ht.resolve){var r=Ht.resolve(void 0);n=function(){r.then(o)}}else n=function(){Gt.call(J,o)};else{var i=!0,a=document.createTextNode("");new Bt(o).observe(a,{characterData:!0}),n=function(){a.data=i=!i}}return function(o){var r={fn:o,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}(),vn="Promise",yn=J.TypeError,bn=J.process,Sn=bn&&bn.versions,wn=Sn&&Sn.v8||"",Zn=J.Promise,kn="process"==De(bn),xn=function(){},An=pn=Kt.f,Tn=!!function(){try{var e=Zn.resolve(1),t=(e.constructor={})[Ne("species")]=function(e){e(xn,xn)};return(kn||"function"==typeof PromiseRejectionEvent)&&e.then(xn)instanceof t&&0!==wn.indexOf("6.6")&&-1===nn.indexOf("Chrome/66")}catch(pr){}}(),_n=function(e){var t;return!(!D(e)||"function"!=typeof(t=e.then))&&t},Cn=function(e,t){if(!e._n){e._n=!0;var n=e._c;mn(function(){for(var o=e._v,r=1==e._s,i=0,a=function(t){var n,i,a,s=r?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{s?(r||(2==e._h&&qn(e),e._h=1),!0===s?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),a=!0)),n===t.promise?l(yn("Promise-chain cycle")):(i=_n(n))?i.call(n,c,l):c(n)):l(o)}catch(pr){u&&!a&&u.exit(),l(pr)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&On(e)})}},On=function(e){gn.call(J,function(){var t,n,o,r=e._v,i=jn(e);if(i&&(t=en(function(){kn?bn.emit("unhandledRejection",r,e):(n=J.onunhandledrejection)?n({promise:e,reason:r}):(o=J.console)&&o.error&&o.error("Unhandled promise rejection",r)}),e._h=kn||jn(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},jn=function(e){return 1!==e._h&&0===(e._a||e._c).length},qn=function(e){gn.call(J,function(){var t;kn?bn.emit("rejectionHandled",e):(t=J.onrejectionhandled)&&t({promise:e,reason:e._v})})},In=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Cn(t,!0))},Mn=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw yn("Promise can't be resolved itself");(t=_n(e))?mn(function(){var o={_w:n,_d:!1};try{t.call(e,ce(Mn,o,1),ce(In,o,1))}catch(pr){In.call(o,pr)}}):(n._v=e,n._s=1,Cn(n,!1))}catch(pr){In.call({_w:n,_d:!1},pr)}}};Tn||(Zn=function(e){!function(e,t,n,o){if(!(e instanceof t)||"_h"in e)throw TypeError("Promise: incorrect invocation!")}(this,Zn),se(e),un.call(this);try{e(ce(Mn,this,1),ce(In,this,1))}catch(t){In.call(this,t)}},(un=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var o in t)ae(e,o,t[o],void 0);return e}(Zn.prototype,{then:function(e,t){var n=An(ct(this,Zn));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=kn?bn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Cn(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),fn=function(){var e=new un;this.promise=e,this.resolve=ce(Mn,e,1),this.reject=ce(In,e,1)},Kt.f=An=function(e){return e===Zn||e===dn?new fn(e):pn(e)}),ue(ue.G+ue.W+ue.F*!Tn,{Promise:Zn}),an(Zn,vn),hn=J.Promise,F&&hn&&!hn[sn]&&H.f(hn,sn,{configurable:!0,get:function(){return this}}),dn=E.Promise,ue(ue.S+ue.F*!Tn,vn,{reject:function(e){var t=An(this);return(0,t.reject)(e),t.promise}}),ue(ue.S+ue.F*!Tn,vn,{resolve:function(e){return function(e,t){if(Y(e),D(t)&&t.constructor===e)return t;var n=Kt.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),ue(ue.S+ue.F*!(Tn&&function(e,t){if(!ln)return!1;var n=!1;try{var o=[7],r=o[cn]();r.next=function(){return{done:n=!0}},o[cn]=function(){return r},function(e){Zn.all(e).catch(xn)}(o)}catch(pr){}return n}()),vn,{all:function(e){var t=this,n=An(t),o=n.resolve,r=n.reject,i=en(function(){var n=[],i=0,a=1;Mt(e,!1,function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||o(n))},r)}),--a||o(n)});return i.e&&r(i.v),n.promise},race:function(e){var t=this,n=An(t),o=n.reject,r=en(function(){Mt(e,!1,function(e){t.resolve(e).then(n.resolve,o)})});return r.e&&o(r.v),n.promise}});var $n=Ne("unscopables"),Ln=Array.prototype;null==Ln[$n]&&X(Ln,$n,{});var Un=function(e){Ln[$n][e]=!0},Pn=function(e,t){return{value:t,done:!!e}},Nn=F?Object.defineProperties:function(e,t){Y(e);for(var n,o=Ce(t),r=o.length,i=0;r>i;)H.f(e,n=o[i++],t[n]);return e},Jn=xe("IE_PROTO"),En=function(){},Dn=function(){var e,t=G("iframe"),n=_e.length;for(t.style.display="none",Ut.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Dn=e.F;n--;)delete Dn.prototype[_e[n]];return Dn()},Yn=Object.create||function(e,t){var n;return null!==e?(En.prototype=Y(e),n=new En,En.prototype=null,n[Jn]=e):n=Dn(),void 0===t?n:Nn(n,t)},Rn={};X(Rn,Ne("iterator"),function(){return this});var Fn=function(e,t,n){e.prototype=Yn(Rn,{next:V(1,n)}),an(e,t+" Iterator")},Qn=xe("IE_PROTO"),zn=Object.prototype,Gn=Object.getPrototypeOf||function(e){return e=qe(e),ee(e,Qn)?e[Qn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?zn:null},Bn=Ne("iterator"),Wn=!([].keys&&"next"in[].keys()),Hn="keys",Vn="values",Xn=function(){return this},Kn=function(e,t,n,o,r,i,a){Fn(n,t,function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Pn(1)):Pn(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])});var s,c,l,u=function(e){if(!Wn&&e in d)return d[e];switch(e){case Hn:case Vn:return function(){return new n(this,e)}}return function(){return new n(this,e)}},p="Array Iterator",f=!1,d=e.prototype,h=d[Bn]||d["@@iterator"]||d.values,g=h||u("values"),m=u("entries"),v=d.entries||h;if(v&&(l=Gn(v.call(new e)))!==Object.prototype&&l.next&&(an(l,p,!0),"function"!=typeof l[Bn]&&X(l,Bn,Xn)),h&&h.name!==Vn&&(f=!0,g=function(){return h.call(this)}),(Wn||f||!d[Bn])&&X(d,Bn,g),_t.Array=g,_t[p]=Xn,void(s={values:g,keys:u(Hn),entries:m}))for(c in s)c in d||ae(d,c,s[c]);else ue(ue.P+ue.F*(Wn||f),t,s);return s}(Array,"Array",function(e,t){this._t=ge(e),this._i=0,this._k=t});_t.Arguments=_t.Array,Un("keys"),Un("values"),Un("entries");for(var eo=Ne("iterator"),to=Ne("toStringTag"),no=_t.Array,oo={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ro=Ce(oo),io=0;io<ro.length;io++){var ao,so=ro[io],co=oo[so],lo=J[so],uo=lo&&lo.prototype;if(uo&&(uo[eo]||X(uo,eo,no),uo[to]||X(uo,to,so),_t[so]=no,co))for(ao in Kn)uo[ao]||ae(uo,ao,Kn[ao],!0)}var po,fo,ho={};ho[Ne("toStringTag")]="z",ho+""!="[object z]"&&ae(Object.prototype,"toString",function(){return"[object "+De(this)+"]"},!0),po=(E.Object||{}).keys||Object.keys,fo={keys:function(e){return Ce(qe(e))}},ue(ue.S+ue.F*R(function(){po(1)}),"Object",fo);var go={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(e,t){return(n="".concat(e,"?").concat(function(e){return Object.keys(e).map(function(t){var n=e[t];return"".concat(t,"=").concat(encodeURIComponent(n))}).join("&")}(t)),o={mode:"cors"},o=o||{},new Promise(function(e,t){var r=new XMLHttpRequest,i=[],a=[],s={},c=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(JSON.parse(r.responseText))},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var l in r.open(o.method||"get",n,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),a.push([t,n]),s[t]=s[t]?s[t]+","+n:n}),e(c())},r.onerror=t,r.withCredentials="include"==o.credentials,o.headers)r.setRequestHeader(l,o.headers[l]);r.send(o.body||null)})).then(function(e){return e.json()});var n,o}},mo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({},go,t||{}),this.options=t,this.state={currentRequest:null,pendingRequest:null},this.selected=null}var t;return(t=[{key:"_getAutocompleteResponse",value:function(e,t,n,o,r,i){var a=Object.assign({},this.options.params,{q:e,type:this.options.type,caretpos:t,supplerendebynavn:r,stormodtagerpostnumre:i,multilinje:!0});return this.options.fuzzy&&(a.fuzzy=""),o&&(a.adgangsadresseid=o),n&&(a.startfra="adgangsadresse"),this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),a)}},{key:"_scheduleRequest",value:function(e){null!==this.state.currentRequest?this.state.pendingRequest=e:(this.state.currentRequest=e,this._executeRequest())}},{key:"_executeRequest",value:function(){var e,t,n=this,o=this.state.currentRequest,r=null,i=!1;if(o.selected){var a=o.selected;if(a.type===this.options.type)return this.options.selectCallback(a),this.selected=a,void this._requestCompleted();r="adgangsadresse"===a.type?a.data.id:null,i="vejnavn"===a.type,e=a.tekst,t=a.caretpos}else e=o.text,t=o.caretpos;if(o.selectedId){var s={id:o.selectedId,type:this.options.type};return this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),s).then(function(e){return n._handleResponse(o,e)},function(e){return n._handleFailedRequest(o,e)})}o.selected||o.text.length>=this.options.minLength?this._getAutocompleteResponse(e,t,i,r,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(e){return n._handleResponse(o,e)},function(e){return n._handleFailedRequest(o,e)}):this._handleResponse(o,[])}},{key:"_handleFailedRequest",value:function(e,t){var n,o=this;return console.error("DAWA request failed",t),(n=this.options.retryDelay,new Promise(function(e){return setTimeout(e,n)})).then(function(){o.state.pendingRequest||o._scheduleRequest(e),o._requestCompleted()})}},{key:"_handleResponse",value:function(e,t){if(e.selected)if(1===t.length){var n=t[0];n.type===this.options.type?this.options.selectCallback(n):this.state.pendingRequest||(this.state.pendingRequest={selected:n})}else this.options.renderCallback&&this.options.renderCallback(t);else e.selectedId?1===t.length&&(this.selected=t[0],this.options.initialRenderCallback(t[0].tekst)):this.options.renderCallback&&this.options.renderCallback(t);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(e){this.options.renderCallback=e}},{key:"setInitialRenderCallback",value:function(e){this.options.initialRenderCallback=e}},{key:"setSelectCallback",value:function(e){this.options.selectCallback=e}},{key:"update",value:function(e,t){this._scheduleRequest({text:e,caretpos:t})}},{key:"select",value:function(e){this._scheduleRequest({selected:e})}},{key:"selectInitial",value:function(e){this._scheduleRequest({selectedId:e})}},{key:"destroy",value:function(){}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}();const vo=["input"];let yo=(()=>{class e{constructor(e,t){this.modalController=e,this.mapService=t}ngAfterViewInit(){!function(e,t){t=Object.assign({select:function(){return null}},t);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn","type"].reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});n.type||(n.type=t.adgangsadresserOnly?"adgangsadresse":"adresse");var o=new mo(n),r=function(e,t){var n=t.onSelect,o=t.onTextChange,r=t.render||Zt,i=!1,a="",s=0,c=document.createElement("div");e.parentNode.insertBefore(c,e.nextSibling);var l,u={caretpos:2,inputText:"",selected:0,focused:document.activeElement===e,suggestions:[]},p=function(e){var t=e.value,n=e.selectionStart;u.caretpos=n,u.inputText=t,function(e,t){a===e&&s===t||(o(e,t),a=e,s=t)}(t,n)},f=function(e){var t=u.suggestions[e];u.inputText=t.tekst,u.caretpos=t.caretpos,u.suggestions=[],n(t),l(!0)},d=function(e){var t=window.event?e.keyCode:e.which;if(u.suggestions.length>0&&u.focused){if(40===t)u.selected=(u.selected+1)%u.suggestions.length,l();else if(38===t)u.selected=(u.selected-1+u.suggestions.length)%u.suggestions.length,l();else{if(13!==t&&9!==t)return!0;f(u.selected)}return e.preventDefault(),!1}},h=function(){u.focused=!0,l()},g=function(){return u.focused=!1,l(),!1},m=function(e){p(e.target)},v=function(e){return p(e.target)},y=!1,b=!1;return(l=function(n){n&&(b=!0),y||(y=!0,requestAnimationFrame(function(){i||(y=!1,b&&(e.value=u.inputText,e.setSelectionRange(u.caretpos,u.caretpos)),b=!1,r(c,u,function(e){return f(e)},t.multiline))}))})(),e.addEventListener("keydown",d),e.addEventListener("blur",g),e.addEventListener("focus",h),e.addEventListener("input",m),e.addEventListener("mouseup",v),e.setAttribute("aria-autocomplete","list"),e.setAttribute("autocomplete","off"),{destroy:function(){i=!0,e.removeEventListener("keydown",d),e.removeEventListener("blur",g),e.removeEventListener("focus",h),e.removeEventListener("input",m),e.removeEventListener("mouseup",v),vt(c,function(){}),c.remove()},setSuggestions:function(e){u.suggestions=e,u.selected=0,l()},selectAndClose:function(e){u.inputText=e,u.caretpos=e.length,u.suggestions=[],u.selected=0,l(!0)}}}(e,{onSelect:function(e){o.select(e)},onTextChange:function(e,t){o.update(e,t)},render:t.render,multiline:t.multiline||!1});o.setRenderCallback(function(e){return r.setSuggestions(e)}),o.setSelectCallback(function(e){r.selectAndClose(e.tekst),t.select(e)}),o.setInitialRenderCallback(function(e){return r.selectAndClose(e)}),t.id&&o.selectInitial(t.id)}(this.input.nativeElement,{select:e=>{const t=[e.data.x,e.data.y];this.mapService.removeLayer("geosearch"),this.mapService.addMarker(t),this.mapService.flyTo(t),this.modalController.dismiss()},adgangsadresserOnly:!0}),setTimeout(()=>{this.input.nativeElement.focus()},500)}dismiss(){this.modalController.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN),b.Y36(S.S))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-geosearch-modal"]],viewQuery:function(e,t){if(1&e&&b.Gf(vo,5),2&e){let e;b.iGM(e=b.CRH())&&(t.input=e.first)}},decls:7,vars:0,consts:[[1,"autocomplete-container"],["placeholder","S\xf8g adresse","type","search","id","dawa-autocomplete-input"],["input",""],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-content"),b.TgZ(1,"div",0),b._UZ(2,"input",1,2),b.qZA(),b.qZA(),b.TgZ(4,"ion-fab",3),b.TgZ(5,"ion-fab-button",4),b.NdJ("click",function(){return t.dismiss()}),b._UZ(6,"ion-icon",5),b.qZA(),b.qZA())},directives:[o.W2,o.IJ,o.W4,o.gu],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:30em;padding:10px;margin:auto}.autocomplete-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border-radius:5px;border:.01px solid var(--ion-color-medium)}"]}),e})(),bo=(()=>{class e{constructor(e){this.modalController=e}ngOnInit(){}onShowGeoSearch(){return(0,s.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:yo,cssClass:"my-custom-class"});return yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-geosearch"]],decls:2,vars:0,consts:[["size","small","color","light",3,"click"],["name","search"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-fab-button",0),b.NdJ("click",function(){return t.onShowGeoSearch()}),b._UZ(1,"ion-icon",1),b.qZA())},directives:[o.W4,o.gu],styles:[""]}),e})(),So=(()=>{class e{constructor(e){this.uiState=e,this.drawEnabled$=this.uiState.uiState$.pipe(p("showMapDrawTool"))}ngOnInit(){}onToggleDrawTool(){this.uiState.updateUiState("showMapDrawTool",!0)}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(A.J))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-draw-fab"]],decls:4,vars:3,consts:[[1,"map-draw-tool"],["size","small",3,"color","click"],[1,"fg-polygon-pt","fg-lg"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b.TgZ(1,"ion-fab-button",1),b.NdJ("click",function(){return t.onToggleDrawTool()}),b.ALo(2,"async"),b._UZ(3,"i",2),b.qZA(),b.qZA()),2&e&&(b.xp6(1),b.Q6J("color",b.lcZ(2,1,t.drawEnabled$)?"secondary":"light"))},directives:[o.W4],pipes:[r.Ov],styles:[""]}),e})(),wo=(()=>{class e{constructor(e){this.uiState=e}ngOnInit(){}toggleAreaSelection(){this.uiState.toggleUiState("showProjectAreaSelection")}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(A.J))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-save-project-fab"]],decls:2,vars:0,consts:[["size","small","color","light",3,"click"],["name","bookmark"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-fab-button",0),b.NdJ("click",function(){return t.toggleAreaSelection()}),b._UZ(1,"ion-icon",1),b.qZA())},directives:[o.W4,o.gu],styles:[""]}),e})();function Zo(e,t){if(1&e){const e=b.EpF();b.ynx(0),b.TgZ(1,"ion-fab-button",3),b.NdJ("click",function(){return b.CHM(e),b.oxw().onAddPhoto()}),b._UZ(2,"ion-icon",6),b.qZA(),b._UZ(3,"app-map-draw-fab"),b.BQk()}}function ko(e,t){1&e&&b._UZ(0,"app-map-save-project-fab")}let xo=(()=>{class e{constructor(e,t,n,o){this.projectStore=e,this.geolocationService=t,this.userNotificationService=n,this.uiState=o,this.currentProject$=this.projectStore.currentProject$}ngOnInit(){this.uiState.uiState$.pipe(p("uploadingImage"),(0,L.zg)(e=>e?this.userNotificationService.presentLoading("Uploader billede"):this.userNotificationService.dismissLoading())).subscribe()}toggleTool(e){this.uiState.toggleUiState(e)}onAddPhoto(){this.projectStore.addPhoto().pipe((0,v.b)(()=>{this.userNotificationService.presentToast({message:"Dit billede blev gemt",color:"success",duration:2500,position:"top"})})).subscribe()}startTracking(){this.geolocationService.startTracking(),this.geolocationService.trackingPositions$.subscribe(console.log)}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(x.c),b.Y36(U._),b.Y36(P.w),b.Y36(A.J))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-tools"]],decls:11,vars:6,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"],["color","light",3,"click"],[1,"fg-poi-info","fg-lg"],[4,"ngIf"],["name","camera"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-fab",0),b.TgZ(1,"ion-fab-button",1),b._UZ(2,"ion-icon",2),b.qZA(),b.TgZ(3,"ion-fab-list"),b._UZ(4,"app-map-geosearch"),b.TgZ(5,"ion-fab-button",3),b.NdJ("click",function(){return t.toggleTool("showInfoTool")}),b._UZ(6,"i",4),b.qZA(),b.YNc(7,Zo,4,0,"ng-container",5),b.ALo(8,"async"),b.YNc(9,ko,1,0,"app-map-save-project-fab",5),b.ALo(10,"async"),b.qZA(),b.qZA()),2&e&&(b.xp6(7),b.Q6J("ngIf",void 0!==b.lcZ(8,2,t.currentProject$)),b.xp6(2),b.Q6J("ngIf",void 0===b.lcZ(10,4,t.currentProject$)))},directives:[o.IJ,o.W4,o.gu,o.zq,bo,r.O5,So,wo],pipes:[r.Ov],styles:[""]}),e})();function Ao(e,t){1&e&&b._UZ(0,"img",1),2&e&&b.Q6J("src",t.$implicit,b.LSH)}let To=(()=>{class e{constructor(e){this.mapLayersService=e,this.legends$=this.mapLayersService.legends$}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(_.Y))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-legend-popover"]],decls:2,vars:3,consts:[[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(e,t){1&e&&(b.YNc(0,Ao,1,1,"img",0),b.ALo(1,"async")),2&e&&b.Q6J("ngForOf",b.lcZ(1,1,t.legends$))},directives:[r.sg],pipes:[r.Ov],styles:["img[_ngcontent-%COMP%]{display:block;padding:10px}"]}),e})();function _o(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-fab",1),b.TgZ(1,"ion-fab-button",2),b.NdJ("click",function(t){return b.CHM(e),b.oxw().onShowPopover(t)}),b._UZ(2,"i",3),b.qZA(),b.qZA()}}let Co=(()=>{class e{constructor(e,t){this.popoverController=e,this.mapLayersService=t,this.showLegend$=this.mapLayersService.legends$.pipe((0,u.U)(e=>0!==e.length))}onShowPopover(e){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.popoverController.create({component:To,cssClass:"legend-popover",translucent:!0,showBackdrop:!1,animated:!1,event:e});yield t.present()})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.Dh),b.Y36(_.Y))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-legend-fab"]],decls:2,vars:3,consts:[["horizontal","start","vertical","bottom","slot","fixed",4,"ngIf"],["horizontal","start","vertical","bottom","slot","fixed"],[3,"click"],[1,"fg-map-legend-o","fg-2x"]],template:function(e,t){1&e&&(b.YNc(0,_o,3,0,"ion-fab",0),b.ALo(1,"async")),2&e&&b.Q6J("ngIf",b.lcZ(1,1,t.showLegend$))},directives:[r.O5,o.IJ,o.W4],pipes:[r.Ov],styles:[""]}),e})();var Oo=n(9923);function jo(e,t){if(1&e&&(b.TgZ(0,"ion-header"),b.TgZ(1,"ion-toolbar",2),b.TgZ(2,"ion-title",3),b._uU(3," Adresseoplysning "),b.qZA(),b.qZA(),b.qZA(),b.TgZ(4,"ion-content"),b.TgZ(5,"ion-item"),b._UZ(6,"ion-icon",4),b.TgZ(7,"ion-label"),b.TgZ(8,"h2"),b._uU(9),b.ALo(10,"async"),b.qZA(),b.TgZ(11,"p"),b._uU(12),b.ALo(13,"async"),b.ALo(14,"async"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(15,"ion-item",5),b.ALo(16,"async"),b._UZ(17,"ion-icon",6),b.TgZ(18,"ion-label"),b._uU(19," OIS "),b.qZA(),b.qZA(),b.TgZ(20,"ion-item",5),b.ALo(21,"async"),b._UZ(22,"ion-icon",6),b.TgZ(23,"ion-label"),b._uU(24," DinGeo "),b.qZA(),b.qZA(),b.TgZ(25,"ion-item",5),b.ALo(26,"async"),b._UZ(27,"ion-icon",6),b.TgZ(28,"ion-label"),b._uU(29," De Gule Sider "),b.qZA(),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.xp6(9),b.Oqu(b.lcZ(10,6,e.dawaInfo$).adresse),b.xp6(3),b.AsE("",b.lcZ(13,8,e.dawaInfo$).matrikkel.nummer,", ",b.lcZ(14,10,e.dawaInfo$).matrikkel.ejerlav,""),b.xp6(3),b.Q6J("href","http://gis.frederiksberg.dk/vaerktoejer/ois-link.html?"+b.lcZ(16,12,e.dawaInfo$).ois),b.xp6(5),b.Q6J("href","https://www.dingeo.dk/adresse/"+b.lcZ(21,14,e.dawaInfo$).dinGeo),b.xp6(5),b.Q6J("href","https://kort.degulesider.dk/s/"+b.lcZ(26,16,e.dawaInfo$).adresse)}}const qo=function(){return[0,.4,.6]};let Io=(()=>{class e{constructor(e,t,n){this.mapService=e,this.mapStore=t,this.notification=n,this.showModal=!1,this.adandon$=new l.xQ,this.dawaInfo$=new Oo.X(null),this.disableAddressButton$=this.mapStore.mapstate$.pipe((0,u.U)(e=>{var t;return(null===(t=e.view)||void 0===t?void 0:t.zoom)<15}))}ngOnInit(){this.mapStore.selectedFeature$.pipe(d(this.adandon$),(0,y.h)(e=>!!e),(0,u.U)(e=>e.getProperties()),(0,v.b)(e=>this.dawaInfo$.next({id:e.id,adresse:e.betegnelse,kommune:e.kommunenavn,matrikkel:{nummer:e.matrikelnr,ejerlav:e.ejerlavnavn,ejerlavkode:e.ejerlavkode},dinGeo:`${e.postnr}-${e.postnrnavn}/${e.vejnavn}-${e.husnr}/`,ois:`komnr=${e.kommunekode}&ejdnr=${e.esrejendomsnr}`})),(0,v.b)(()=>this.showModal=!this.showModal)).subscribe(console.log)}ngOnDestroy(){this.adandon$.next()}onShowPOI(){this.mapService.removeLayer("adresser"),this.mapService.addAdresserWithinViewExtent(),this.notification.presentToast({message:"Klik p\xe5 adresse for info",duration:2e3,position:"top",color:"secondary"})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(S.S),b.Y36(k.C),b.Y36(P.w))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-info-tool"]],decls:6,vars:10,consts:[["color","tertiary",3,"disabled","click"],[3,"isOpen","initialBreakpoint","breakpoints"],["color","primary"],[1,"ion-text-center"],["name","home-outline","slot","start"],["target","_blank",3,"href"],["name","link-outline","slot","start"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-button",0),b.NdJ("click",function(){return t.onShowPOI()}),b.ALo(1,"async"),b._uU(2),b.ALo(3,"async"),b.qZA(),b.TgZ(4,"ion-modal",1),b.YNc(5,jo,30,18,"ng-template"),b.qZA()),2&e&&(b.Q6J("disabled",b.lcZ(1,5,t.disableAddressButton$)),b.xp6(2),b.hij(" ",!1===b.lcZ(3,7,t.disableAddressButton$)?"Hent adresser":"Zoom l\xe6ngere ind for info","\n"),b.xp6(2),b.Q6J("isOpen",t.showModal)("initialBreakpoint",.4)("breakpoints",b.DdM(9,qo)))},directives:[o.YG,o.ki,o.Gu,o.sr,o.wd,o.W2,o.Ie,o.gu,o.Q$],pipes:[r.Ov],styles:["ion-chip[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),e})();function Mo(e,t){1&e&&b._UZ(0,"ion-spinner",4)}let $o=(()=>{class e{constructor(e,t){this.mapService=e,this.mapStoreService=t,this.tracking$=this.mapStoreService.mapstate$.pipe(p("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe(p("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(S.S),b.Y36(k.C))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-fab",0),b.TgZ(1,"ion-fab-button",1),b.NdJ("click",function(){return t.onToggleGeolocate()}),b._UZ(2,"ion-icon",2),b.YNc(3,Mo,1,0,"ion-spinner",3),b.ALo(4,"async"),b.qZA(),b.qZA()),2&e&&(b.xp6(1),b.Q6J("color",t.tracking?"danger":"primary"),b.xp6(2),b.Q6J("ngIf",b.lcZ(4,2,t.locating$)))},directives:[o.IJ,o.W4,o.gu,r.O5,o.PQ],pipes:[r.Ov],styles:[""]}),e})();var Lo=n(2850),Uo=n(3987);let Po=(()=>{class e{constructor(e){this.modalController=e}ngOnInit(){}dismiss(){this.modalController.dismiss(this.input)}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-draw-modal"]],decls:9,vars:1,consts:[["color","light"],[1,"ion-padding"],["position","floating"],[3,"ngModel","ngModelChange"],["horizontal","center","vertical","bottom","slot","fixed"],[3,"click"],["name","save-outline"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-content",0),b.TgZ(1,"div",1),b.TgZ(2,"ion-item"),b.TgZ(3,"ion-label",2),b._uU(4,"Angiv beskrivelse"),b.qZA(),b.TgZ(5,"ion-input",3),b.NdJ("ngModelChange",function(e){return t.input=e}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(6,"ion-fab",4),b.TgZ(7,"ion-fab-button",5),b.NdJ("click",function(){return t.dismiss()}),b._UZ(8,"ion-icon",6),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(5),b.Q6J("ngModel",t.input))},directives:[o.W2,o.Ie,o.Q$,o.pK,o.j9,i.JJ,i.On,o.IJ,o.W4,o.gu],styles:[""]}),e})();function No(e,t){if(1&e){const e=b.EpF();b.ynx(0),b.TgZ(1,"ion-fab-button",1),b.NdJ("click",function(){return b.CHM(e),b.oxw().onStartDraw("Point")}),b._UZ(2,"i",2),b.qZA(),b.TgZ(3,"ion-fab-button",1),b.NdJ("click",function(){return b.CHM(e),b.oxw().onStartDraw("LineString")}),b._UZ(4,"i",3),b.qZA(),b.TgZ(5,"ion-fab-button",1),b.NdJ("click",function(){return b.CHM(e),b.oxw().onStartDraw("Polygon")}),b._UZ(6,"i",4),b.qZA(),b.TgZ(7,"ion-fab-button",1),b.NdJ("click",function(){return b.CHM(e),b.oxw().onEndDraw()}),b._UZ(8,"ion-icon",5),b.qZA(),b.BQk()}}function Jo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-fab-button",8),b.TgZ(1,"ion-icon",9),b.NdJ("click",function(){return b.CHM(e),b.oxw(2).onToggleEditMode()}),b.qZA(),b.qZA()}}function Eo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-fab-button",10),b.NdJ("click",function(){return b.CHM(e),b.oxw(2).onUndo()}),b._UZ(1,"ion-icon",11),b.qZA()}}function Do(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-fab-button",10),b.NdJ("click",function(){return b.CHM(e),b.oxw(2).onDelete()}),b._UZ(1,"ion-icon",12),b.qZA()}}function Yo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-fab-button",10),b.NdJ("click",function(){return b.CHM(e),b.oxw(2).onSave()}),b._UZ(1,"ion-icon",13),b.qZA()}}function Ro(e,t){if(1&e&&(b.ynx(0),b.YNc(1,Jo,2,0,"ion-fab-button",6),b.ALo(2,"async"),b.YNc(3,Eo,2,0,"ion-fab-button",7),b.ALo(4,"async"),b.YNc(5,Do,2,0,"ion-fab-button",7),b.ALo(6,"async"),b.YNc(7,Yo,2,0,"ion-fab-button",7),b.ALo(8,"async"),b.BQk()),2&e){const e=b.oxw();b.xp6(1),b.Q6J("ngIf",b.lcZ(2,4,e.drawUiState$).showBack),b.xp6(2),b.Q6J("ngIf","Point"!==e.drawGeometry&&b.lcZ(4,6,e.drawUiState$).showUndo),b.xp6(2),b.Q6J("ngIf",b.lcZ(6,8,e.drawUiState$).showDelete),b.xp6(2),b.Q6J("ngIf",b.lcZ(8,10,e.drawUiState$).showSave)}}let Fo=(()=>{class e{constructor(e,t,n,o,r){this.modalController=e,this.mapService=t,this.mapStore=n,this.projectStore=o,this.uiState=r,this.drawUiState$=this.uiState.uiState$.pipe(p("drawConfig"))}ngOnInit(){this.uiState.resetDrawUiState()}onStartDraw(e){this.mapService.removeClickInfo(),this.mapService.removeDrawTool(),this.drawGeometry=e,this.mapService.activateDrawTool(e),this.uiState.updateDrawUiState("inEditMode",!0)}onEndDraw(){this.uiState.updateUiState("showMapDrawTool",!1),this.mapService.removeDrawTool(),this.mapService.addClickInfo()}onToggleEditMode(){this.uiState.updateDrawUiState("inEditMode",!1)}onUndo(){this.mapService.removeLastDrawPoint()}onDelete(){this.mapService.removeDrawTool(),this.onStartDraw(this.drawGeometry)}onSave(){this.mapService.finishDrawing(),this.mapService.changeLayerStyle("draw",c.l.default),this.mapStore.drawnGeometry$.pipe((0,Uo.P)(),(0,y.h)(e=>!!e),(0,L.zg)(e=>(0,Lo.D)(this.showDrawModal()).pipe((0,u.U)(t=>({geom:e,description:t}))))).subscribe()}showDrawModal(){return(0,s.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({cssClass:"bottom-modal",component:Po});yield e.present();const{data:t}=yield e.onWillDismiss();return t&&this.projectStore.addFeature({description:t}),t})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(o.IN),b.Y36(S.S),b.Y36(k.C),b.Y36(x.c),b.Y36(A.J))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-draw-tool"]],decls:4,vars:6,consts:[[4,"ngIf"],["size","small","color","primary",3,"click"],[1,"fg-point","fg-lg"],[1,"fg-polyline-pt","fg-lg"],[1,"fg-polygon-pt","fg-lg"],["name","close"],["size","small","color","secondary",4,"ngIf"],["size","small","color","secondary",3,"click",4,"ngIf"],["size","small","color","secondary"],["name","arrow-back-outline",3,"click"],["size","small","color","secondary",3,"click"],["name","arrow-undo-circle-outline"],["name","trash"],["name","save"]],template:function(e,t){1&e&&(b.YNc(0,No,9,0,"ng-container",0),b.ALo(1,"async"),b.YNc(2,Ro,9,12,"ng-container",0),b.ALo(3,"async")),2&e&&(b.Q6J("ngIf",!1===b.lcZ(1,2,t.drawUiState$).inEditMode),b.xp6(2),b.Q6J("ngIf",b.lcZ(3,4,t.drawUiState$).inEditMode))},directives:[r.O5,o.W4,o.gu],pipes:[r.Ov],styles:[""]}),e})();var Qo=n(9941),zo=n(4289),Go=n(267),Bo=n(3748),Wo=n(110);function Ho(e,t){1&e&&(b.TgZ(0,"ion-badge"),b._uU(1,"Zoom ind for at v\xe6lge matrikler"),b.qZA())}function Vo(e,t){1&e&&(b.TgZ(0,"ion-badge"),b._uU(1,"Tryk p\xe5 kortet for at tegne"),b.qZA())}function Xo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-fab",7),b.TgZ(1,"ion-fab-button",8),b.NdJ("click",function(){return b.CHM(e),b.oxw().toggleModal()}),b._UZ(2,"ion-icon",9),b.qZA(),b.qZA()}}function Ko(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-header"),b._UZ(1,"ion-toolbar",10),b.qZA(),b.TgZ(2,"ion-content"),b.TgZ(3,"form",11),b.NdJ("ngSubmit",function(){return b.CHM(e),b.oxw().onCreateProject()}),b.TgZ(4,"ion-item"),b._UZ(5,"ion-input",12),b.qZA(),b.TgZ(6,"ion-item"),b._UZ(7,"ion-textarea",13),b.qZA(),b.TgZ(8,"ion-button",14),b._uU(9,"Opret projekt"),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();b.xp6(3),b.Q6J("formGroup",e.project)}}const er=function(){return[0,.4,.5]};let tr=(()=>{class e{constructor(e,t,n,o,r,i,a){this.router=e,this.fb=t,this.mapService=n,this.mapStore=o,this.projectStore=r,this.uiState=i,this.dawaService=a,this.showModal=!1,this.disableMatrikel$=this.mapStore.mapstate$.pipe((0,u.U)(e=>{var t;return(null===(t=e.view)||void 0===t?void 0:t.zoom)<15})),this.selectedArea$=this.mapStore.selectedFeature$,this.drawnGeometry$=this.mapStore.drawnGeometry$}ngOnInit(){this.project=this.fb.group({name:["",[i.kI.required]],description:[""]})}toggleModal(){let e;switch(this.showModal=!this.showModal,this.geomSource){case"jordstykke":e=this.mapStore.selectedFeatureAsWKT$;break;case"draw":e=this.mapStore.drawnGeometry$;break;case"bounds":const t=this.mapService.getViewExtent();e=(0,Go.of)(this.mapService.featureAsWKT(t,"EPSG:4326","EPSG:25832"))}e.pipe((0,Uo.P)(),(0,u.U)(e=>{const t=(new zo.Z).readFeature(e).getGeometry().getExtent();return this.mapService.transform((0,Qo.qg)(t),"EPSG:25832","EPSG:4326")}),(0,Bo.b)(e=>this.dawaService.reverseGeocode(e[0],e[1])),(0,v.b)(e=>this.project.patchValue({name:`${e.vejnavn} ${e.husnr}`,description:`N\xe6r ${e.adressebetegnelse} - Matrikel: ${e.matrikelnr}, ${e.ejerlav.navn}`}))).subscribe()}selectionMethodChanged(e){switch(this.geomSource=e.detail.value,this.geomSource){case"jordstykke":this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),this.mapService.addMatrikelWithinViewExtent(),this.uiState.updateUiState("showMapDrawTool",!1);break;case"draw":this.uiState.updateDrawUiState("inEditMode",!0),this.uiState.updateDrawUiState("showBack",!1),this.uiState.updateDrawUiState("showSave",!1),this.mapService.removeLayer("jordstykke"),this.mapService.removeDrawTool(),this.mapService.activateDrawTool("Polygon"),this.uiState.updateUiState("showMapDrawTool",!0);break;case"bounds":this.uiState.updateUiState("showMapDrawTool",!1),this.mapService.removeLayer("jordstykke"),this.mapService.removeDrawTool()}}onCreateProject(){"draw"===this.geomSource&&(this.mapService.finishDrawing(),this.uiState.updateUiState("showMapDrawTool",!1)),this.toggleModal(),this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),setTimeout(()=>{this.uiState.toggleUiState("showProjectAreaSelection"),this.projectStore.addProject(this.project.value,this.geomSource),this.router.navigateByUrl("/app/projects")},250)}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.F0),b.Y36(i.qu),b.Y36(S.S),b.Y36(k.C),b.Y36(x.c),b.Y36(A.J),b.Y36(Wo.r))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-map-save-project-area-selection"]],decls:18,vars:14,consts:[[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed",4,"ngIf"],["mode","md",3,"ionChange"],["value","jordstykke",3,"disabled"],["value","draw"],["value","bounds"],[3,"isOpen","initialBreakpoint","breakpoints"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","checkmark-outline"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(e,t){1&e&&(b.YNc(0,Ho,2,0,"ion-badge",0),b.ALo(1,"async"),b.YNc(2,Vo,2,0,"ion-badge",0),b.YNc(3,Xo,3,0,"ion-fab",1),b.ALo(4,"async"),b.TgZ(5,"ion-segment",2),b.NdJ("ionChange",function(e){return t.selectionMethodChanged(e)}),b.TgZ(6,"ion-segment-button",3),b.ALo(7,"async"),b.TgZ(8,"ion-label"),b._uU(9,"Matrikel"),b.qZA(),b.qZA(),b.TgZ(10,"ion-segment-button",4),b.TgZ(11,"ion-label"),b._uU(12,"Tegn"),b.qZA(),b.qZA(),b.TgZ(13,"ion-segment-button",5),b.TgZ(14,"ion-label"),b._uU(15,"Kortudsnit"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(16,"ion-modal",6),b.YNc(17,Ko,10,1,"ng-template"),b.qZA()),2&e&&(b.Q6J("ngIf",b.lcZ(1,7,t.disableMatrikel$)&&"jordstykke"===t.geomSource),b.xp6(2),b.Q6J("ngIf","draw"===t.geomSource),b.xp6(1),b.Q6J("ngIf",b.lcZ(4,9,t.selectedArea$)&&"jordstykke"===t.geomSource||"draw"===t.geomSource||"bounds"===t.geomSource),b.xp6(3),b.Q6J("disabled",b.lcZ(7,11,t.disableMatrikel$)&&"jordstykke"===t.geomSource),b.xp6(10),b.Q6J("isOpen",t.showModal)("initialBreakpoint",.4)("breakpoints",b.DdM(13,er)))},directives:[r.O5,o.cJ,o.QI,o.GO,o.Q$,o.ki,o.yp,o.IJ,o.W4,o.gu,o.Gu,o.sr,o.W2,i._Y,i.JL,i.sg,o.Ie,o.pK,o.j9,i.JJ,i.u,o.g2,o.YG],pipes:[r.Ov],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}.fab-vertical-bottom[_ngcontent-%COMP%]{bottom:55px}"]}),e})();function nr(e,t){1&e&&b._UZ(0,"ion-progress-bar",4)}function or(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"div",5),b.TgZ(1,"ion-chip",6),b.TgZ(2,"ion-label"),b._uU(3),b.ALo(4,"async"),b.qZA(),b.TgZ(5,"ion-icon",7),b.NdJ("click",function(){return b.CHM(e),b.oxw().onClearProject()}),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();b.xp6(3),b.Oqu(b.lcZ(4,1,e.currentProject$).name)}}function rr(e,t){1&e&&b._UZ(0,"app-map-info-tool",8)}function ir(e,t){1&e&&b._UZ(0,"app-map-geolocation")}function ar(e,t){1&e&&b._UZ(0,"app-map-draw-tool")}function sr(e,t){1&e&&b._UZ(0,"app-map-save-project-area-selection",8)}const cr=[{path:"",component:(()=>{class e{constructor(e,t,n,o,r,i,a){this.rounter=e,this.route=t,this.mapStore=n,this.projectStore=o,this.mapService=r,this.modalController=i,this.uiState=a,this.abandon$=new l.xQ,this.loading$=this.mapStore.mapstate$.pipe(p("loadingFeatureInfo")),this.uiState$=this.uiState.uiState$,this.currentProject$=this.projectStore.currentProject$}ngOnInit(){this.mapStore.mapstate$.pipe(d(this.abandon$),p("loadingFeatureInfo")).subscribe(),this.route.queryParams.pipe((0,m.q)(1),(0,v.b)(e=>{const t=[Number(e.x),Number(e.y)],n=Number(e.zoom);t[0]&&setTimeout(()=>{this.mapService.setView({center:t,zoom:n})},3e3)})).subscribe(),this.mapStore.mapstate$.pipe(p("view"),(0,u.U)(e=>({x:null==e?void 0:e.center[0],y:null==e?void 0:e.center[1],zoom:null==e?void 0:e.zoom}))).pipe(d(this.abandon$),(0,v.b)(e=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:e})})).subscribe(),this.projectStore.currentProjectAreaGeoJSON$.pipe(d(this.abandon$),(0,v.b)(console.log),(0,v.b)(e=>this.mapService.addGeoJSON(e,"projectArea","EPSG:25832",c.l.projectArea))).subscribe(),this.projectStore.currentProjectImageGeoJSON$.pipe(d(this.abandon$),(0,v.b)(e=>{try{this.mapService.addGeoJSON(e,"photos","EPSG:25832")}catch(t){}})).subscribe(),this.projectStore.currentProjectFeatureGeoJSON$.pipe(d(this.abandon$),(0,v.b)(e=>{try{this.mapService.addGeoJSON(e,"features","EPSG:25832")}catch(t){}})).subscribe(),this.mapStore.selectedImage$.pipe(d(this.abandon$),(0,y.h)(e=>null!==e),(0,v.b)(()=>this.mapStore.updateMapState("loadingFeatureInfo",!0)),(0,v.b)(e=>{this.mapStore.updateMapState("loadingFeatureInfo",!1),this.showFeatureInfo(e)})).subscribe()}ngOnDestroy(){this.abandon$.next()}ionViewDidEnter(){this.mapService.resize()}showFeatureInfo(e){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.modalController.create({component:Z,componentProps:{feature:e}})).present()})}onClearProject(){this.projectStore.clearCurrentProject()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.F0),b.Y36(a.gz),b.Y36(k.C),b.Y36(x.c),b.Y36(S.S),b.Y36(o.IN),b.Y36(A.J))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-tap-map"]],decls:17,vars:18,consts:[["type","indeterminate","color","tertiary",4,"ngIf"],["class","current-project",4,"ngIf"],["class","full-width-bottom-tool",4,"ngIf"],[4,"ngIf"],["type","indeterminate","color","tertiary"],[1,"current-project"],["color","primary","outline","",1,"project-chip"],["name","close-circle",3,"click"],[1,"full-width-bottom-tool"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-content"),b.YNc(1,nr,1,0,"ion-progress-bar",0),b.ALo(2,"async"),b._UZ(3,"app-map"),b.YNc(4,or,6,3,"div",1),b.ALo(5,"async"),b._UZ(6,"app-map-layers-control"),b._UZ(7,"app-map-tools"),b.YNc(8,rr,1,0,"app-map-info-tool",2),b.ALo(9,"async"),b._UZ(10,"app-map-legend-fab"),b.YNc(11,ir,1,0,"app-map-geolocation",3),b.ALo(12,"async"),b.YNc(13,ar,1,0,"app-map-draw-tool",3),b.ALo(14,"async"),b.YNc(15,sr,1,0,"app-map-save-project-area-selection",2),b.ALo(16,"async"),b.qZA()),2&e&&(b.xp6(1),b.Q6J("ngIf",b.lcZ(2,6,t.loading$)),b.xp6(3),b.Q6J("ngIf",void 0!==b.lcZ(5,8,t.currentProject$)),b.xp6(4),b.Q6J("ngIf",b.lcZ(9,10,t.uiState$).showInfoTool),b.xp6(3),b.Q6J("ngIf",!1===b.lcZ(12,12,t.uiState$).showProjectAreaSelection),b.xp6(2),b.Q6J("ngIf",b.lcZ(14,14,t.uiState$).showMapDrawTool),b.xp6(2),b.Q6J("ngIf",b.lcZ(16,16,t.uiState$).showProjectAreaSelection))},directives:[o.W2,r.O5,T,$,xo,Co,o.X7,o.hM,o.Q$,o.gu,Io,$o,Fo,tr],pipes:[r.Ov],styles:[".current-project[_ngcontent-%COMP%]{position:fixed;z-index:100;top:10px;width:100%;text-align:center}.project-chip[_ngcontent-%COMP%]{background:#fff6}ion-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;z-index:100}app-map-draw-tool[_ngcontent-%COMP%]{position:fixed;top:calc(50% - 76px)}.full-width-bottom-tool[_ngcontent-%COMP%]{position:fixed;z-index:10;bottom:0;width:100%}app-map-info-tool[_ngcontent-%COMP%]{text-align:center}"]}),e})()}];let lr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[a.Bz.forChild(cr)],a.Bz]}),e})(),ur=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[o.Pc,r.ez,i.u5,i.UX,lr]]}),e})()}}]);