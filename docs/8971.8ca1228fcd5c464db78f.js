(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[8971],{8971:(t,e,n)=>{"use strict";n.r(e),n.d(e,{MapPageModule:()=>q});var o=n(5401),r=n(6274),i=n(4988),c=n(1750),s=n(9917),a=n(6286),l=n(8561);function p(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>(0,l.U)(function(t,e){return n=>{let o=n;for(let r=0;r<e;r++){const e=null!=o?o[t[r]]:void 0;if(void 0===e)return;o=e}return o}}(t,e))(n)}var u=n(3606),m=n(2329),h=n(5176),f=n(1263);let g=(()=>{class t{constructor(t){this.mapService=t,this.center=[1360103,7491908],this.zoom=13}ngAfterViewInit(){this.mapService.createMap(this.center,this.zoom),setTimeout(()=>{this.mapService.resize()},500)}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.S))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-map"]],decls:1,vars:0,consts:[["id","ol-map",1,"map-container"]],template:function(t,e){1&t&&u._UZ(0,"div",0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();function d(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{a(o.next(t))}catch(e){i(e)}}function s(t){try{a(o.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})}var v=n(9790);let y=(()=>{class t{constructor(t){this.modalController=t}ngOnInit(){}onShowLayersControl(){return d(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:v.K,cssClass:"my-custom-class"});return yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(o.IN))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-fab",0),u.TgZ(1,"ion-fab-button",1),u.NdJ("click",function(){return e.onShowLayersControl()}),u._UZ(2,"ion-icon",2),u.qZA(),u.qZA())},directives:[o.IJ,o.W4,o.gu],styles:[""]}),t})();var b=n(4689);let Z=(()=>{class t{constructor(t){this.modalController=t}ngOnInit(){}onShowGeoSearch(){return d(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:b.p,cssClass:"my-custom-class"});return yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(o.IN))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-map-geosearch"]],decls:2,vars:0,consts:[["size","small","color","light",3,"click"],["name","search"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-fab-button",0),u.NdJ("click",function(){return e.onShowGeoSearch()}),u._UZ(1,"ion-icon",1),u.qZA())},directives:[o.W4,o.gu],styles:[""]}),t})(),S=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-map-tools"]],decls:5,vars:0,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-fab",0),u.TgZ(1,"ion-fab-button",1),u._UZ(2,"ion-icon",2),u.qZA(),u.TgZ(3,"ion-fab-list"),u._UZ(4,"app-map-geosearch"),u.qZA(),u.qZA())},directives:[o.IJ,o.W4,o.gu,o.zq,Z],styles:[""]}),t})();function w(t,e){1&t&&u._UZ(0,"ion-spinner",4)}let k=(()=>{class t{constructor(t,e){this.mapService=t,this.mapStoreService=e,this.tracking$=this.mapStoreService.mapstate$.pipe(p("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe(p("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.S),u.Y36(m.C))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-fab",0),u.TgZ(1,"ion-fab-button",1),u.NdJ("click",function(){return e.onToggleGeolocate()}),u._UZ(2,"ion-icon",2),u.YNc(3,w,1,0,"ion-spinner",3),u.ALo(4,"async"),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("color",e.tracking?"danger":"primary"),u.xp6(2),u.Q6J("ngIf",u.lcZ(4,2,e.locating$)))},directives:[o.IJ,o.W4,o.gu,r.O5,o.PQ],pipes:[r.Ov],styles:[""]}),t})();const T=[{path:"",component:(()=>{class t{constructor(t,e,n,o,r){this.mapState=t,this.rounter=e,this.route=n,this.mapSerice=o,this.mapLayersService=r}ngOnInit(){this.route.queryParams.pipe((0,s.q)(1),(0,a.b)(t=>{const e=[Number(t.x),Number(t.y)],n=Number(t.zoom);e[0]&&setTimeout(()=>{this.mapSerice.setView({center:e,zoom:n})},2e3)})).subscribe();const t=this.mapState.mapstate$.pipe(p("view"),(0,l.U)(t=>({x:null==t?void 0:t.center[0],y:null==t?void 0:t.center[1],zoom:null==t?void 0:t.zoom})));this.mapLayersService.overlays$.pipe((0,s.q)(1),(0,l.U)(t=>t.map(t=>t.layers.filter(t=>t.addedToMap))),(0,a.b)(console.log)).subscribe(),t.pipe((0,a.b)(t=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:t})})).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(m.C),u.Y36(c.F0),u.Y36(c.gz),u.Y36(h.S),u.Y36(f.Y))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-tap-map"]],decls:5,vars:0,template:function(t,e){1&t&&(u.TgZ(0,"ion-content"),u._UZ(1,"app-map"),u._UZ(2,"app-map-layers-control"),u._UZ(3,"app-map-tools"),u._UZ(4,"app-map-geolocation"),u.qZA())},directives:[o.W2,g,y,S,k],styles:[""]}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[c.Bz.forChild(T)],c.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[o.Pc,r.ez,i.u5,z]]}),t})()}}]);