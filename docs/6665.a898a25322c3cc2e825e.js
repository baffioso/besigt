(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[6665],{6665:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapPageModule:()=>wr});var r=n(5401),o=n(6274),i=n(4988),s=n(993),c=n(1855),a=n(8561);function l(...e){const t=e.length;if(0===t)throw new Error("list of properties cannot be empty.");return n=>(0,a.U)(function(e,t){return n=>{let r=n;for(let o=0;o<t;o++){const t=null!=r?r[e[o]]:void 0;if(void 0===t)return;r=t}return r}}(e,t))(n)}var u=n(6286),f=n(9917),p=n(3606),d=n(6190);function h(e,t){if(1&e&&p._UZ(0,"img",5),2&e){const e=p.oxw();p.Q6J("src",e.feature.webView,p.LSH)}}let v=(()=>{class e{constructor(e,t){this.modalController=e,this.mapService=t}onCloseModal(){this.modalController.dismiss(),this.mapService.clearFeatureSelection()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(r.IN),p.Y36(d.S))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-feature-info-modal"]],inputs:{feature:"feature"},decls:5,vars:1,consts:[["fullscreen",""],["alt","Billede","class","image",3,"src",4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","close"],["alt","Billede",1,"image",3,"src"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-content",0),p.YNc(1,h,1,1,"img",1),p.TgZ(2,"ion-fab",2),p.TgZ(3,"ion-fab-button",3),p.NdJ("click",function(){return t.onCloseModal()}),p._UZ(4,"ion-icon",4),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("ngIf",t.feature.webView))},directives:[r.W2,o.O5,r.IJ,r.W4,r.gu],styles:[""]}),e})();var g=n(2329),m=n(1100);let y=(()=>{class e{constructor(e,t){this.mapService=e,this.projectStore=t,this.center=[1360103,7491908],this.zoom=13}ngAfterViewInit(){this.mapService.createMap(this.center,this.zoom),setTimeout(()=>{this.mapService.resize()},1e3),this.projectStore.currentProjectImageGeoJSON$.pipe((0,u.b)(e=>{try{this.mapService.removeProjectOverlays(),this.mapService.addGeoJSON(e,"EPSG:25832")}catch(t){console.log(t)}})).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(d.S),p.Y36(m.c))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map"]],decls:1,vars:0,consts:[["id","ol-map",1,"map-container"]],template:function(e,t){1&e&&p._UZ(0,"div",0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var b=n(477);function x(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"ion-item"),p.TgZ(1,"ion-label"),p._uU(2),p.qZA(),p.TgZ(3,"ion-toggle",11),p.NdJ("ionChange",function(t){const n=p.CHM(e).$implicit,r=p.oxw().$implicit;return p.oxw(2).onOverlayToggle(t,r,n)}),p.qZA(),p.qZA()}if(2&e){const e=t.$implicit;p.xp6(2),p.Oqu(e.label),p.xp6(1),p.Q6J("name",e.name)("checked",e.addedToMap)}}function S(e,t){if(1&e&&(p.TgZ(0,"ion-list"),p.TgZ(1,"ion-list-header",9),p.TgZ(2,"ion-label",10),p._uU(3),p.qZA(),p.qZA(),p.YNc(4,x,4,3,"ion-item",8),p.qZA()),2&e){const e=t.$implicit,n=p.oxw(2);p.xp6(3),p.hij(" ",e.name," "),p.xp6(1),p.Q6J("ngForOf",e.layers)("ngForTrackBy",n.trackItems)}}function w(e,t){if(1&e&&(p.ynx(0),p.YNc(1,S,5,3,"ion-list",8),p.ALo(2,"async"),p.BQk()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,2,e.overlays$))("ngForTrackBy",e.trackItems)}}function _(e,t){if(1&e&&(p.TgZ(0,"ion-item"),p.TgZ(1,"ion-label"),p._uU(2),p.qZA(),p._UZ(3,"ion-radio",14),p.qZA()),2&e){const e=t.$implicit;p.xp6(2),p.Oqu(e.name),p.xp6(1),p.Q6J("value",e.id)}}function k(e,t){if(1&e){const e=p.EpF();p.ynx(0),p.TgZ(1,"ion-list"),p.TgZ(2,"ion-radio-group",12),p.NdJ("ionChange",function(t){return p.CHM(e),p.oxw().onBaseLayerSelect(t)}),p.ALo(3,"async"),p.YNc(4,_,4,2,"ion-item",13),p.ALo(5,"async"),p.qZA(),p.qZA(),p.BQk()}if(2&e){const e=p.oxw();p.xp6(2),p.Q6J("value",p.lcZ(3,2,e.selectedBaseMap$)),p.xp6(2),p.Q6J("ngForOf",p.lcZ(5,4,e.baseMaps$))}}let O=(()=>{class e{constructor(e,t,n){this.modalController=e,this.mapLayersService=t,this.mapService=n,this.segment="overlays",this.overlays$=this.mapLayersService.overlays$,this.baseMaps$=this.mapLayersService.baseMaps$,this.selectedBaseMap$=this.mapLayersService.baseMaps$.pipe((0,a.U)(e=>e.find(e=>e.selected).id))}ngOnInit(){}onOverlayToggle(e,t,n){this.mapLayersService.updateOverlays(t.name,n.name,e.detail.checked),e.detail.checked?this.mapService.addLayer(t.url,n):this.mapService.removeLayer(n.name)}onBaseLayerSelect(e){this.mapLayersService.updateBaseLayerSelection(e.detail.value),this.mapService.changeBaseMap(e.detail.value)}dismiss(){this.modalController.dismiss()}trackItems(e,t){return t.name}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(r.IN),p.Y36(b.Y),p.Y36(d.S))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-layers-control-modal"]],decls:17,vars:3,consts:[["color","primary",1,"ion-text-center"],["color","secondary","mode","md",3,"ngModel","ngModelChange"],["value","overlays"],["value","baselayers"],[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","light"],["role","heading","aria-level","2"],["slot","end",3,"name","checked","ionChange"],[3,"value","ionChange"],[4,"ngFor","ngForOf"],["slot","start",3,"value"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar",0),p.TgZ(2,"ion-title"),p._uU(3,"Lag"),p.qZA(),p.qZA(),p.TgZ(4,"ion-segment",1),p.NdJ("ngModelChange",function(e){return t.segment=e}),p.TgZ(5,"ion-segment-button",2),p.TgZ(6,"ion-label"),p._uU(7,"Lag"),p.qZA(),p.qZA(),p.TgZ(8,"ion-segment-button",3),p.TgZ(9,"ion-label"),p._uU(10,"Baggrundskort"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(11,"ion-content"),p.YNc(12,w,3,4,"ng-container",4),p.YNc(13,k,6,6,"ng-container",4),p.qZA(),p.TgZ(14,"ion-fab",5),p.TgZ(15,"ion-fab-button",6),p.NdJ("click",function(){return t.dismiss()}),p._UZ(16,"ion-icon",7),p.qZA(),p.qZA()),2&e&&(p.xp6(4),p.Q6J("ngModel",t.segment),p.xp6(8),p.Q6J("ngIf","overlays"===t.segment),p.xp6(1),p.Q6J("ngIf","baselayers"===t.segment))},directives:[r.Gu,r.sr,r.wd,r.cJ,r.QI,i.JJ,i.On,r.GO,r.Q$,r.W2,o.O5,r.IJ,r.W4,r.gu,o.sg,r.q_,r.yh,r.Ie,r.ho,r.w,r.se,r.B7,r.U5],pipes:[o.Ov],styles:[""]}),e})(),A=(()=>{class e{constructor(e){this.modalController=e}ngOnInit(){}onShowLayersControl(){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:O,cssClass:"my-custom-class"});return yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(r.IN))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-fab",0),p.TgZ(1,"ion-fab-button",1),p.NdJ("click",function(){return t.onShowLayersControl()}),p._UZ(2,"ion-icon",2),p.qZA(),p.qZA())},directives:[r.IJ,r.W4,r.gu],styles:[""]}),e})();var C=n(361);function Z(e,t){return e(t={exports:{}},t.exports),t.exports}var T=Z(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),j=Z(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),I=function(e){return"object"==typeof e?null!==e:"function"==typeof e},q=function(e){if(!I(e))throw TypeError(e+" is not an object!");return e},L=function(e){try{return!!e()}catch(t){return!0}},P=!L(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),M=T.document,R=I(M)&&I(M.createElement),E=function(e){return R?M.createElement(e):{}},N=!P&&!L(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),$=Object.defineProperty,F={f:P?Object.defineProperty:function(e,t,n){if(q(e),t=function(e,t){if(!I(e))return e;var n,r;if("function"==typeof(n=e.toString)&&!I(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!I(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t),q(n),N)try{return $(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},J=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},U=P?function(e,t,n){return F.f(e,t,J(1,n))}:function(e,t,n){return e[t]=n,e},z={}.hasOwnProperty,Y=function(e,t){return z.call(e,t)},D=0,B=Math.random(),Q=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++D+B).toString(36))},G=Z(function(e){var t="__core-js_shared__",n=T[t]||(T[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:j.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),H=G("native-function-to-string",Function.toString),W=Z(function(e){var t=Q("src"),n="toString",r=(""+H).split(n);j.inspectSource=function(e){return H.call(e)},(e.exports=function(e,n,o,i){var s="function"==typeof o;s&&(Y(o,"name")||U(o,"name",n)),e[n]!==o&&(s&&(Y(o,t)||U(o,t,e[n]?""+e[n]:r.join(String(n)))),e===T?e[n]=o:i?e[n]?e[n]=o:U(e,n,o):(delete e[n],U(e,n,o)))})(Function.prototype,n,function(){return"function"==typeof this&&this[t]||H.call(this)})}),V=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},X=function(e,t,n){if(V(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},K=function(e,t,n){var r,o,i,s,c=e&K.F,a=e&K.G,l=e&K.P,u=e&K.B,f=a?T:e&K.S?T[t]||(T[t]={}):(T[t]||{}).prototype,p=a?j:j[t]||(j[t]={}),d=p.prototype||(p.prototype={});for(r in a&&(n=t),n)i=((o=!c&&f&&void 0!==f[r])?f:n)[r],s=u&&o?X(i,T):l&&"function"==typeof i?X(Function.call,i):i,f&&W(f,r,i,e&K.U),p[r]!=i&&U(p,r,s),l&&d[r]!=i&&(d[r]=i)};T.core=j,K.F=1,K.G=2,K.S=4,K.P=8,K.B=16,K.W=32,K.U=64,K.R=128;var ee=K,te={}.toString,ne=function(e){return te.call(e).slice(8,-1)},re=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==ne(e)?e.split(""):Object(e)},oe=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},ie=function(e){return re(oe(e))},se=Math.ceil,ce=Math.floor,ae=function(e){return isNaN(e=+e)?0:(e>0?ce:se)(e)},le=Math.min,ue=function(e){return e>0?le(ae(e),9007199254740991):0},fe=Math.max,pe=Math.min,de=G("keys"),he=function(e){return de[e]||(de[e]=Q(e))},ve=(!1,function(e,t,n){for(var r=ie(e),o=ue(r.length),i=function(e,t){return(e=ae(e))<0?fe(e+t,0):pe(e,t)}(n,o);o>i;i++)if(i in r&&r[i]===t)return i||0;return-1}),ge=he("IE_PROTO"),me="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ye=Object.keys||function(e){return function(e,t){var n,r=ie(e),o=0,i=[];for(n in r)n!=ge&&Y(r,n)&&i.push(n);for(;t.length>o;)Y(r,n=t[o++])&&(~ve(i,n)||i.push(n));return i}(e,me)},be={f:Object.getOwnPropertySymbols},xe={f:{}.propertyIsEnumerable},Se=function(e){return Object(oe(e))},we=Object.assign,_e=!we||L(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=we({},e)[n]||Object.keys(we({},t)).join("")!=r})?function(e,t){for(var n=Se(e),r=arguments.length,o=1,i=be.f,s=xe.f;r>o;)for(var c,a=re(arguments[o++]),l=i?ye(a).concat(i(a)):ye(a),u=l.length,f=0;u>f;)s.call(a,c=l[f++])&&(n[c]=a[c]);return n}:we;ee(ee.S+ee.F,"Object",{assign:_e});var ke,Oe,Ae=function(e,t){var n,r,o=String(oe(e)),i=ae(t),s=o.length;return i<0||i>=s?"":(n=o.charCodeAt(i))<55296||n>56319||i+1===s||(r=o.charCodeAt(i+1))<56320||r>57343?o.charAt(i):o.slice(i,i+2)},Ce=function(e,t,n){return t+(n?Ae(e,t).length:1)},Ze=Z(function(e){var t=G("wks"),n=T.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:Q)("Symbol."+e))}).store=t}),Te=Ze("toStringTag"),je="Arguments"==ne(function(){return arguments}()),Ie=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Te))?n:je?ne(t):"Object"==(r=ne(t))&&"function"==typeof t.callee?"Arguments":r},qe=RegExp.prototype.exec,Le=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Ie(e))throw new TypeError("RegExp#exec called on incompatible receiver");return qe.call(e,t)},Pe=function(){var e=q(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Me=RegExp.prototype.exec,Re=String.prototype.replace,Ee=Me,Ne=(Oe=/b*/g,Me.call(ke=/a/,"a"),Me.call(Oe,"a"),0!==ke.lastIndex||0!==Oe.lastIndex),$e=void 0!==/()??/.exec("")[1];(Ne||$e)&&(Ee=function(e){var t,n,r,o,i=this;return $e&&(n=new RegExp("^"+i.source+"$(?!\\s)",Pe.call(i))),Ne&&(t=i.lastIndex),r=Me.call(i,e),Ne&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),$e&&r&&r.length>1&&Re.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var Fe=Ee;ee({target:"RegExp",proto:!0,forced:Fe!==/./.exec},{exec:Fe});var Je=Ze("species"),Ue=!L(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),ze=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Ye=function(e,t,n){var r=Ze(e),o=!L(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),i=o?!L(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[Je]=function(){return n}),n[r](""),!t}):void 0;if(!o||!i||"replace"===e&&!Ue||"split"===e&&!ze){var s=/./[r],c=n(oe,r,""[e],function(e,t,n,r,i){return t.exec===Fe?o&&!i?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),a=c[1];W(String.prototype,e,c[0]),U(RegExp.prototype,r,2==t?function(e,t){return a.call(e,this,t)}:function(e){return a.call(e,this)})}},De=Math.max,Be=Math.min,Qe=Math.floor,Ge=/\$([$&`']|\d\d?|<[^>]*>)/g,He=/\$([$&`']|\d\d?)/g;Ye("replace",2,function(e,t,n,r){return[function(r,o){var i=e(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,i,o):n.call(String(i),r,o)},function(e,t){var i=r(n,e,this,t);if(i.done)return i.value;var s=q(e),c=String(this),a="function"==typeof t;a||(t=String(t));var l=s.global;if(l){var u=s.unicode;s.lastIndex=0}for(var f=[];;){var p=Le(s,c);if(null===p)break;if(f.push(p),!l)break;""===String(p[0])&&(s.lastIndex=Ce(c,ue(s.lastIndex),u))}for(var d,h="",v=0,g=0;g<f.length;g++){p=f[g];for(var m=String(p[0]),y=De(Be(ae(p.index),c.length),0),b=[],x=1;x<p.length;x++)b.push(void 0===(d=p[x])?d:String(d));var S=p.groups;if(a){var w=[m].concat(b,y,c);void 0!==S&&w.push(S);var _=String(t.apply(void 0,w))}else _=o(m,c,y,b,S,t);y>=v&&(h+=c.slice(v,y)+_,v=y+m.length)}return h+c.slice(v)}];function o(e,t,r,o,i,s){var c=r+e.length,a=o.length,l=He;return void 0!==i&&(i=Se(i),l=Ge),n.call(s,l,function(n,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":l=i[s.slice(1,-1)];break;default:var u=+s;if(0===u)return n;if(u>a){var f=Qe(u/10);return 0===f?n:f<=a?void 0===o[f-1]?s.charAt(1):o[f-1]+s.charAt(1):n}l=o[u-1]}return void 0===l?"":l})}});var We=Ze("match"),Ve=Ze("species"),Xe=function(e,t){var n,r=q(e).constructor;return void 0===r||null==(n=q(r)[Ve])?t:V(n)},Ke=Math.min,et=[].push,tt=4294967295,nt=!L(function(){});Ye("split",2,function(e,t,n,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var r,o,i=String(this);if(void 0===e&&0===t)return[];if(!I(r=e)||!(void 0!==(o=r[We])?o:"RegExp"==ne(r)))return n.call(i,e,t);for(var s,c,a,l=[],u=0,f=void 0===t?tt:t>>>0,p=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(s=Fe.call(p,i))&&!((c=p.lastIndex)>u&&(l.push(i.slice(u,s.index)),s.length>1&&s.index<i.length&&et.apply(l,s.slice(1)),a=s[0].length,u=c,l.length>=f));)p.lastIndex===s.index&&p.lastIndex++;return u===i.length?!a&&p.test("")||l.push(""):l.push(i.slice(u)),l.length>f?l.slice(0,f):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,i,r):o.call(String(i),n,r)},function(e,t){var i=r(o,e,this,t,o!==n);if(i.done)return i.value;var s=q(e),c=String(this),a=Xe(s,RegExp),l=s.unicode,u=new a(nt?s:"^(?:"+s.source+")",(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(nt?"y":"g")),f=void 0===t?tt:t>>>0;if(0===f)return[];if(0===c.length)return null===Le(u,c)?[c]:[];for(var p=0,d=0,h=[];d<c.length;){u.lastIndex=nt?d:0;var v,g=Le(u,nt?c:c.slice(d));if(null===g||(v=Ke(ue(u.lastIndex+(nt?0:d)),c.length))===p)d=Ce(c,d,l);else{if(h.push(c.slice(p,d)),h.length===f)return h;for(var m=1;m<=g.length-1;m++)if(h.push(g[m]),h.length===f)return h;d=p=v}}return h.push(c.slice(p)),h}]});var rt,ot=Z(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={default:"__default"},r=Object.prototype.hasOwnProperty;function o(){}function i(e,t){return r.call(e,t)}function s(){return new o}function c(e,t){for(;e.length>t;)e.pop()}function a(e,t,n){if(null==n)e.removeAttribute(t);else{var r=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0}(t);r?e.setAttributeNS(r,t,String(n)):e.setAttribute(t,String(n))}}function l(e,t,n){e[t]=n}function u(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n}o.prototype=Object.create(null);var f=s();function p(e,t,r){(f[t]||f[n.default])(e,t,r)}f[n.default]=function(e,t,n){var r=typeof n;"object"===r||"function"===r?l(e,t,n):a(e,t,n)},f.style=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var r=e.style;for(var o in n)i(n,o)&&u(r,o,n[o])}};var d={nodesCreated:null,nodesDeleted:null},h=function(){function e(){this.created=[],this.deleted=[]}return e.prototype.markCreated=function(e){this.created.push(e)},e.prototype.markDeleted=function(e){this.deleted.push(e)},e.prototype.notifyChanges=function(){d.nodesCreated&&this.created.length>0&&d.nodesCreated(this.created),d.nodesDeleted&&this.deleted.length>0&&d.nodesDeleted(this.deleted)},e}();function v(e){return 1===e.nodeType}var g=Node.prototype.getRootNode||function(){for(var e=this,t=e;e;)t=e,e=e.parentNode;return t},m=function(){function e(e,t,n){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=e,this.key=t,this.text=n}return e.prototype.hasEmptyAttrsArr=function(){var e=this._attrsArr;return!e||!e.length},e.prototype.getAttrsArr=function(e){return this._attrsArr||(this._attrsArr=new Array(e))},e}();function y(e,t,n,r){var o=new m(t,n,r);return e.__incrementalDOMData=o,o}function b(e,t){return x(e,t)}function x(e,t){if(e.__incrementalDOMData)return e.__incrementalDOMData;var n=v(e)?e.localName:e.nodeName,r=v(e)?e.getAttribute("key")||t:null,o=y(e,n,r,function(e){return 3===e.nodeType}(e)?e.data:void 0);return v(e)&&function(e,t){var n=e.attributes,r=n.length;if(r)for(var o=t.getAttrsArr(r),i=0,s=0;i<r;i+=1,s+=2){var c=n[i],a=c.value;o[s]=c.name,o[s+1]=a}}(e,o),o}var S=null,w=null,_=null,k=null,O=[],A=[];function C(){return A}function Z(e){return function(t,n,r){var o=S,i=k,s=O,c=A,a=w,l=_;S=new h,k=t.ownerDocument,A=[],O=function(e,t){var n=function(e){var t=g.call(e);return function(e){return 11===e.nodeType||9===e.nodeType}(t)?t.activeElement:null}(e);return n&&e.contains(n)?function(e,t){for(var n=[],r=e;r!==t;){var o=r;n.push(o),r=o.parentNode}return n}(n,t):[]}(t,_=t.parentNode);try{return e(t,n,r)}finally{k=i,A=c,w=a,_=l,O=s,S.notifyChanges(),S=o}}}var T=Z(function(e,t,n){return w=e,P(),t(n),E(),e}),j=Z(function(e,t,n){var r={nextSibling:e};return w=r,t(n),_&&L(_,M(),e.nextSibling),r===w?null:w});function I(e,t,n){var r=b(e,n);return t==r.nameOrCtor&&n==r.key}function q(e,t){var n=function(e,t,n){if(!e)return null;if(I(e,t,n))return e;if(n)for(;e=e.nextSibling;)if(I(e,t,n))return e;return null}(w,e,t)||function(e,t){var n;return n="#text"===e?function(e){var t=e.createTextNode("");return y(t,"#text",null),t}(k):function(e,t,n,r){var o;if("function"==typeof n)o=new n;else{var i=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/Math/MathML":null==t||"foreignObject"===b(t).nameOrCtor?null:t.namespaceURI}(n,t);o=i?e.createElementNS(i,n):e.createElement(n)}return y(o,n,r),o}(k,_,e,t),S.markCreated(n),n}(e,t);n!==w&&(O.indexOf(n)>=0?function(e,t,n){for(var r=t.nextSibling,o=n;null!==o&&o!==t;){var i=o.nextSibling;e.insertBefore(o,r),o=i}}(_,n,w):_.insertBefore(n,w),w=n)}function L(e,t,n){for(var r=e,o=t;o!==n;){var i=o.nextSibling;r.removeChild(o),S.markDeleted(o),o=i}}function P(){_=w,w=null}function M(){return w?w.nextSibling:_.firstChild}function R(){w=M()}function E(){L(_,M(),null),w=_,_=_.parentNode}function N(e,t){return R(),q(e,t),P(),_}function $(){return E(),w}function F(){return R(),q("#text",null),w}var J=s();function U(e,t,n){if(t.staticsApplied=!0,n&&n.length)if(t.hasEmptyAttrsArr())for(var r=0;r<n.length;r+=2)p(e,n[r],n[r+1]);else{for(r=0;r<n.length;r+=2)J[n[r]]=r+1;var o=t.getAttrsArr(0),i=0;for(r=0;r<o.length;r+=2){var s=o[r+1],a=J[l=o[r]];a?n[a]===s&&delete J[l]:(o[i]=l,o[i+1]=s,i+=2)}for(var l in c(o,i),J)p(e,l,n[J[l]]),delete J[l]}}function z(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=N(e,t),s=b(i);s.staticsApplied||U(i,s,n);var a=Math.max(0,arguments.length-3),l=s.hasEmptyAttrsArr();if(!a&&l)return i;for(var u=s.getAttrsArr(a),f=3,d=0;f<arguments.length;f+=2,d+=2){var h=arguments[f];if(l)u[d]=h;else if(u[d]!==h)break;var v=arguments[f+1];(l||u[d+1]!==v)&&(u[d+1]=v,p(i,h,v))}if(f<arguments.length||d<u.length){for(var g=d;d<u.length;d+=2)J[u[d]]=u[d+1];for(d=g;f<arguments.length;f+=2,d+=2)J[h=arguments[f]]!==(v=arguments[f+1])&&p(i,h,v),u[d]=h,u[d+1]=v,delete J[h];for(var h in c(u,d),J)p(i,h,void 0),delete J[h]}return i}function Y(e){return $()}t.applyAttr=a,t.applyProp=l,t.attributes=f,t.close=$,t.currentElement=function(){return _},t.currentPointer=function(){return M()},t.open=N,t.patch=T,t.patchInner=T,t.patchOuter=j,t.skip=function(){w=_.lastChild},t.skipNode=R,t.getKey=function(e){return b(e).key},t.clearCache=function e(t){t.__incrementalDOMData=null;for(var n=t.firstChild;n;n=n.nextSibling)e(n)},t.importNode=function e(t){x(t);for(var n=t.firstChild;n;n=n.nextSibling)e(n)},t.isDataInitialized=function(e){return Boolean(e.__incrementalDOMData)},t.notifications=d,t.symbols=n,t.attr=function(e,t){var n=C();n.push(e),n.push(t)},t.elementClose=Y,t.elementOpen=z,t.elementOpenEnd=function(){var e=C(),t=z.apply(null,e);return c(e,0),t},t.elementOpenStart=function(e,t,n){var r=C();r[0]=e,r[1]=t,r[2]=n},t.elementVoid=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return z.apply(null,arguments),Y()},t.text=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=F(),o=b(r);if(o.text!==e){o.text=e;for(var i=e,s=1;s<arguments.length;s+=1){var c=arguments[s];i=c(i)}r.data=i}return r},t.key=function(e){C()[1]=e}});(rt=ot)&&rt.__esModule&&Object.prototype.hasOwnProperty.call(rt,"default");var it=ot.applyProp,st=ot.attributes,ct=ot.patch,at=ot.elementClose,lt=ot.elementOpen,ut=ot.elementVoid,ft=ot.text;st.caretpos=function(e,t,n){e.setSelectionRange(n,n)},st.value=it;var pt=function(e,t,n,r){ct(e,function(){!function(e,t,n){if(e.suggestions.length>0&&e.focused){lt("ul","",["class","dawa-autocomplete-suggestions","role","listbox","unselectable","on"]);for(var r=function(r){var o=e.suggestions[r],i="dawa-autocomplete-suggestion";e.selected===r&&(i+=" dawa-selected"),lt("li","",["role","option"],"class",i,"onmousedown",function(e){t(r),e.preventDefault()});var s=o.forslagstekst.split("\n");if(s=s.map(function(e){return e.replace(/ /g,"\xa0")}),n){ft(s[0]);for(var c=1;c<s.length;++c)ut("br"),ft(s[c])}else ft(s.join(", "));at("li")},o=0;o<e.suggestions.length;++o)r(o);at("ul")}}(t,n,r)})};var dt,ht,vt,gt=function(e,t,n,r){try{return r?t(q(n)[0],n[1]):t(n)}catch(i){var o=e.return;throw void 0!==o&&q(o.call(e)),i}},mt={},yt=Ze("iterator"),bt=Array.prototype,xt=function(e){return void 0!==e&&(mt.Array===e||bt[yt]===e)},St=Ze("iterator"),wt=j.getIteratorMethod=function(e){if(null!=e)return e[St]||e["@@iterator"]||mt[Ie(e)]},_t=Z(function(e){var t={},n={},r=e.exports=function(e,r,o,i,s){var c,a,l,u,f=s?function(){return e}:wt(e),p=X(o,i,r?2:1),d=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(xt(f)){for(c=ue(e.length);c>d;d++)if((u=r?p(q(a=e[d])[0],a[1]):p(e[d]))===t||u===n)return u}else for(l=f.call(e);!(a=l.next()).done;)if((u=gt(l,p,a.value,r))===t||u===n)return u};r.BREAK=t,r.RETURN=n}),kt=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},Ot=T.document,At=Ot&&Ot.documentElement,Ct=T.process,Zt=T.setImmediate,Tt=T.clearImmediate,jt=T.MessageChannel,It=T.Dispatch,qt=0,Lt={},Pt=function(){var e=+this;if(Lt.hasOwnProperty(e)){var t=Lt[e];delete Lt[e],t()}},Mt=function(e){Pt.call(e.data)};Zt&&Tt||(Zt=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Lt[++qt]=function(){kt("function"==typeof e?e:Function(e),t)},dt(qt),qt},Tt=function(e){delete Lt[e]},"process"==ne(Ct)?dt=function(e){Ct.nextTick(X(Pt,e,1))}:It&&It.now?dt=function(e){It.now(X(Pt,e,1))}:jt?(vt=(ht=new jt).port2,ht.port1.onmessage=Mt,dt=X(vt.postMessage,vt,1)):T.addEventListener&&"function"==typeof postMessage&&!T.importScripts?(dt=function(e){T.postMessage(e+"","*")},T.addEventListener("message",Mt,!1)):dt="onreadystatechange"in E("script")?function(e){At.appendChild(E("script")).onreadystatechange=function(){At.removeChild(this),Pt.call(e)}}:function(e){setTimeout(X(Pt,e,1),0)});var Rt={set:Zt,clear:Tt},Et=Rt.set,Nt=T.MutationObserver||T.WebKitMutationObserver,$t=T.process,Ft=T.Promise,Jt="process"==ne($t);function Ut(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=V(t),this.reject=V(n)}var zt={f:function(e){return new Ut(e)}},Yt=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}},Dt=T.navigator,Bt=Dt&&Dt.userAgent||"",Qt=F.f,Gt=Ze("toStringTag"),Ht=function(e,t,n){e&&!Y(e=n?e:e.prototype,Gt)&&Qt(e,Gt,{configurable:!0,value:t})},Wt=Ze("species"),Vt=Ze("iterator"),Xt=!1;try{[7][Vt]().return=function(){Xt=!0}}catch(_r){}var Kt,en,tn,nn,rn,on=Rt.set,sn=function(){var e,t,n,r=function(){var r,o;for(Jt&&(r=$t.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(_r){throw e?n():t=void 0,_r}}t=void 0,r&&r.enter()};if(Jt)n=function(){$t.nextTick(r)};else if(!Nt||T.navigator&&T.navigator.standalone)if(Ft&&Ft.resolve){var o=Ft.resolve(void 0);n=function(){o.then(r)}}else n=function(){Et.call(T,r)};else{var i=!0,s=document.createTextNode("");new Nt(r).observe(s,{characterData:!0}),n=function(){s.data=i=!i}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}(),cn="Promise",an=T.TypeError,ln=T.process,un=ln&&ln.versions,fn=un&&un.v8||"",pn=T.Promise,dn="process"==Ie(ln),hn=function(){},vn=en=zt.f,gn=!!function(){try{var e=pn.resolve(1),t=(e.constructor={})[Ze("species")]=function(e){e(hn,hn)};return(dn||"function"==typeof PromiseRejectionEvent)&&e.then(hn)instanceof t&&0!==fn.indexOf("6.6")&&-1===Bt.indexOf("Chrome/66")}catch(_r){}}(),mn=function(e){var t;return!(!I(e)||"function"!=typeof(t=e.then))&&t},yn=function(e,t){if(!e._n){e._n=!0;var n=e._c;sn(function(){for(var r=e._v,o=1==e._s,i=0,s=function(t){var n,i,s,c=o?t.ok:t.fail,a=t.resolve,l=t.reject,u=t.domain;try{c?(o||(2==e._h&&Sn(e),e._h=1),!0===c?n=r:(u&&u.enter(),n=c(r),u&&(u.exit(),s=!0)),n===t.promise?l(an("Promise-chain cycle")):(i=mn(n))?i.call(n,a,l):a(n)):l(r)}catch(_r){u&&!s&&u.exit(),l(_r)}};n.length>i;)s(n[i++]);e._c=[],e._n=!1,t&&!e._h&&bn(e)})}},bn=function(e){on.call(T,function(){var t,n,r,o=e._v,i=xn(e);if(i&&(t=Yt(function(){dn?ln.emit("unhandledRejection",o,e):(n=T.onunhandledrejection)?n({promise:e,reason:o}):(r=T.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=dn||xn(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},xn=function(e){return 1!==e._h&&0===(e._a||e._c).length},Sn=function(e){on.call(T,function(){var t;dn?ln.emit("rejectionHandled",e):(t=T.onrejectionhandled)&&t({promise:e,reason:e._v})})},wn=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),yn(t,!0))},_n=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw an("Promise can't be resolved itself");(t=mn(e))?sn(function(){var r={_w:n,_d:!1};try{t.call(e,X(_n,r,1),X(wn,r,1))}catch(_r){wn.call(r,_r)}}):(n._v=e,n._s=1,yn(n,!1))}catch(_r){wn.call({_w:n,_d:!1},_r)}}};gn||(pn=function(e){!function(e,t,n,r){if(!(e instanceof t)||"_h"in e)throw TypeError("Promise: incorrect invocation!")}(this,pn),V(e),Kt.call(this);try{e(X(_n,this,1),X(wn,this,1))}catch(t){wn.call(this,t)}},(Kt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var r in t)W(e,r,t[r],void 0);return e}(pn.prototype,{then:function(e,t){var n=vn(Xe(this,pn));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=dn?ln.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&yn(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),tn=function(){var e=new Kt;this.promise=e,this.resolve=X(_n,e,1),this.reject=X(wn,e,1)},zt.f=vn=function(e){return e===pn||e===nn?new tn(e):en(e)}),ee(ee.G+ee.W+ee.F*!gn,{Promise:pn}),Ht(pn,cn),rn=T.Promise,P&&rn&&!rn[Wt]&&F.f(rn,Wt,{configurable:!0,get:function(){return this}}),nn=j.Promise,ee(ee.S+ee.F*!gn,cn,{reject:function(e){var t=vn(this);return(0,t.reject)(e),t.promise}}),ee(ee.S+ee.F*!gn,cn,{resolve:function(e){return function(e,t){if(q(e),I(t)&&t.constructor===e)return t;var n=zt.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),ee(ee.S+ee.F*!(gn&&function(e,t){if(!Xt)return!1;var n=!1;try{var r=[7],o=r[Vt]();o.next=function(){return{done:n=!0}},r[Vt]=function(){return o},function(e){pn.all(e).catch(hn)}(r)}catch(_r){}return n}()),cn,{all:function(e){var t=this,n=vn(t),r=n.resolve,o=n.reject,i=Yt(function(){var n=[],i=0,s=1;_t(e,!1,function(e){var c=i++,a=!1;n.push(void 0),s++,t.resolve(e).then(function(e){a||(a=!0,n[c]=e,--s||r(n))},o)}),--s||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=vn(t),r=n.reject,o=Yt(function(){_t(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}});var kn=Ze("unscopables"),On=Array.prototype;null==On[kn]&&U(On,kn,{});var An=function(e){On[kn][e]=!0},Cn=function(e,t){return{value:t,done:!!e}},Zn=P?Object.defineProperties:function(e,t){q(e);for(var n,r=ye(t),o=r.length,i=0;o>i;)F.f(e,n=r[i++],t[n]);return e},Tn=he("IE_PROTO"),jn=function(){},In=function(){var e,t=E("iframe"),n=me.length;for(t.style.display="none",At.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),In=e.F;n--;)delete In.prototype[me[n]];return In()},qn=Object.create||function(e,t){var n;return null!==e?(jn.prototype=q(e),n=new jn,jn.prototype=null,n[Tn]=e):n=In(),void 0===t?n:Zn(n,t)},Ln={};U(Ln,Ze("iterator"),function(){return this});var Pn=function(e,t,n){e.prototype=qn(Ln,{next:J(1,n)}),Ht(e,t+" Iterator")},Mn=he("IE_PROTO"),Rn=Object.prototype,En=Object.getPrototypeOf||function(e){return e=Se(e),Y(e,Mn)?e[Mn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Rn:null},Nn=Ze("iterator"),$n=!([].keys&&"next"in[].keys()),Fn="keys",Jn="values",Un=function(){return this},zn=function(e,t,n,r,o,i,s){Pn(n,t,function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Cn(1)):Cn(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])});var c,a,l,u=function(e){if(!$n&&e in d)return d[e];switch(e){case Fn:case Jn:return function(){return new n(this,e)}}return function(){return new n(this,e)}},f="Array Iterator",p=!1,d=e.prototype,h=d[Nn]||d["@@iterator"]||d.values,v=h||u("values"),g=u("entries"),m=d.entries||h;if(m&&(l=En(m.call(new e)))!==Object.prototype&&l.next&&(Ht(l,f,!0),"function"!=typeof l[Nn]&&U(l,Nn,Un)),h&&h.name!==Jn&&(p=!0,v=function(){return h.call(this)}),($n||p||!d[Nn])&&U(d,Nn,v),mt.Array=v,mt[f]=Un,void(c={values:v,keys:u(Fn),entries:g}))for(a in c)a in d||W(d,a,c[a]);else ee(ee.P+ee.F*($n||p),t,c);return c}(Array,"Array",function(e,t){this._t=ie(e),this._i=0,this._k=t});mt.Arguments=mt.Array,An("keys"),An("values"),An("entries");for(var Yn=Ze("iterator"),Dn=Ze("toStringTag"),Bn=mt.Array,Qn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Gn=ye(Qn),Hn=0;Hn<Gn.length;Hn++){var Wn,Vn=Gn[Hn],Xn=Qn[Vn],Kn=T[Vn],er=Kn&&Kn.prototype;if(er&&(er[Yn]||U(er,Yn,Bn),er[Dn]||U(er,Dn,Vn),mt[Vn]=Bn,Xn))for(Wn in zn)er[Wn]||W(er,Wn,zn[Wn],!0)}var tr,nr,rr={};rr[Ze("toStringTag")]="z",rr+""!="[object z]"&&W(Object.prototype,"toString",function(){return"[object "+Ie(this)+"]"},!0),tr=(j.Object||{}).keys||Object.keys,nr={keys:function(e){return ye(Se(e))}},ee(ee.S+ee.F*L(function(){tr(1)}),"Object",nr);var or={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(e,t){return(n="".concat(e,"?").concat(function(e){return Object.keys(e).map(function(t){var n=e[t];return"".concat(t,"=").concat(encodeURIComponent(n))}).join("&")}(t)),r={mode:"cors"},r=r||{},new Promise(function(e,t){var o=new XMLHttpRequest,i=[],s=[],c={},a=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:a,headers:{keys:function(){return i},entries:function(){return s},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}};for(var l in o.open(r.method||"get",n,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),s.push([t,n]),c[t]=c[t]?c[t]+","+n:n}),e(a())},o.onerror=t,o.withCredentials="include"==r.credentials,r.headers)o.setRequestHeader(l,r.headers[l]);o.send(r.body||null)})).then(function(e){return e.json()});var n,r}},ir=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({},or,t||{}),this.options=t,this.state={currentRequest:null,pendingRequest:null},this.selected=null}var t;return(t=[{key:"_getAutocompleteResponse",value:function(e,t,n,r,o,i){var s=Object.assign({},this.options.params,{q:e,type:this.options.type,caretpos:t,supplerendebynavn:o,stormodtagerpostnumre:i,multilinje:!0});return this.options.fuzzy&&(s.fuzzy=""),r&&(s.adgangsadresseid=r),n&&(s.startfra="adgangsadresse"),this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),s)}},{key:"_scheduleRequest",value:function(e){null!==this.state.currentRequest?this.state.pendingRequest=e:(this.state.currentRequest=e,this._executeRequest())}},{key:"_executeRequest",value:function(){var e,t,n=this,r=this.state.currentRequest,o=null,i=!1;if(r.selected){var s=r.selected;if(s.type===this.options.type)return this.options.selectCallback(s),this.selected=s,void this._requestCompleted();o="adgangsadresse"===s.type?s.data.id:null,i="vejnavn"===s.type,e=s.tekst,t=s.caretpos}else e=r.text,t=r.caretpos;if(r.selectedId){var c={id:r.selectedId,type:this.options.type};return this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),c).then(function(e){return n._handleResponse(r,e)},function(e){return n._handleFailedRequest(r,e)})}r.selected||r.text.length>=this.options.minLength?this._getAutocompleteResponse(e,t,i,o,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(e){return n._handleResponse(r,e)},function(e){return n._handleFailedRequest(r,e)}):this._handleResponse(r,[])}},{key:"_handleFailedRequest",value:function(e,t){var n,r=this;return console.error("DAWA request failed",t),(n=this.options.retryDelay,new Promise(function(e){return setTimeout(e,n)})).then(function(){r.state.pendingRequest||r._scheduleRequest(e),r._requestCompleted()})}},{key:"_handleResponse",value:function(e,t){if(e.selected)if(1===t.length){var n=t[0];n.type===this.options.type?this.options.selectCallback(n):this.state.pendingRequest||(this.state.pendingRequest={selected:n})}else this.options.renderCallback&&this.options.renderCallback(t);else e.selectedId?1===t.length&&(this.selected=t[0],this.options.initialRenderCallback(t[0].tekst)):this.options.renderCallback&&this.options.renderCallback(t);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(e){this.options.renderCallback=e}},{key:"setInitialRenderCallback",value:function(e){this.options.initialRenderCallback=e}},{key:"setSelectCallback",value:function(e){this.options.selectCallback=e}},{key:"update",value:function(e,t){this._scheduleRequest({text:e,caretpos:t})}},{key:"select",value:function(e){this._scheduleRequest({selected:e})}},{key:"selectInitial",value:function(e){this._scheduleRequest({selectedId:e})}},{key:"destroy",value:function(){}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();const sr=["input"];let cr=(()=>{class e{constructor(e,t){this.modalController=e,this.mapService=t}ngAfterViewInit(){!function(e,t){t=Object.assign({select:function(){return null}},t);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn","type"].reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});n.type||(n.type=t.adgangsadresserOnly?"adgangsadresse":"adresse");var r=new ir(n),o=function(e,t){var n=t.onSelect,r=t.onTextChange,o=t.render||pt,i=!1,s="",c=0,a=document.createElement("div");e.parentNode.insertBefore(a,e.nextSibling);var l,u={caretpos:2,inputText:"",selected:0,focused:document.activeElement===e,suggestions:[]},f=function(e){var t=e.value,n=e.selectionStart;u.caretpos=n,u.inputText=t,function(e,t){s===e&&c===t||(r(e,t),s=e,c=t)}(t,n)},p=function(e){var t=u.suggestions[e];u.inputText=t.tekst,u.caretpos=t.caretpos,u.suggestions=[],n(t),l(!0)},d=function(e){var t=window.event?e.keyCode:e.which;if(u.suggestions.length>0&&u.focused){if(40===t)u.selected=(u.selected+1)%u.suggestions.length,l();else if(38===t)u.selected=(u.selected-1+u.suggestions.length)%u.suggestions.length,l();else{if(13!==t&&9!==t)return!0;p(u.selected)}return e.preventDefault(),!1}},h=function(){u.focused=!0,l()},v=function(){return u.focused=!1,l(),!1},g=function(e){f(e.target)},m=function(e){return f(e.target)},y=!1,b=!1;return(l=function(n){n&&(b=!0),y||(y=!0,requestAnimationFrame(function(){i||(y=!1,b&&(e.value=u.inputText,e.setSelectionRange(u.caretpos,u.caretpos)),b=!1,o(a,u,function(e){return p(e)},t.multiline))}))})(),e.addEventListener("keydown",d),e.addEventListener("blur",v),e.addEventListener("focus",h),e.addEventListener("input",g),e.addEventListener("mouseup",m),e.setAttribute("aria-autocomplete","list"),e.setAttribute("autocomplete","off"),{destroy:function(){i=!0,e.removeEventListener("keydown",d),e.removeEventListener("blur",v),e.removeEventListener("focus",h),e.removeEventListener("input",g),e.removeEventListener("mouseup",m),ct(a,function(){}),a.remove()},setSuggestions:function(e){u.suggestions=e,u.selected=0,l()},selectAndClose:function(e){u.inputText=e,u.caretpos=e.length,u.suggestions=[],u.selected=0,l(!0)}}}(e,{onSelect:function(e){r.select(e)},onTextChange:function(e,t){r.update(e,t)},render:t.render,multiline:t.multiline||!1});r.setRenderCallback(function(e){return o.setSuggestions(e)}),r.setSelectCallback(function(e){o.selectAndClose(e.tekst),t.select(e)}),r.setInitialRenderCallback(function(e){return o.selectAndClose(e)}),t.id&&r.selectInitial(t.id)}(this.input.nativeElement,{select:e=>{const t=[e.data.x,e.data.y];this.mapService.removeLayer("geosearch"),this.mapService.addMarker(t),this.mapService.flyTo(t),this.modalController.dismiss()},adgangsadresserOnly:!0}),setTimeout(()=>{this.input.nativeElement.focus()},500)}dismiss(){this.modalController.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(r.IN),p.Y36(d.S))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-geosearch-modal"]],viewQuery:function(e,t){if(1&e&&p.Gf(sr,5),2&e){let e;p.iGM(e=p.CRH())&&(t.input=e.first)}},decls:7,vars:0,consts:[[1,"autocomplete-container"],["placeholder","S\xf8g adresse","type","search","id","dawa-autocomplete-input"],["input",""],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-content"),p.TgZ(1,"div",0),p._UZ(2,"input",1,2),p.qZA(),p.qZA(),p.TgZ(4,"ion-fab",3),p.TgZ(5,"ion-fab-button",4),p.NdJ("click",function(){return t.dismiss()}),p._UZ(6,"ion-icon",5),p.qZA(),p.qZA())},directives:[r.W2,r.IJ,r.W4,r.gu],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:30em;padding:10px;margin:auto}.autocomplete-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border-radius:5px;border:.01px solid var(--ion-color-medium)}"]}),e})(),ar=(()=>{class e{constructor(e){this.modalController=e}ngOnInit(){}onShowGeoSearch(){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:cr,cssClass:"my-custom-class"});return yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(r.IN))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-geosearch"]],decls:2,vars:0,consts:[["size","small","color","light",3,"click"],["name","search"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-fab-button",0),p.NdJ("click",function(){return t.onShowGeoSearch()}),p._UZ(1,"ion-icon",1),p.qZA())},directives:[r.W4,r.gu],styles:[""]}),e})();function lr(e,t){if(1&e){const e=p.EpF();p.ynx(0),p.TgZ(1,"ion-fab-button",6),p.NdJ("click",function(){return p.CHM(e),p.oxw().onAddPhoto()}),p._UZ(2,"ion-icon",7),p.qZA(),p.BQk()}}const ur=function(){return["/project-create"]};let fr=(()=>{class e{constructor(e,t){this.projectStore=e,this.geolocationService=t,this.currentProject$=this.projectStore.currentProject$}ngOnInit(){}onAddPhoto(){this.projectStore.addPhoto()}startTracking(){this.geolocationService.startTracking(),this.geolocationService.trackingPositions$.subscribe(console.log)}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(m.c),p.Y36(C._))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-tools"]],decls:9,vars:5,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"],[4,"ngIf"],["size","small","color","light",3,"routerLink"],["name","bookmark"],["color","light",3,"click"],["name","camera"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-fab",0),p.TgZ(1,"ion-fab-button",1),p._UZ(2,"ion-icon",2),p.qZA(),p.TgZ(3,"ion-fab-list"),p._UZ(4,"app-map-geosearch"),p.YNc(5,lr,3,0,"ng-container",3),p.ALo(6,"async"),p.TgZ(7,"ion-fab-button",4),p._UZ(8,"ion-icon",5),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(5),p.Q6J("ngIf",null!==p.lcZ(6,2,t.currentProject$)),p.xp6(2),p.Q6J("routerLink",p.DdM(4,ur)))},directives:[r.IJ,r.W4,r.gu,r.zq,ar,o.O5,r.YI,s.rH],pipes:[o.Ov],styles:[""]}),e})();function pr(e,t){1&e&&p._UZ(0,"img",1),2&e&&p.Q6J("src",t.$implicit,p.LSH)}let dr=(()=>{class e{constructor(e){this.mapLayersService=e,this.legends$=this.mapLayersService.legends$}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(b.Y))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-legend-popover"]],decls:2,vars:3,consts:[[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(e,t){1&e&&(p.YNc(0,pr,1,1,"img",0),p.ALo(1,"async")),2&e&&p.Q6J("ngForOf",p.lcZ(1,1,t.legends$))},directives:[o.sg],pipes:[o.Ov],styles:["img[_ngcontent-%COMP%]{display:block;padding:10px}"]}),e})();function hr(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"ion-fab",1),p.TgZ(1,"ion-fab-button",2),p.NdJ("click",function(t){return p.CHM(e),p.oxw().onShowPopover(t)}),p._UZ(2,"ion-icon",3),p.qZA(),p.qZA()}}let vr=(()=>{class e{constructor(e,t){this.popoverController=e,this.mapLayersService=t,this.showLegend$=this.mapLayersService.legends$.pipe((0,a.U)(e=>0!==e.length))}onShowPopover(e){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.popoverController.create({component:dr,cssClass:"legend-popover",translucent:!0,showBackdrop:!1,animated:!1,event:e});yield t.present()})}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(r.Dh),p.Y36(b.Y))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-legend-fab"]],decls:2,vars:3,consts:[["horizontal","start","vertical","bottom","slot","fixed",4,"ngIf"],["horizontal","start","vertical","bottom","slot","fixed"],[3,"click"],["name","list-outline"]],template:function(e,t){1&e&&(p.YNc(0,hr,3,0,"ion-fab",0),p.ALo(1,"async")),2&e&&p.Q6J("ngIf",p.lcZ(1,1,t.showLegend$))},directives:[o.O5,r.IJ,r.W4,r.gu],pipes:[o.Ov],styles:[""]}),e})();function gr(e,t){1&e&&p._UZ(0,"ion-spinner",4)}let mr=(()=>{class e{constructor(e,t){this.mapService=e,this.mapStoreService=t,this.tracking$=this.mapStoreService.mapstate$.pipe(l("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe(l("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(d.S),p.Y36(g.C))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-fab",0),p.TgZ(1,"ion-fab-button",1),p.NdJ("click",function(){return t.onToggleGeolocate()}),p._UZ(2,"ion-icon",2),p.YNc(3,gr,1,0,"ion-spinner",3),p.ALo(4,"async"),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("color",t.tracking?"danger":"primary"),p.xp6(2),p.Q6J("ngIf",p.lcZ(4,2,t.locating$)))},directives:[r.IJ,r.W4,r.gu,o.O5,r.PQ],pipes:[o.Ov],styles:[""]}),e})();function yr(e,t){1&e&&p._UZ(0,"ion-progress-bar",2)}function br(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",3),p.TgZ(1,"ion-chip",4),p.TgZ(2,"ion-label"),p._uU(3),p.ALo(4,"async"),p.qZA(),p.TgZ(5,"ion-icon",5),p.NdJ("click",function(){return p.CHM(e),p.oxw().onClearProject()}),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();let t;p.xp6(3),p.Oqu(null==(t=p.lcZ(4,1,e.currentProject$))?null:t.name)}}const xr=[{path:"",component:(()=>{class e{constructor(e,t,n,r,o,i){this.rounter=e,this.route=t,this.mapStore=n,this.projectStore=r,this.mapService=o,this.modalController=i,this.loading$=this.mapStore.mapstate$.pipe(l("loadingFeatureInfo")),this.currentProject$=this.projectStore.currentProject$}ngOnInit(){this.mapStore.mapstate$.pipe(l("loadingFeatureInfo"),(0,u.b)(console.log)).subscribe(),this.route.queryParams.pipe((0,f.q)(1),(0,u.b)(e=>{const t=[Number(e.x),Number(e.y)],n=Number(e.zoom);t[0]&&setTimeout(()=>{this.mapService.setView({center:t,zoom:n})},3e3)})).subscribe(),this.mapStore.mapstate$.pipe(l("view"),(0,a.U)(e=>({x:null==e?void 0:e.center[0],y:null==e?void 0:e.center[1],zoom:null==e?void 0:e.zoom}))).pipe((0,u.b)(e=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:e})})).subscribe(),this.mapStore.selectedFeature$.pipe((0,u.b)(e=>{this.showFeatureInfo(e),this.mapStore.updateMapState("loadingFeatureInfo",!1)})).subscribe()}showFeatureInfo(e){return(0,c.mG)(this,void 0,void 0,function*(){(yield this.modalController.create({component:v,componentProps:{feature:e}})).present()})}onClearProject(){this.projectStore.clearCurrentProject()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(s.F0),p.Y36(s.gz),p.Y36(g.C),p.Y36(m.c),p.Y36(d.S),p.Y36(r.IN))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-tap-map"]],decls:10,vars:6,consts:[["type","indeterminate","color","tertiary",4,"ngIf"],["class","current-project",4,"ngIf"],["type","indeterminate","color","tertiary"],[1,"current-project"],["color","primary","outline","",1,"project-chip"],["name","close-circle",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-content"),p.YNc(1,yr,1,0,"ion-progress-bar",0),p.ALo(2,"async"),p._UZ(3,"app-map"),p.YNc(4,br,6,3,"div",1),p.ALo(5,"async"),p._UZ(6,"app-map-layers-control"),p._UZ(7,"app-map-tools"),p._UZ(8,"app-map-legend-fab"),p._UZ(9,"app-map-geolocation"),p.qZA()),2&e&&(p.xp6(1),p.Q6J("ngIf",p.lcZ(2,2,t.loading$)),p.xp6(3),p.Q6J("ngIf",null!==p.lcZ(5,4,t.currentProject$)))},directives:[r.W2,o.O5,y,A,fr,vr,mr,r.X7,r.hM,r.Q$,r.gu],pipes:[o.Ov],styles:[".current-project[_ngcontent-%COMP%]{position:fixed;z-index:100;top:10px;width:100%;text-align:center}.project-chip[_ngcontent-%COMP%]{background:#fff6}ion-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;z-index:100}"]}),e})()}];let Sr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[s.Bz.forChild(xr)],s.Bz]}),e})(),wr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[r.Pc,o.ez,i.u5,Sr]]}),e})()}}]);