(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[7914],{7914:(i,t,e)=>{"use strict";e.r(t),e.d(t,{LoginPageModule:()=>g});var n=e(6274),o=e(4988),r=e(4683),s=e(4337),a=e(1855),l=e(7272),d=e(7681),c=e(9450);const u=[{path:"",component:(()=>{class i{constructor(i,t,e,n,o){this.supabase=i,this.fb=t,this.alertController=e,this.router=n,this.userNotificationService=o}ngOnInit(){this.credentials=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",o.kI.required]})}login(){return(0,a.mG)(this,void 0,void 0,function*(){const i=yield this.userNotificationService.presentLoading(null);this.supabase.signIn(this.credentials.value).then(()=>(0,a.mG)(this,void 0,void 0,function*(){yield i.dismiss(),this.router.navigateByUrl("/app/map",{replaceUrl:!0})}),t=>(0,a.mG)(this,void 0,void 0,function*(){yield i.dismiss(),this.showError("Login failed",t.message)}))})}signUp(){return(0,a.mG)(this,void 0,void 0,function*(){const i=yield this.userNotificationService.presentLoading(null);(yield this.supabase.signUp(this.credentials.value))||this.showError("Noget gik galt","kunner ikke oprette bruger"),i.dismiss()})}showError(i,t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:i,message:t,buttons:["OK"]});yield e.present()})}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(d.T),l.Y36(o.qu),l.Y36(r.Br),l.Y36(s.F0),l.Y36(c.w))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-login"]],decls:15,vars:2,consts:[["color","primary",1,"ion-text-center"],["slot","end"],["defaultHref","app/map"],["fullscreen",""],[3,"formGroup","ngSubmit"],[1,"input-group"],["placeholder","Email","formControlName","email"],["type","password","placeholder","password","formControlName","password"],["type","submit","expand","block","color","primary",3,"disabled"],["type","button","expand","block","color","secondary",3,"click"]],template:function(i,t){1&i&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"ion-content",3),l.TgZ(5,"form",4),l.NdJ("ngSubmit",function(){return t.login()}),l.TgZ(6,"div",5),l.TgZ(7,"ion-item"),l._UZ(8,"ion-input",6),l.qZA(),l.TgZ(9,"ion-item"),l._UZ(10,"ion-input",7),l.qZA(),l.qZA(),l.TgZ(11,"ion-button",8),l._uU(12,"Log in"),l.qZA(),l.TgZ(13,"ion-button",9),l.NdJ("click",function(){return t.signUp()}),l._uU(14,"Sign up! "),l.qZA(),l.qZA(),l.qZA()),2&i&&(l.xp6(5),l.Q6J("formGroup",t.credentials),l.xp6(6),l.Q6J("disabled",!t.credentials.valid))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.W2,o._Y,o.JL,o.sg,r.Ie,r.pK,r.j9,o.JJ,o.u,r.YG],styles:["ion-content[_ngcontent-%COMP%]{--padding-top:40%;--padding-start:10%;--padding-end:10%}.errors[_ngcontent-%COMP%]{font-size:small;color:#fff;background:var(--ion-color-danger);padding-left:15px;padding-top:5px;padding-bottom:5px}"]}),i})()}];let p=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[s.Bz.forChild(u)],s.Bz]}),i})(),g=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[n.ez,o.u5,r.Pc,p,o.UX]]}),i})()}}]);