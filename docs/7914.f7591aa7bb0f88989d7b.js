(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[7914],{7914:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LoginPageModule:()=>u});var i=n(6274),o=n(4988),r=n(5401),s=n(993),a=n(1855),l=n(3606),d=n(7681);const c=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o){this.supabase=e,this.fb=t,this.alertController=n,this.router=i,this.loadingController=o}ngOnInit(){this.credentials=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",o.kI.required]})}login(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create();yield e.present(),this.supabase.signIn(this.credentials.value).then(()=>(0,a.mG)(this,void 0,void 0,function*(){yield e.dismiss(),this.router.navigateByUrl("/app/map",{replaceUrl:!0})}),t=>(0,a.mG)(this,void 0,void 0,function*(){yield e.dismiss(),this.showError("Login failed",t.message)}))})}signUp(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create();yield e.present(),(yield this.supabase.signUp(this.credentials.value))||this.showError("Noget gik galt","kunner ikke oprette bruger"),e.dismiss()})}showError(e,t){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:e,message:t,buttons:["OK"]});yield n.present()})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.T),l.Y36(o.qu),l.Y36(r.Br),l.Y36(s.F0),l.Y36(r.HT))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-login"]],decls:15,vars:2,consts:[["color","primary",1,"ion-text-center"],["slot","end"],["defaultHref","app/map"],["fullscreen",""],[3,"formGroup","ngSubmit"],[1,"input-group"],["placeholder","Email","formControlName","email"],["type","password","placeholder","password","formControlName","password"],["type","submit","expand","block","color","primary",3,"disabled"],["type","button","expand","block","color","secondary",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"ion-content",3),l.TgZ(5,"form",4),l.NdJ("ngSubmit",function(){return t.login()}),l.TgZ(6,"div",5),l.TgZ(7,"ion-item"),l._UZ(8,"ion-input",6),l.qZA(),l.TgZ(9,"ion-item"),l._UZ(10,"ion-input",7),l.qZA(),l.qZA(),l.TgZ(11,"ion-button",8),l._uU(12,"Log in"),l.qZA(),l.TgZ(13,"ion-button",9),l.NdJ("click",function(){return t.signUp()}),l._uU(14,"Sign up! "),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(5),l.Q6J("formGroup",t.credentials),l.xp6(6),l.Q6J("disabled",!t.credentials.valid))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.W2,o._Y,o.JL,o.sg,r.Ie,r.pK,r.j9,o.JJ,o.u,r.YG],styles:["ion-content[_ngcontent-%COMP%]{--padding-top:40%;--padding-start:10%;--padding-end:10%}.errors[_ngcontent-%COMP%]{font-size:small;color:#fff;background:var(--ion-color-danger);padding-left:15px;padding-top:5px;padding-bottom:5px}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(c)],s.Bz]}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,o.u5,r.Pc,p,o.UX]]}),e})()}}]);