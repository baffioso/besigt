"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[240],{240:(Ei,zt,S)=>{S.r(zt),S.d(zt,{MapPageModule:()=>mi});var v=S(3349),P=S(9808),N=S(3075),xe=S(618),Ht=S(8929),G=S(4850),Wt=S(7625),Ne=S(373),ur=S(2986),st=S(2994),Xt=S(9202),Vt=S(4160),e=S(5e3),ct=S(8273),re=S(8222),oe=S(5094);function pr(t,r){1&t&&e._UZ(0,"div",2)}const fr=["*"];let dr=(()=>{class t{constructor(n,o){this.mapService=n,this.store=o,this.showMapCenter$=this.store.select("mapTools","activatedMapTools").pipe((0,G.U)(a=>a.includes("takePhoto"))),this.center=[1360103,7491908],this.zoom=13}ngAfterViewInit(){this.mapService.createMap(this.center,this.zoom)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.S),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map"]],ngContentSelectors:fr,decls:4,vars:3,consts:[["id","ol-map",1,"map-container"],["id","center",4,"ngIf"],["id","center"]],template:function(n,o){1&n&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,pr,1,0,"div",1),e.ALo(2,"async"),e.Hsn(3),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.showMapCenter$)))},directives:[P.O5],pipes:[P.Ov],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}#center[_ngcontent-%COMP%]{top:50%;left:50%;margin-top:-13px;margin-left:-13px;padding:10px;border:3px dashed #fc1717;border-radius:50%;z-index:10000;position:absolute}"],changeDetection:0}),t})();var Kt=S(655),lt=S(7037);function vr(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-toggle",11),e.NdJ("ionChange",function(a){const c=e.CHM(n).$implicit,f=e.oxw().$implicit;return e.oxw(2).onOverlayToggle(a,f,c)}),e.qZA(),e.qZA()}if(2&t){const n=r.$implicit;e.xp6(2),e.Oqu(n.label),e.xp6(1),e.Q6J("name",n.name)("checked",n.addedToMap)}}function mr(t,r){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-list-header",9),e.TgZ(2,"ion-label",10),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,vr,4,3,"ion-item",8),e.qZA()),2&t){const n=r.$implicit,o=e.oxw(2);e.xp6(3),e.hij(" ",n.name," "),e.xp6(1),e.Q6J("ngForOf",n.layers)("ngForTrackBy",o.trackItems)}}function gr(t,r){if(1&t&&(e.ynx(0),e.YNc(1,mr,5,3,"ion-list",8),e.ALo(2,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,n.overlays$))("ngForTrackBy",n.trackItems)}}function hr(t,r){if(1&t&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-radio",14),e.qZA()),2&t){const n=r.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(1),e.Q6J("value",n.id)}}function _r(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-list"),e.TgZ(2,"ion-radio-group",12),e.NdJ("ionChange",function(a){return e.CHM(n),e.oxw().onBaseLayerSelect(a)}),e.ALo(3,"async"),e.YNc(4,hr,4,2,"ion-item",13),e.ALo(5,"async"),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(2),e.Q6J("value",e.lcZ(3,2,n.selectedBaseMap$)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,4,n.baseMaps$))}}let yr=(()=>{class t{constructor(n,o,a){this.modalController=n,this.mapLayersService=o,this.mapService=a,this.segment="overlays",this.overlays$=this.mapLayersService.overlays$,this.baseMaps$=this.mapLayersService.baseMaps$,this.selectedBaseMap$=this.mapLayersService.baseMaps$.pipe((0,G.U)(i=>i.find(c=>c.selected).id))}ngOnInit(){}onOverlayToggle(n,o,a){this.mapLayersService.updateOverlays(o.name,a.name,n.detail.checked),n.detail.checked?this.mapService.addLayer(o.url,a):this.mapService.removeLayer(a.name)}onBaseLayerSelect(n){this.mapLayersService.updateBaseLayerSelection(n.detail.value),this.mapService.changeBaseMap(n.detail.value)}dismiss(){this.modalController.dismiss()}trackItems(n,o){return o.name}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.IN),e.Y36(lt.Y),e.Y36(re.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-layers-control-modal"]],decls:17,vars:3,consts:[["color","primary",1,"ion-text-center"],["color","secondary","mode","md",3,"ngModel","ngModelChange"],["value","overlays"],["value","baselayers"],[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","light"],["role","heading","aria-level","2"],["slot","end",3,"name","checked","ionChange"],[3,"value","ionChange"],[4,"ngFor","ngForOf"],["slot","start",3,"value"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title"),e._uU(3,"Lag"),e.qZA(),e.qZA(),e.TgZ(4,"ion-segment",1),e.NdJ("ngModelChange",function(i){return o.segment=i}),e.TgZ(5,"ion-segment-button",2),e.TgZ(6,"ion-label"),e._uU(7,"Lag"),e.qZA(),e.qZA(),e.TgZ(8,"ion-segment-button",3),e.TgZ(9,"ion-label"),e._uU(10,"Baggrundskort"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"ion-content"),e.YNc(12,gr,3,4,"ng-container",4),e.YNc(13,_r,6,6,"ng-container",4),e.qZA(),e.TgZ(14,"ion-fab",5),e.TgZ(15,"ion-fab-button",6),e.NdJ("click",function(){return o.dismiss()}),e._UZ(16,"ion-icon",7),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("ngModel",o.segment),e.xp6(8),e.Q6J("ngIf","overlays"===o.segment),e.xp6(1),e.Q6J("ngIf","baselayers"===o.segment))},directives:[v.Gu,v.sr,v.wd,v.cJ,v.QI,N.JJ,N.On,v.GO,v.Q$,v.W2,P.O5,v.IJ,v.W4,v.gu,P.sg,v.q_,v.yh,v.Ie,v.ho,v.w,v.se,v.B7,v.U5],pipes:[P.Ov],styles:[""],changeDetection:0}),t})(),br=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}onShowLayersControl(){return(0,Kt.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:yr,cssClass:"my-custom-class"})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e.NdJ("click",function(){return o.onShowLayersControl()}),e._UZ(2,"ion-icon",2),e.qZA(),e.qZA())},directives:[v.IJ,v.W4,v.gu],styles:[""],changeDetection:0}),t})();function Tr(t,r){1&t&&e._UZ(0,"img",1),2&t&&e.Q6J("src",r.$implicit,e.LSH)}let Cr=(()=>{class t{constructor(n){this.mapLayersService=n,this.legends$=this.mapLayersService.legends$}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(lt.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-legend-popover"]],decls:2,vars:3,consts:[[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(n,o){1&n&&(e.YNc(0,Tr,1,1,"img",0),e.ALo(1,"async")),2&n&&e.Q6J("ngForOf",e.lcZ(1,1,o.legends$))},directives:[P.sg],pipes:[P.Ov],styles:["img[_ngcontent-%COMP%]{display:block;padding:10px}"],changeDetection:0}),t})();function Sr(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab",1),e.TgZ(1,"ion-fab-button",2),e.NdJ("click",function(a){return e.CHM(n),e.oxw().onShowPopover(a)}),e._UZ(2,"i",3),e.qZA(),e.qZA()}}let wr=(()=>{class t{constructor(n,o){this.popoverController=n,this.mapLayersService=o,this.showLegend$=this.mapLayersService.legends$.pipe((0,G.U)(a=>0!==a.length))}onShowPopover(n){return(0,Kt.mG)(this,void 0,void 0,function*(){yield(yield this.popoverController.create({component:Cr,cssClass:"legend-popover",translucent:!0,showBackdrop:!1,animated:!1,event:n})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.Dh),e.Y36(lt.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-legend-fab"]],decls:2,vars:3,consts:[["horizontal","start","vertical","bottom","slot","fixed",4,"ngIf"],["horizontal","start","vertical","bottom","slot","fixed"],[3,"click"],[1,"fg-map-legend-o","fg-2x"]],template:function(n,o){1&n&&(e.YNc(0,Sr,3,0,"ion-fab",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.showLegend$))},directives:[P.O5,v.IJ,v.W4],pipes:[P.Ov],styles:[""],changeDetection:0}),t})();var xr=S(5254),Mr=S(2198),Zr=S(7545),Ar=S(7914),kr=S(2313);let Pr=(()=>{class t{constructor(n,o){this.supabase=n,this.domSanitizer=o}set properties(n){const o=n.file_name.replace("images/","");this.photoUrl$=this.downLoadImage(o)}ngOnInit(){}downLoadImage(n){return this.supabase.downloadImage(n).pipe((0,G.U)(o=>this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(o.data))))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Ar.T),e.Y36(kr.H7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-photo-viewer"]],inputs:{properties:"properties"},decls:2,vars:3,consts:[["alt","",3,"src"]],template:function(n,o){1&n&&(e._UZ(0,"img",0),e.ALo(1,"async")),2&n&&e.Q6J("src",e.lcZ(1,1,o.photoUrl$),e.LSH)},pipes:[P.Ov],styles:[""]}),t})(),Or=(()=>{class t{oisUrl(n){return`http://gis.frederiksberg.dk/vaerktoejer/ois-link.html?komnr=${n.kommunekode}&ejdnr=${n.esrejendomsnr}`}dinGeoUrl(n){return`https://www.dingeo.dk/adresse/${n.postnr}-${n.postnrnavn}/${n.vejnavn}-${n.husnr}/`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-address-info"]],inputs:{properties:"properties"},decls:25,vars:6,consts:[["color","primary"],[1,"ion-text-center"],["fullscreen",""],["name","home-outline","slot","start"],["target","_blank",3,"href"],["name","link-outline","slot","start"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title",1),e._uU(3,"Adresseinfo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"ion-list"),e.TgZ(6,"ion-item"),e._UZ(7,"ion-icon",3),e.TgZ(8,"ion-label"),e.TgZ(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-item",4),e._UZ(14,"ion-icon",5),e.TgZ(15,"ion-label"),e._uU(16," OIS "),e.qZA(),e.qZA(),e.TgZ(17,"ion-item",4),e._UZ(18,"ion-icon",5),e.TgZ(19,"ion-label"),e._uU(20," DinGeo "),e.qZA(),e.qZA(),e.TgZ(21,"ion-item",4),e._UZ(22,"ion-icon",5),e.TgZ(23,"ion-label"),e._uU(24," De Gule Sider "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(10),e.Oqu(o.properties.betegnelse),e.xp6(2),e.AsE("",o.properties.matrikelnr,", ",o.properties.ejerlavnavn,""),e.xp6(1),e.Q6J("href",o.oisUrl(o.properties)),e.xp6(4),e.Q6J("href",o.dinGeoUrl(o.properties)),e.xp6(4),e.Q6J("href","https://kort.degulesider.dk/s/"+o.properties.betegnelse))},directives:[v.Gu,v.sr,v.wd,v.W2,v.q_,v.Ie,v.gu,v.Q$],styles:[""]}),t})();function Ir(t,r){if(1&t&&e._UZ(0,"app-photo-viewer",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}function jr(t,r){if(1&t&&e._UZ(0,"app-address-info",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}let Lr=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}onCloseModal(){this.modalController.dismiss()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-feature-info-modal"]],inputs:{feature:"feature"},decls:2,vars:2,consts:[[3,"properties",4,"ngIf"],[3,"properties"]],template:function(n,o){1&n&&(e.YNc(0,Ir,1,1,"app-photo-viewer",0),e.YNc(1,jr,1,1,"app-address-info",0)),2&n&&(e.Q6J("ngIf","projectPhotos"===o.feature.layerName),e.xp6(1),e.Q6J("ngIf","adresser"===o.feature.layerName))},directives:[P.O5,Pr,Or],styles:[""]}),t})(),Dr=(()=>{class t{constructor(n,o,a){this.modalController=n,this.mapService=o,this.store=a}ngOnInit(){this.store.select("map","selectedFeatures").pipe((0,Mr.h)(n=>!!n),(0,G.U)(n=>({properties:n[0].feature.getProperties(),layerName:n[0].layerName})),(0,Zr.w)(n=>this.showModal(n))).subscribe()}showModal(n){return(0,xr.D)(this.modalController.create({component:Lr,componentProps:{feature:n},initialBreakpoint:.4,breakpoints:[0,.4,1]})).pipe((0,G.U)(o=>o.present()))}onCloseModal(){this.modalController.dismiss(),this.mapService.clearFeatureSelection()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.IN),e.Y36(re.S),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-feature-info"]],decls:0,vars:0,template:function(n,o){},styles:["ion-modal[_ngcontent-%COMP%]{pointer-events:none}ion-backdrop[_ngcontent-%COMP%]{pointer-events:none!important}"],changeDetection:0}),t})();var en=S(5357);function $r(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-fab-button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().activateTool("takePhoto")}),e.ALo(2,"async"),e._UZ(3,"ion-icon",9),e.qZA(),e.TgZ(4,"ion-fab-button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().activateTool("draw")}),e.ALo(5,"async"),e._UZ(6,"i",10),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("color",e.lcZ(2,2,n.activatedMapTools$).includes("takePhoto")?"secondary":"light"),e.xp6(3),e.Q6J("color",e.lcZ(5,4,n.activatedMapTools$).includes("draw")?"secondary":"light")}}const Er=["*"];let Nr=(()=>{class t{constructor(n){this.store=n,this.selectedProject$=this.store.select("project","selectedProject"),this.activatedMapTools$=this.store.select("mapTools","activatedMapTools")}activateTool(n){this.store.dispatch(en.mZ({tool:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-tools"]],ngContentSelectors:Er,decls:16,vars:12,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"],["color","light",3,"color","click"],["name","search"],[3,"color","click"],[1,"fg-poi-info","fg-lg"],[4,"ngIf"],["name","archive"],["name","camera"],[1,"fg-polygon-pt","fg-lg"]],template:function(n,o){1&n&&(e.F$t(),e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e._UZ(2,"ion-icon",2),e.qZA(),e.TgZ(3,"ion-fab-list"),e.TgZ(4,"ion-fab-button",3),e.NdJ("click",function(){return o.activateTool("geoSearch")}),e.ALo(5,"async"),e._UZ(6,"ion-icon",4),e.qZA(),e.TgZ(7,"ion-fab-button",5),e.NdJ("click",function(){return o.activateTool("addressInfo")}),e.ALo(8,"async"),e._UZ(9,"i",6),e.qZA(),e.YNc(10,$r,7,6,"ng-container",7),e.ALo(11,"async"),e.TgZ(12,"ion-fab-button",5),e.NdJ("click",function(){return o.activateTool("saveProject")}),e.ALo(13,"async"),e._UZ(14,"ion-icon",8),e.qZA(),e.qZA(),e.qZA(),e.Hsn(15,0,["#mapTools",""])),2&n&&(e.xp6(4),e.Q6J("color",e.lcZ(5,4,o.activatedMapTools$).includes("geoSearch")?"secondary":"light"),e.xp6(3),e.Q6J("color",e.lcZ(8,6,o.activatedMapTools$).includes("addressInfo")?"secondary":"light"),e.xp6(3),e.Q6J("ngIf",null!==e.lcZ(11,8,o.selectedProject$)),e.xp6(2),e.Q6J("color",e.lcZ(13,10,o.activatedMapTools$).includes("saveProject")?"secondary":"light"))},directives:[v.IJ,v.W4,v.gu,v.zq,P.O5],pipes:[P.Ov],styles:[""],changeDetection:0}),t})();function ue(t,r){return t(r={exports:{}},r.exports),r.exports}var w=ue(function(t){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)}),ee=ue(function(t){var r=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=r)}),te=function(t){return"object"==typeof t?null!==t:"function"==typeof t},B=function(t){if(!te(t))throw TypeError(t+" is not an object!");return t},se=function(t){try{return!!t()}catch(r){return!0}},Me=!se(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),ut=w.document,Ur=te(ut)&&te(ut.createElement),Re=function(t){return Ur?ut.createElement(t):{}},qr=!Me&&!se(function(){return 7!=Object.defineProperty(Re("div"),"a",{get:function(){return 7}}).a}),Jr=Object.defineProperty,Yr=Me?Object.defineProperty:function(r,n,o){if(B(r),n=function(t,r){if(!te(t))return t;var n,o;if("function"==typeof(n=t.toString)&&!te(o=n.call(t))||"function"==typeof(n=t.valueOf)&&!te(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}(n),B(o),qr)try{return Jr(r,n,o)}catch(a){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(r[n]=o.value),r},Ue={f:Yr},tn=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}},z=Me?function(t,r,n){return Ue.f(t,r,tn(1,n))}:function(t,r,n){return t[r]=n,t},Gr={}.hasOwnProperty,_e=function(t,r){return Gr.call(t,r)},Br=0,Qr=Math.random(),pt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Br+Qr).toString(36))},ft=ue(function(t){var r="__core-js_shared__",n=w[r]||(w[r]={});(t.exports=function(o,a){return n[o]||(n[o]=void 0!==a?a:{})})("versions",[]).push({version:ee.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),dt=ft("native-function-to-string",Function.toString),ye=ue(function(t){var r=pt("src"),n="toString",o=(""+dt).split(n);ee.inspectSource=function(a){return dt.call(a)},(t.exports=function(a,i,c,f){var p="function"==typeof c;p&&(_e(c,"name")||z(c,"name",i)),a[i]!==c&&(p&&(_e(c,r)||z(c,r,a[i]?""+a[i]:o.join(String(i)))),a===w?a[i]=c:f?a[i]?a[i]=c:z(a,i,c):(delete a[i],z(a,i,c)))})(Function.prototype,n,function(){return"function"==typeof this&&this[r]||dt.call(this)})}),Ze=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},Q=function(t,r,n){if(Ze(t),void 0===r)return t;switch(n){case 1:return function(o){return t.call(r,o)};case 2:return function(o,a){return t.call(r,o,a)};case 3:return function(o,a,i){return t.call(r,o,a,i)}}return function(){return t.apply(r,arguments)}},vt="prototype",J=function(t,r,n){var u,y,_,T,o=t&J.F,a=t&J.G,c=t&J.P,f=t&J.B,p=a?w:t&J.S?w[r]||(w[r]={}):(w[r]||{})[vt],m=a?ee:ee[r]||(ee[r]={}),g=m[vt]||(m[vt]={});for(u in a&&(n=r),n)_=((y=!o&&p&&void 0!==p[u])?p:n)[u],T=f&&y?Q(_,w):c&&"function"==typeof _?Q(Function.call,_):_,p&&ye(p,u,_,t&J.U),m[u]!=_&&z(m,u,T),c&&g[u]!=_&&(g[u]=_)};w.core=ee,J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128;var t,I=J,zr={}.toString,pe=function(t){return zr.call(t).slice(8,-1)},nn=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==pe(t)?t.split(""):Object(t)},qe=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},mt=function(t){return nn(qe(t))},Hr=Math.ceil,Wr=Math.floor,Fe=function(t){return isNaN(t=+t)?0:(t>0?Wr:Hr)(t)},Xr=Math.min,Je=function(t){return t>0?Xr(Fe(t),9007199254740991):0},Vr=Math.max,Kr=Math.min,rn=ft("keys"),gt=function(t){return rn[t]||(rn[t]=pt(t))},no=(t=!1,function(r,n,o){var a=mt(r),i=Je(a.length),c=function(t,r){return(t=Fe(t))<0?Vr(t+r,0):Kr(t,r)}(o,i);for(t;i>c;c++)if(c in a&&a[c]===n)return c||0;return-1}),ro=gt("IE_PROTO"),ht="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ae=Object.keys||function(r){return function(t,r){var i,n=mt(t),o=0,a=[];for(i in n)i!=ro&&_e(n,i)&&a.push(i);for(;r.length>o;)_e(n,i=r[o++])&&(~no(a,i)||a.push(i));return a}(r,ht)},io={f:Object.getOwnPropertySymbols},co={f:{}.propertyIsEnumerable},Ye=function(t){return Object(qe(t))},Ge=Object.assign,lo=!Ge||se(function(){var t={},r={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(a){r[a]=a}),7!=Ge({},t)[n]||Object.keys(Ge({},r)).join("")!=o})?function(r,n){for(var o=Ye(r),a=arguments.length,i=1,c=io.f,f=co.f;a>i;)for(var y,p=nn(arguments[i++]),m=c?Ae(p).concat(c(p)):Ae(p),g=m.length,u=0;g>u;)f.call(p,y=m[u++])&&(o[y]=p[y]);return o}:Ge;I(I.S+I.F,"Object",{assign:lo});var po=function(r,n){var c,f,o=String(qe(r)),a=Fe(n),i=o.length;return a<0||a>=i?"":(c=o.charCodeAt(a))<55296||c>56319||a+1===i||(f=o.charCodeAt(a+1))<56320||f>57343?o.charAt(a):o.slice(a,a+2)},on=function(t,r,n){return r+(n?po(t,r).length:1)},q=ue(function(t){var r=ft("wks"),n=w.Symbol,o="function"==typeof n;(t.exports=function(i){return r[i]||(r[i]=o&&n[i]||(o?n:pt)("Symbol."+i))}).store=r}),fo=q("toStringTag"),vo="Arguments"==pe(function(){return arguments}()),Be=function(t){var r,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,r){try{return t[r]}catch(n){}}(r=Object(t),fo))?n:vo?pe(r):"Object"==(o=pe(r))&&"function"==typeof r.callee?"Arguments":o},go=RegExp.prototype.exec,_t=function(t,r){var n=t.exec;if("function"==typeof n){var o=n.call(t,r);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==Be(t))throw new TypeError("RegExp#exec called on incompatible receiver");return go.call(t,r)},ho=function(){var t=B(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},Qe=RegExp.prototype.exec,_o=String.prototype.replace,an=Qe,ze="lastIndex",yt=function(){var t=/a/,r=/b*/g;return Qe.call(t,"a"),Qe.call(r,"a"),0!==t[ze]||0!==r[ze]}(),bt=void 0!==/()??/.exec("")[1];(yt||bt)&&(an=function(r){var o,a,i,c,n=this;return bt&&(a=new RegExp("^"+n.source+"$(?!\\s)",ho.call(n))),yt&&(o=n[ze]),i=Qe.call(n,r),yt&&i&&(n[ze]=n.global?i.index+i[0].length:o),bt&&i&&i.length>1&&_o.call(i[0],a,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)}),i});var He=an;I({target:"RegExp",proto:!0,forced:He!==/./.exec},{exec:He});var bo=q("species"),To=!se(function(){var t=/./;return t.exec=function(){var r=[];return r.groups={a:"7"},r},"7"!=="".replace(t,"$<a>")}),Co=function(){var t=/(?:)/,r=t.exec;t.exec=function(){return r.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),sn=function(t,r,n){var o=q(t),a=!se(function(){var g={};return g[o]=function(){return 7},7!=""[t](g)}),i=a?!se(function(){var g=!1,u=/a/;return u.exec=function(){return g=!0,null},"split"===t&&(u.constructor={},u.constructor[bo]=function(){return u}),u[o](""),!g}):void 0;if(!a||!i||"replace"===t&&!To||"split"===t&&!Co){var c=/./[o],f=n(qe,o,""[t],function(u,y,_,T,C){return y.exec===He?a&&!C?{done:!0,value:c.call(y,_,T)}:{done:!0,value:u.call(_,y,T)}:{done:!1}}),m=f[1];ye(String.prototype,t,f[0]),z(RegExp.prototype,o,2==r?function(g,u){return m.call(g,this,u)}:function(g){return m.call(g,this)})}},So=Math.max,wo=Math.min,xo=Math.floor,Mo=/\$([$&`']|\d\d?|<[^>]*>)/g,Zo=/\$([$&`']|\d\d?)/g,Ao=function(t){return void 0===t?t:String(t)};sn("replace",2,function(t,r,n,o){return[function(c,f){var p=t(this),m=null==c?void 0:c[r];return void 0!==m?m.call(c,p,f):n.call(String(p),c,f)},function(i,c){var f=o(n,i,this,c);if(f.done)return f.value;var p=B(i),m=String(this),g="function"==typeof c;g||(c=String(c));var u=p.global;if(u){var y=p.unicode;p.lastIndex=0}for(var _=[];;){var T=_t(p,m);if(null===T||(_.push(T),!u))break;""===String(T[0])&&(p.lastIndex=on(m,Je(p.lastIndex),y))}for(var A="",x=0,O=0;O<_.length;O++){T=_[O];for(var $=String(T[0]),L=So(wo(Fe(T.index),m.length),0),ie=[],me=1;me<T.length;me++)ie.push(Ao(T[me]));var ge=T.groups;if(g){var Ce=[$].concat(ie,L,m);void 0!==ge&&Ce.push(ge);var F=String(c.apply(void 0,Ce))}else F=a($,m,L,ie,ge,c);L>=x&&(A+=m.slice(x,L)+F,x=L+$.length)}return A+m.slice(x)}];function a(i,c,f,p,m,g){var u=f+i.length,y=p.length,_=Zo;return void 0!==m&&(m=Ye(m),_=Mo),n.call(g,_,function(T,C){var A;switch(C.charAt(0)){case"$":return"$";case"&":return i;case"`":return c.slice(0,f);case"'":return c.slice(u);case"<":A=m[C.slice(1,-1)];break;default:var x=+C;if(0===x)return T;if(x>y){var O=xo(x/10);return 0===O?T:O<=y?void 0===p[O-1]?C.charAt(1):p[O-1]+C.charAt(1):T}A=p[x-1]}return void 0===A?"":A})}});var ko=q("match"),Oo=q("species"),cn=function(t,r){var o,n=B(t).constructor;return void 0===n||null==(o=B(n)[Oo])?r:Ze(o)},Io=Math.min,jo=[].push,fe="split",H="length",Tt="lastIndex",ln=4294967295,ke=!se(function(){});sn("split",2,function(t,r,n,o){var a;return a="c"=="abbc"[fe](/(b)*/)[1]||4!="test"[fe](/(?:)/,-1)[H]||2!="ab"[fe](/(?:ab)*/)[H]||4!="."[fe](/(.?)(.?)/)[H]||"."[fe](/()()/)[H]>1||""[fe](/.?/)[H]?function(i,c){var f=String(this);if(void 0===i&&0===c)return[];if(!function(t){var r;return te(t)&&(void 0!==(r=t[ko])?!!r:"RegExp"==pe(t))}(i))return n.call(f,i,c);for(var _,T,C,p=[],g=0,u=void 0===c?ln:c>>>0,y=new RegExp(i.source,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":"")+"g");(_=He.call(y,f))&&!((T=y[Tt])>g&&(p.push(f.slice(g,_.index)),_[H]>1&&_.index<f[H]&&jo.apply(p,_.slice(1)),C=_[0][H],g=T,p[H]>=u));)y[Tt]===_.index&&y[Tt]++;return g===f[H]?(C||!y.test(""))&&p.push(""):p.push(f.slice(g)),p[H]>u?p.slice(0,u):p}:"0"[fe](void 0,0)[H]?function(i,c){return void 0===i&&0===c?[]:n.call(this,i,c)}:n,[function(c,f){var p=t(this),m=null==c?void 0:c[r];return void 0!==m?m.call(c,p,f):a.call(String(p),c,f)},function(i,c){var f=o(a,i,this,c,a!==n);if(f.done)return f.value;var p=B(i),m=String(this),g=cn(p,RegExp),u=p.unicode,_=new g(ke?p:"^(?:"+p.source+")",(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(ke?"y":"g")),T=void 0===c?ln:c>>>0;if(0===T)return[];if(0===m.length)return null===_t(_,m)?[m]:[];for(var C=0,A=0,x=[];A<m.length;){_.lastIndex=ke?A:0;var $,O=_t(_,ke?m:m.slice(A));if(null===O||($=Io(Je(_.lastIndex+(ke?0:A)),m.length))===C)A=on(m,A,u);else{if(x.push(m.slice(C,A)),x.length===T)return x;for(var L=1;L<=O.length-1;L++)if(x.push(O[L]),x.length===T)return x;A=C=$}}return x.push(m.slice(C)),x}]});var Z=ue(function(t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={default:"__default"},o=Object.prototype.hasOwnProperty;function a(){}function i(s,l){return o.call(s,l)}function c(){return new a}function f(s,l){for(;s.length>l;)s.pop()}function m(s,l,d){if(null==d)s.removeAttribute(l);else{var h=function(s){return 0===s.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===s.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0}(l);h?s.setAttributeNS(h,l,String(d)):s.setAttribute(l,String(d))}}function g(s,l,d){s[l]=d}function u(s,l,d){l.indexOf("-")>=0?s.setProperty(l,d):s[l]=d}a.prototype=Object.create(null);var T=c();function C(s,l,d){(T[l]||T[n.default])(s,l,d)}T[n.default]=function(s,l,d){var h=typeof d;"object"===h||"function"===h?g(s,l,d):m(s,l,d)},T.style=function(s,l,d){if("string"==typeof d)s.style.cssText=d;else{s.style.cssText="";var h=s.style;for(var b in d)i(d,b)&&u(h,b,d[b])}};var x={nodesCreated:null,nodesDeleted:null},O=function(){function s(){this.created=[],this.deleted=[]}return s.prototype.markCreated=function(l){this.created.push(l)},s.prototype.markDeleted=function(l){this.deleted.push(l)},s.prototype.notifyChanges=function(){x.nodesCreated&&this.created.length>0&&x.nodesCreated(this.created),x.nodesDeleted&&this.deleted.length>0&&x.nodesDeleted(this.deleted)},s}();function L(s){return 1===s.nodeType}var ge=Node.prototype.getRootNode||function(){for(var s=this,l=s;s;)l=s,s=s.parentNode;return l};var E=function(){function s(l,d,h){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=l,this.key=d,this.text=h}return s.prototype.hasEmptyAttrsArr=function(){var l=this._attrsArr;return!l||!l.length},s.prototype.getAttrsArr=function(l){return this._attrsArr||(this._attrsArr=new Array(l))},s}();function Se(s,l,d,h){var b=new E(l,d,h);return s.__incrementalDOMData=b,b}function $e(s,l){return Wn(s,l)}function Wn(s,l){if(s.__incrementalDOMData)return s.__incrementalDOMData;var d=L(s)?s.localName:s.nodeName,h=L(s)?s.getAttribute("key")||l:null,M=Se(s,d,h,function(s){return 3===s.nodeType}(s)?s.data:void 0);return L(s)&&function(s,l){var d=s.attributes,h=d.length;if(h)for(var b=l.getAttrsArr(h),M=0,j=0;M<h;M+=1,j+=2){var W=d[M],Y=W.value;b[j]=W.name,b[j+1]=Y}}(s,M),M}var we=null,D=null,R=null,Ee=null,rt=[],ot=[];function at(){return ot}function Kn(s){return function(d,h,b){var M=we,j=Ee,W=rt,ne=ot,Y=D,V=R;we=new O,Ee=d.ownerDocument,ot=[],rt=function(s,l){var d=function(s){var l=ge.call(s);return function(s){return 11===s.nodeType||9===s.nodeType}(l)?l.activeElement:null}(s);return d&&s.contains(d)?function(s,l){for(var d=[],h=s;h!==l;){var b=h;d.push(b),h=b.parentNode}return d}(d,l):[]}(d,R=d.parentNode);try{return s(d,h,b)}finally{Ee=j,ot=ne,D=Y,R=V,rt=W,we.notifyChanges(),we=M}}}var er=Kn(function(s,l,d){return D=s,or(),l(d),ar(),s}),Ci=Kn(function(s,l,d){var h={nextSibling:s};return D=h,l(d),R&&rr(R,it(),s.nextSibling),h===D?null:D});function tr(s,l,d){var h=$e(s,d);return l==h.nameOrCtor&&d==h.key}function wi(s,l){var d;return d="#text"===s?function(s){var l=s.createTextNode("");return Se(l,"#text",null),l}(Ee):function(s,l,d,h){var b;if("function"==typeof d)b=new d;else{var M=function(s,l){return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/Math/MathML":null==l||"foreignObject"===$e(l).nameOrCtor?null:l.namespaceURI}(d,l);b=M?s.createElementNS(M,d):s.createElement(d)}return Se(b,d,h),b}(Ee,R,s,l),we.markCreated(d),d}function nr(s,l){var d=function(s,l,d){if(!s)return null;if(tr(s,l,d))return s;if(d)for(;s=s.nextSibling;)if(tr(s,l,d))return s;return null}(D,s,l),h=d||wi(s,l);h!==D&&(rt.indexOf(h)>=0?function(s,l,d){for(var h=l.nextSibling,b=d;null!==b&&b!==l;){var M=b.nextSibling;s.insertBefore(b,h),b=M}}(R,h,D):R.insertBefore(h,D),D=h)}function rr(s,l,d){for(var h=s,b=l;b!==d;){var M=b.nextSibling;h.removeChild(b),we.markDeleted(b),b=M}}function or(){R=D,D=null}function it(){return D?D.nextSibling:R.firstChild}function Bt(){D=it()}function ar(){rr(R,it(),null),D=R,R=R.parentNode}function ir(s,l){return Bt(),nr(s,l),or(),R}function sr(){return ar(),D}function xi(){return Bt(),nr("#text",null),D}var X=c();function ki(s,l,d){if(l.staticsApplied=!0,d&&d.length){if(l.hasEmptyAttrsArr()){for(var h=0;h<d.length;h+=2)C(s,d[h],d[h+1]);return}for(h=0;h<d.length;h+=2)X[d[h]]=h+1;var b=l.getAttrsArr(0),M=0;for(h=0;h<b.length;h+=2){var W=b[h+1],ne=X[j=b[h]];ne?d[ne]===W&&delete X[j]:(b[M]=j,b[M+1]=W,M+=2)}for(var j in f(b,M),X)C(s,j,d[X[j]]),delete X[j]}}function Qt(s,l,d){for(var h=[],b=3;b<arguments.length;b++)h[b-3]=arguments[b];var M=ir(s,l),j=$e(M);j.staticsApplied||ki(M,j,d);var W=Math.max(0,arguments.length-3),ne=j.hasEmptyAttrsArr();if(!W&&ne)return M;for(var Y=j.getAttrsArr(W),V=3,U=0;V<arguments.length;V+=2,U+=2){var K=arguments[V];if(ne)Y[U]=K;else if(Y[U]!==K)break;var he=arguments[V+1];(ne||Y[U+1]!==he)&&(Y[U+1]=he,C(M,K,he))}if(V<arguments.length||U<Y.length){for(var $i=U;U<Y.length;U+=2)X[Y[U]]=Y[U+1];for(U=$i;V<arguments.length;V+=2,U+=2)X[K=arguments[V]]!==(he=arguments[V+1])&&C(M,K,he),Y[U]=K,Y[U+1]=he,delete X[K];for(var K in f(Y,U),X)C(M,K,void 0),delete X[K]}return M}function lr(s){return sr()}r.applyAttr=m,r.applyProp=g,r.attributes=T,r.close=sr,r.currentElement=function(){return R},r.currentPointer=function(){return it()},r.open=ir,r.patch=er,r.patchInner=er,r.patchOuter=Ci,r.skip=function(){D=R.lastChild},r.skipNode=Bt,r.getKey=function(s){return $e(s).key},r.clearCache=function Vn(s){s.__incrementalDOMData=null;for(var l=s.firstChild;l;l=l.nextSibling)Vn(l)},r.importNode=function Xn(s){Wn(s);for(var l=s.firstChild;l;l=l.nextSibling)Xn(l)},r.isDataInitialized=function(s){return Boolean(s.__incrementalDOMData)},r.notifications=x,r.symbols=n,r.attr=function(s,l){var d=at();d.push(s),d.push(l)},r.elementClose=lr,r.elementOpen=Qt,r.elementOpenEnd=function(){var s=at(),l=Qt.apply(null,s);return f(s,0),l},r.elementOpenStart=function(s,l,d){var h=at();h[0]=s,h[1]=l,h[2]=d},r.elementVoid=function(s,l,d){for(var h=[],b=3;b<arguments.length;b++)h[b-3]=arguments[b];return Qt.apply(null,arguments),lr()},r.text=function(s){for(var l=[],d=1;d<arguments.length;d++)l[d-1]=arguments[d];var h=xi(),b=$e(h);if(b.text!==s){b.text=s;for(var M=s,j=1;j<arguments.length;j+=1){var W=arguments[j];M=W(M)}h.data=M}return h},r.key=function(s){at()[1]=s}});!function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")}(Z);var Lo=Z.applyProp,un=Z.attributes,pn=Z.patch,fn=Z.elementClose,dn=Z.elementOpen,Do=Z.elementVoid,Ct=Z.text;un.caretpos=function(t,r,n){t.setSelectionRange(n,n)},un.value=Lo;var Eo=function(r,n,o,a){pn(r,function(){!function(r,n,o){if(r.suggestions.length>0&&r.focused){dn("ul","",["class","dawa-autocomplete-suggestions","role","listbox","unselectable","on"]);for(var a=function(f){var p=r.suggestions[f],m="dawa-autocomplete-suggestion";r.selected===f&&(m+=" dawa-selected"),dn("li","",["role","option"],"class",m,"onmousedown",function(y){n(f),y.preventDefault()});var g=p.forslagstekst.split("\n");if(g=g.map(function(y){return y.replace(/ /g,"\xa0")}),o){Ct(g[0]);for(var u=1;u<g.length;++u)Do("br"),Ct(g[u])}else Ct(g.join(", "));fn("li")},i=0;i<r.suggestions.length;++i)a(i);fn("ul")}}(n,o,a)})};function vn(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var de,At,kt,Fo=function(t,r,n,o){try{return o?r(B(n)[0],n[1]):r(n)}catch(i){var a=t.return;throw void 0!==a&&B(a.call(t)),i}},ce={},Jo=q("iterator"),Yo=Array.prototype,Bo=q("iterator"),Qo=ee.getIteratorMethod=function(t){if(null!=t)return t[Bo]||t["@@iterator"]||ce[Be(t)]},mn=ue(function(t){var r={},n={},o=t.exports=function(a,i,c,f,p){var y,_,T,C,m=p?function(){return a}:Qo(a),g=Q(c,f,i?2:1),u=0;if("function"!=typeof m)throw TypeError(a+" is not iterable!");if(function(t){return void 0!==t&&(ce.Array===t||Yo[Jo]===t)}(m)){for(y=Je(a.length);y>u;u++)if((C=i?g(B(_=a[u])[0],_[1]):g(a[u]))===r||C===n)return C}else for(T=m.call(a);!(_=T.next()).done;)if((C=Fo(T,g,_.value,i))===r||C===n)return C};o.BREAK=r,o.RETURN=n}),zo=function(t,r,n){var o=void 0===n;switch(r.length){case 0:return o?t():t.call(n);case 1:return o?t(r[0]):t.call(n,r[0]);case 2:return o?t(r[0],r[1]):t.call(n,r[0],r[1]);case 3:return o?t(r[0],r[1],r[2]):t.call(n,r[0],r[1],r[2]);case 4:return o?t(r[0],r[1],r[2],r[3]):t.call(n,r[0],r[1],r[2],r[3])}return t.apply(n,r)},gn=w.document,St=gn&&gn.documentElement,hn=w.process,wt=w.setImmediate,xt=w.clearImmediate,_n=w.MessageChannel,Mt=w.Dispatch,Zt=0,Pe={},yn="onreadystatechange",Oe=function(){var t=+this;if(Pe.hasOwnProperty(t)){var r=Pe[t];delete Pe[t],r()}},bn=function(t){Oe.call(t.data)};(!wt||!xt)&&(wt=function(r){for(var n=[],o=1;arguments.length>o;)n.push(arguments[o++]);return Pe[++Zt]=function(){zo("function"==typeof r?r:Function(r),n)},de(Zt),Zt},xt=function(r){delete Pe[r]},"process"==pe(hn)?de=function(t){hn.nextTick(Q(Oe,t,1))}:Mt&&Mt.now?de=function(t){Mt.now(Q(Oe,t,1))}:_n?(kt=(At=new _n).port2,At.port1.onmessage=bn,de=Q(kt.postMessage,kt,1)):w.addEventListener&&"function"==typeof postMessage&&!w.importScripts?(de=function(t){w.postMessage(t+"","*")},w.addEventListener("message",bn,!1)):de=yn in Re("script")?function(t){St.appendChild(Re("script"))[yn]=function(){St.removeChild(this),Oe.call(t)}}:function(t){setTimeout(Q(Oe,t,1),0)});var Tn={set:wt,clear:xt},Ho=Tn.set,Cn=w.MutationObserver||w.WebKitMutationObserver,Pt=w.process,Ot=w.Promise,Sn="process"==pe(Pt);function Xo(t){var r,n;this.promise=new t(function(o,a){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=o,n=a}),this.resolve=Ze(r),this.reject=Ze(n)}var It={f:function(t){return new Xo(t)}},jt=function(t){try{return{e:!1,v:t()}}catch(r){return{e:!0,v:r}}},wn=w.navigator,Ko=wn&&wn.userAgent||"",na=Ue.f,xn=q("toStringTag"),Lt=function(t,r,n){t&&!_e(t=n?t:t.prototype,xn)&&na(t,xn,{configurable:!0,value:r})},Mn=q("species"),Dt=q("iterator"),Zn=!1;try{[7][Dt]().return=function(){Zn=!0}}catch(t){}var Xe,In,jn,Ln,r,An=Tn.set,kn=function(){var t,r,n,o=function(){var f,p;for(Sn&&(f=Pt.domain)&&f.exit();t;){p=t.fn,t=t.next;try{p()}catch(m){throw t?n():r=void 0,m}}r=void 0,f&&f.enter()};if(Sn)n=function(){Pt.nextTick(o)};else if(!Cn||w.navigator&&w.navigator.standalone)if(Ot&&Ot.resolve){var c=Ot.resolve(void 0);n=function(){c.then(o)}}else n=function(){Ho.call(w,o)};else{var a=!0,i=document.createTextNode("");new Cn(o).observe(i,{characterData:!0}),n=function(){i.data=a=!a}}return function(f){var p={fn:f,next:void 0};r&&(r.next=p),t||(t=p,n()),r=p}}(),le="Promise",Pn=w.TypeError,be=w.process,On=be&&be.versions,ia=On&&On.v8||"",ae=w[le],Ie="process"==Be(be),We=function(){},je=In=It.f,Le=!!function(){try{var t=ae.resolve(1),r=(t.constructor={})[q("species")]=function(n){n(We,We)};return(Ie||"function"==typeof PromiseRejectionEvent)&&t.then(We)instanceof r&&0!==ia.indexOf("6.6")&&-1===Ko.indexOf("Chrome/66")}catch(n){}}(),Dn=function(t){var r;return!(!te(t)||"function"!=typeof(r=t.then))&&r},$t=function(t,r){if(!t._n){t._n=!0;var n=t._c;kn(function(){for(var o=t._v,a=1==t._s,i=0,c=function(f){var y,_,T,p=a?f.ok:f.fail,m=f.resolve,g=f.reject,u=f.domain;try{p?(a||(2==t._h&&ca(t),t._h=1),!0===p?y=o:(u&&u.enter(),y=p(o),u&&(u.exit(),T=!0)),y===f.promise?g(Pn("Promise-chain cycle")):(_=Dn(y))?_.call(y,m,g):m(y)):g(o)}catch(C){u&&!T&&u.exit(),g(C)}};n.length>i;)c(n[i++]);t._c=[],t._n=!1,r&&!t._h&&sa(t)})}},sa=function(t){An.call(w,function(){var o,a,i,r=t._v,n=$n(t);if(n&&(o=jt(function(){Ie?be.emit("unhandledRejection",r,t):(a=w.onunhandledrejection)?a({promise:t,reason:r}):(i=w.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=Ie||$n(t)?2:1),t._a=void 0,n&&o.e)throw o.v})},$n=function(t){return 1!==t._h&&0===(t._a||t._c).length},ca=function(t){An.call(w,function(){var r;Ie?be.emit("rejectionHandled",t):(r=w.onrejectionhandled)&&r({promise:t,reason:t._v})})},Te=function(t){var r=this;r._d||(r._d=!0,(r=r._w||r)._v=t,r._s=2,r._a||(r._a=r._c.slice()),$t(r,!0))},Et=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Pn("Promise can't be resolved itself");(n=Dn(t))?kn(function(){var o={_w:r,_d:!1};try{n.call(t,Q(Et,o,1),Q(Te,o,1))}catch(a){Te.call(o,a)}}):(r._v=t,r._s=1,$t(r,!1))}catch(o){Te.call({_w:r,_d:!1},o)}}};Le||(ae=function(r){(function(t,r,n,o){if(!(t instanceof r)||"_h"in t)throw TypeError("Promise: incorrect invocation!")})(this,ae),Ze(r),Xe.call(this);try{r(Q(Et,this,1),Q(Te,this,1))}catch(n){Te.call(this,n)}},(Xe=function(r){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,r,n){for(var o in r)ye(t,o,r[o],undefined);return t}(ae.prototype,{then:function(r,n){var o=je(cn(this,ae));return o.ok="function"!=typeof r||r,o.fail="function"==typeof n&&n,o.domain=Ie?be.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&$t(this,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),jn=function(){var t=new Xe;this.promise=t,this.resolve=Q(Et,t,1),this.reject=Q(Te,t,1)},It.f=je=function(t){return t===ae||t===Ln?new jn(t):In(t)}),I(I.G+I.W+I.F*!Le,{Promise:ae}),Lt(ae,le),r=w.Promise,Me&&r&&!r[Mn]&&Ue.f(r,Mn,{configurable:!0,get:function(){return this}}),Ln=ee[le],I(I.S+I.F*!Le,le,{reject:function(r){var n=je(this);return(0,n.reject)(r),n.promise}}),I(I.S+I.F*!Le,le,{resolve:function(r){return function(t,r){if(B(t),te(r)&&r.constructor===t)return r;var n=It.f(t);return(0,n.resolve)(r),n.promise}(this,r)}}),I(I.S+I.F*!(Le&&function(t,r){if(!Zn)return!1;var n=!1;try{var o=[7],a=o[Dt]();a.next=function(){return{done:n=!0}},o[Dt]=function(){return a},function(t){ae.all(t).catch(We)}(o)}catch(i){}return n}()),le,{all:function(r){var n=this,o=je(n),a=o.resolve,i=o.reject,c=jt(function(){var f=[],p=0,m=1;mn(r,!1,function(g){var u=p++,y=!1;f.push(void 0),m++,n.resolve(g).then(function(_){y||(y=!0,f[u]=_,--m||a(f))},i)}),--m||a(f)});return c.e&&i(c.v),o.promise},race:function(r){var n=this,o=je(n),a=o.reject,i=jt(function(){mn(r,!1,function(c){n.resolve(c).then(o.resolve,a)})});return i.e&&a(i.v),o.promise}});var Nt=q("unscopables"),Rt=Array.prototype;null==Rt[Nt]&&z(Rt,Nt,{});var Ut=function(t){Rt[Nt][t]=!0},Ve=function(t,r){return{value:r,done:!!t}},la=Me?Object.defineProperties:function(r,n){B(r);for(var c,o=Ae(n),a=o.length,i=0;a>i;)Ue.f(r,c=o[i++],n[c]);return r},ua=gt("IE_PROTO"),qt=function(){},Ft="prototype",Ke=function(){var a,t=Re("iframe"),r=ht.length;for(t.style.display="none",St.appendChild(t),t.src="javascript:",(a=t.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),Ke=a.F;r--;)delete Ke[Ft][ht[r]];return Ke()},pa=Object.create||function(r,n){var o;return null!==r?(qt[Ft]=B(r),o=new qt,qt[Ft]=null,o[ua]=r):o=Ke(),void 0===n?o:la(o,n)},En={};z(En,q("iterator"),function(){return this});var Nn=gt("IE_PROTO"),da=Object.prototype,va=Object.getPrototypeOf||function(t){return t=Ye(t),_e(t,Nn)?t[Nn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?da:null},De=q("iterator"),Jt=!([].keys&&"next"in[].keys()),et="values",Un=function(){return this},qn=function(t,r,n,o,a,i,c){!function(t,r,n){t.prototype=pa(En,{next:tn(1,n)}),Lt(t,"Array Iterator")}(n,0,function(){var t=this._t,r=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ve(1)):Ve(0,"keys"==r?n:"values"==r?t[n]:[n,t[n]])});var A,x,O,f=function($){if(!Jt&&$ in u)return u[$];switch($){case"keys":case et:return function(){return new n(this,$)}}return function(){return new n(this,$)}},p=r+" Iterator",g=!1,u=t.prototype,y=u[De]||u["@@iterator"]||u[a],_=y||f(a),T=f("entries"),C=u.entries||y;if(C&&(O=va(C.call(new t)))!==Object.prototype&&O.next&&(Lt(O,p,!0),"function"!=typeof O[De]&&z(O,De,Un)),y&&y.name!==et&&(g=!0,_=function(){return y.call(this)}),(Jt||g||!u[De])&&z(u,De,_),ce[r]=_,ce[p]=Un,void(A={values:_,keys:f("keys"),entries:T}))for(x in A)x in u||ye(u,x,A[x]);else I(I.P+I.F*(Jt||g),r,A);return A}(Array,"Array",function(t,r){this._t=mt(t),this._i=0,this._k=r},0,"values");ce.Arguments=ce.Array,Ut("keys"),Ut("values"),Ut("entries");for(var Fn=q("iterator"),Jn=q("toStringTag"),Yn=ce.Array,Gn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Bn=Ae(Gn),Yt=0;Yt<Bn.length;Yt++){var nt,tt=Bn[Yt],ha=Gn[tt],Qn=w[tt],ve=Qn&&Qn.prototype;if(ve&&(ve[Fn]||z(ve,Fn,Yn),ve[Jn]||z(ve,Jn,tt),ce[tt]=Yn,ha))for(nt in qn)ve[nt]||ye(ve,nt,qn[nt],!0)}var zn={};zn[q("toStringTag")]="z",zn+""!="[object z]"&&ye(Object.prototype,"toString",function(){return"[object "+Be(this)+"]"},!0),function(t,r){var n=(ee.Object||{})[t]||Object[t],o={keys:function(r){return Ae(Ye(r))}};I(I.S+I.F*se(function(){n(1)}),"Object",o)}("keys");var Ca={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(r,n){return function(t,r){return r=r||{},new Promise(function(n,o){var a=new XMLHttpRequest,i=[],c=[],f={},p=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(JSON.parse(a.responseText))},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:p,headers:{keys:function(){return i},entries:function(){return c},get:function(g){return f[g.toLowerCase()]},has:function(g){return g.toLowerCase()in f}}}};for(var m in a.open(r.method||"get",t,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(g,u,y){i.push(u=u.toLowerCase()),c.push([u,y]),f[u]=f[u]?f[u]+","+y:y}),n(p())},a.onerror=o,a.withCredentials="include"==r.credentials,r.headers)a.setRequestHeader(m,r.headers[m]);a.send(r.body||null)})}("".concat(r,"?").concat(function(r){return Object.keys(r).map(function(n){var o=r[n];return"".concat(n,"=").concat(encodeURIComponent(o))}).join("&")}(n)),{mode:"cors"}).then(function(o){return o.json()})}},Sa=function(){function t(r){(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,t),r=Object.assign({},Ca,r||{}),this.options=r,this.state={currentRequest:null,pendingRequest:null},this.selected=null}return function(t,r,n){r&&vn(t.prototype,r)}(t,[{key:"_getAutocompleteResponse",value:function(n,o,a,i,c,f){var p=Object.assign({},this.options.params,{q:n,type:this.options.type,caretpos:o,supplerendebynavn:c,stormodtagerpostnumre:f,multilinje:!0});return this.options.fuzzy&&(p.fuzzy=""),i&&(p.adgangsadresseid=i),a&&(p.startfra="adgangsadresse"),this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),p)}},{key:"_scheduleRequest",value:function(n){null!==this.state.currentRequest?this.state.pendingRequest=n:(this.state.currentRequest=n,this._executeRequest())}},{key:"_executeRequest",value:function(){var c,f,n=this,o=this.state.currentRequest,a=null,i=!1;if(o.selected){var p=o.selected;if(p.type===this.options.type)return this.options.selectCallback(p),this.selected=p,void this._requestCompleted();a="adgangsadresse"===p.type?p.data.id:null,i="vejnavn"===p.type,c=p.tekst,f=p.caretpos}else c=o.text,f=o.caretpos;if(o.selectedId){var m={id:o.selectedId,type:this.options.type};return this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),m).then(function(g){return n._handleResponse(o,g)},function(g){return n._handleFailedRequest(o,g)})}o.selected||o.text.length>=this.options.minLength?this._getAutocompleteResponse(c,f,i,a,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(g){return n._handleResponse(o,g)},function(g){return n._handleFailedRequest(o,g)}):this._handleResponse(o,[])}},{key:"_handleFailedRequest",value:function(n,o){var r,a=this;return console.error("DAWA request failed",o),(r=this.options.retryDelay,new Promise(function(n){return setTimeout(n,r)})).then(function(){a.state.pendingRequest||a._scheduleRequest(n),a._requestCompleted()})}},{key:"_handleResponse",value:function(n,o){if(n.selected)if(1===o.length){var a=o[0];a.type===this.options.type?this.options.selectCallback(a):this.state.pendingRequest||(this.state.pendingRequest={selected:a})}else this.options.renderCallback&&this.options.renderCallback(o);else n.selectedId?1===o.length&&(this.selected=o[0],this.options.initialRenderCallback(o[0].tekst)):this.options.renderCallback&&this.options.renderCallback(o);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(n){this.options.renderCallback=n}},{key:"setInitialRenderCallback",value:function(n){this.options.initialRenderCallback=n}},{key:"setSelectCallback",value:function(n){this.options.selectCallback=n}},{key:"update",value:function(n,o){this._scheduleRequest({text:n,caretpos:o})}},{key:"select",value:function(n){this._scheduleRequest({selected:n})}},{key:"selectInitial",value:function(n){this._scheduleRequest({selectedId:n})}},{key:"destroy",value:function(){}}]),t}();const xa=["input"];function Ma(t,r){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title",2),e._uU(3," Adresses\xf8gning "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content"),e.TgZ(5,"div",3),e._UZ(6,"input",4,5),e.qZA(),e.qZA())}const Za=function(){return[0,.8]};let Aa=(()=>{class t{constructor(n,o){this.mapService=n,this.store=o,this.showModal$=this.store.select("mapTools","activatedMapTools").pipe((0,G.U)(a=>a.includes("geoSearch")))}ngAfterViewInit(){setTimeout(()=>{this.autocomplete=function(t,r){r=Object.assign({select:function(){return null}},r);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn","type"].reduce(function(i,c){return r.hasOwnProperty(c)&&(i[c]=r[c]),i},{});n.type||(n.type=r.adgangsadresserOnly?"adgangsadresse":"adresse");var o=new Sa(n),a=function(r,n){var o=n.onSelect,a=n.onTextChange,i=n.render||Eo,c=!1,f="",p=0,m=document.createElement("div");r.parentNode.insertBefore(m,r.nextSibling);var _,u={caretpos:2,inputText:"",selected:0,focused:document.activeElement===r,suggestions:[]},y=function(k){var E=k.value,Se=k.selectionStart;u.caretpos=Se,u.inputText=E,function(k,E){(f!==k||p!==E)&&(a(k,E),f=k,p=E)}(E,Se)},T=function(k){var E=u.suggestions[k];u.inputText=E.tekst,u.caretpos=E.caretpos,u.suggestions=[],o(E),_(!0)},C=function(k){var E=window.event?k.keyCode:k.which;if(u.suggestions.length>0&&u.focused){if(40===E)u.selected=(u.selected+1)%u.suggestions.length,_();else if(38===E)u.selected=(u.selected-1+u.suggestions.length)%u.suggestions.length,_();else{if(13!==E&&9!==E)return!0;T(u.selected)}return k.preventDefault(),!1}},A=function(){u.focused=!0,_()},x=function(){return u.focused=!1,_(),!1},O=function(k){y(k.target)},$=function(k){return y(k.target)},L=!1,ie=!1;return(_=function(k){k&&(ie=!0),L||(L=!0,requestAnimationFrame(function(){c||(L=!1,ie&&(r.value=u.inputText,r.setSelectionRange(u.caretpos,u.caretpos)),ie=!1,i(m,u,function(E){return T(E)},n.multiline))}))})(),r.addEventListener("keydown",C),r.addEventListener("blur",x),r.addEventListener("focus",A),r.addEventListener("input",O),r.addEventListener("mouseup",$),r.setAttribute("aria-autocomplete","list"),r.setAttribute("autocomplete","off"),{destroy:function(){c=!0,r.removeEventListener("keydown",C),r.removeEventListener("blur",x),r.removeEventListener("focus",A),r.removeEventListener("input",O),r.removeEventListener("mouseup",$),pn(m,function(){}),m.remove()},setSuggestions:function(k){u.suggestions=k,u.selected=0,_()},selectAndClose:function(k){u.inputText=k,u.caretpos=k.length,u.suggestions=[],u.selected=0,_(!0)}}}(t,{onSelect:function(c){o.select(c)},onTextChange:function(c,f){o.update(c,f)},render:r.render,multiline:r.multiline||!1});return o.setRenderCallback(function(i){return a.setSuggestions(i)}),o.setSelectCallback(function(i){a.selectAndClose(i.tekst),r.select(i)}),o.setInitialRenderCallback(function(i){return a.selectAndClose(i)}),r.id&&o.selectInitial(r.id),{id:function(c){return o.selectInitial(c)},destroy:function(){return a.destroy()},selected:function(){return o.selected}}}(this.input.nativeElement,{select:n=>{const o=[n.data.x,n.data.y];this.mapService.removeLayer("marker"),this.mapService.addMarker(o),this.mapService.flyTo(o)},adgangsadresserOnly:!0})},250),setTimeout(()=>{this.input.nativeElement.focus()},500)}ngOnDestroy(){this.autocomplete.destroy(),console.log("DESTROY SEARCH")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.S),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-geo-search"]],viewQuery:function(n,o){if(1&n&&e.Gf(xa,5),2&n){let a;e.iGM(a=e.CRH())&&(o.input=a.first)}},decls:3,vars:6,consts:[[3,"isOpen","initialBreakpoint","breakpoints"],["color","primary"],[1,"ion-text-center"],[1,"autocomplete-container"],["placeholder","S\xf8g adresse","type","search","id","dawa-autocomplete-input"],["input",""]],template:function(n,o){1&n&&(e.TgZ(0,"ion-modal",0),e.ALo(1,"async"),e.YNc(2,Ma,8,0,"ng-template"),e.qZA()),2&n&&e.Q6J("isOpen",e.lcZ(1,3,o.showModal$))("initialBreakpoint",.8)("breakpoints",e.DdM(5,Za))},directives:[v.ki,v.Gu,v.sr,v.wd,v.W2],pipes:[P.Ov],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:30em;padding:10px;margin:auto}.autocomplete-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border-radius:5px;border:.01px solid var(--ion-color-medium)}"],changeDetection:0}),t})();var ka=S(591),Pa=S(9385);let Oa=(()=>{class t{constructor(n,o,a){this.mapService=n,this.notification=o,this.store=a,this.showModal=!1,this.adandon$=new Ht.xQ,this.dawaInfo$=new ka.X(null),this.disableAddressButton$=this.store.select("map","viewParams").pipe((0,G.U)(i=>(null==i?void 0:i.zoom)<15))}onShowPOI(){this.mapService.removeLayer("adresser"),this.mapService.addAdresserWithinViewExtent(),this.notification.presentToast({message:"Klik p\xe5 adresse for info",duration:2e3,position:"top",color:"secondary"})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.S),e.Y36(Pa.w),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-info-tool"]],decls:4,vars:6,consts:[["color","tertiary",3,"disabled","click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-button",0),e.NdJ("click",function(){return o.onShowPOI()}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"async"),e.qZA()),2&n&&(e.Q6J("disabled",e.lcZ(1,2,o.disableAddressButton$)),e.xp6(2),e.hij(" ",!1===e.lcZ(3,4,o.disableAddressButton$)?"Hent adresser":"Zoom l\xe6ngere ind for info","\n"))},directives:[v.YG],pipes:[P.Ov],styles:["ion-chip[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"],changeDetection:0}),t})();function Ia(t,r){1&t&&e._UZ(0,"ion-spinner",4)}let ja=(()=>{class t{constructor(n,o){this.mapService=n,this.mapStoreService=o,this.tracking$=this.mapStoreService.mapstate$.pipe((0,Ne.j)("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe((0,Ne.j)("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.S),e.Y36(ct.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e.NdJ("click",function(){return o.onToggleGeolocate()}),e._UZ(2,"ion-icon",2),e.YNc(3,Ia,1,0,"ion-spinner",3),e.ALo(4,"async"),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("color",o.tracking?"danger":"primary"),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,2,o.locating$)))},directives:[v.IJ,v.W4,v.gu,P.O5,v.PQ],pipes:[P.Ov],styles:[""],changeDetection:0}),t})();var Gt=S(8200),La=S(2880);function Da(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("Point")}),e._UZ(2,"i",3),e.qZA(),e.TgZ(3,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("LineString")}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("Polygon")}),e._UZ(6,"i",5),e.qZA(),e.TgZ(7,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onEndDraw()}),e._UZ(8,"ion-icon",6),e.qZA(),e.BQk()}}function $a(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",9),e.TgZ(1,"ion-icon",10),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onDisableEditMode()}),e.qZA(),e.qZA()}}function Ea(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onUndo()}),e._UZ(1,"ion-icon",12),e.qZA()}}function Na(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onDelete()}),e._UZ(1,"ion-icon",13),e.qZA()}}function Ra(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onSave()}),e._UZ(1,"ion-icon",14),e.qZA()}}function Ua(t,r){if(1&t&&(e.ynx(0),e.YNc(1,$a,2,0,"ion-fab-button",7),e.ALo(2,"async"),e.YNc(3,Ea,2,0,"ion-fab-button",8),e.ALo(4,"async"),e.YNc(5,Na,2,0,"ion-fab-button",8),e.ALo(6,"async"),e.YNc(7,Ra,2,0,"ion-fab-button",8),e.ALo(8,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,n.drawConfig$).showBack),e.xp6(2),e.Q6J("ngIf","Point"!==n.drawGeometry&&e.lcZ(4,6,n.drawConfig$).showUndo),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,8,n.drawConfig$).showDelete),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,10,n.drawConfig$).showSave)}}function qa(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-header"),e._UZ(1,"ion-toolbar",15),e.qZA(),e.TgZ(2,"ion-content"),e.TgZ(3,"form",16),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onAddFeature()}),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",17),e.qZA(),e.TgZ(6,"ion-item"),e._UZ(7,"ion-textarea",18),e.qZA(),e.TgZ(8,"ion-button",19),e._uU(9,"Gem geometri"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.featureProperties)}}const Fa=function(){return[0,.4,.5]};let Ja=(()=>{class t{constructor(n,o,a){this.mapService=n,this.fb=o,this.store=a,this.showModal=!1,this.drawConfig$=this.store.select("drawTool")}ngOnInit(){this.store.dispatch(Gt.T_()),this.featureProperties=this.fb.group({name:["",[N.kI.required]],description:[""]})}onStartDraw(n){console.log("ADNED"),this.mapService.removeClickInfo(),this.mapService.removeDrawTool(),this.drawGeometry=n,this.mapService.activateDrawTool(n),this.store.dispatch(Gt.vs({change:{prop:"inEditMode",value:!0}}))}onEndDraw(){this.store.dispatch(en.lu({tool:"draw"})),this.mapService.removeDrawTool(),this.mapService.addClickInfo()}onDisableEditMode(){this.store.dispatch(Gt.vs({change:{prop:"inEditMode",value:!1}}))}onUndo(){this.mapService.removeLastDrawPoint()}onDelete(){this.mapService.removeDrawTool(),this.onStartDraw(this.drawGeometry)}onSave(){this.mapService.finishDrawing(),this.mapService.changeLayerStyle("draw",La.l.default),this.onDisableEditMode(),this.showModal=!0}onAddFeature(){this.store.dispatch(Xt.TN({properties:this.featureProperties.value})),this.showModal=!1}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.S),e.Y36(N.qu),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-draw-tool"]],decls:6,vars:10,consts:[[4,"ngIf"],[3,"isOpen","initialBreakpoint","breakpoints"],["size","small","color","primary",3,"click"],[1,"fg-point","fg-lg"],[1,"fg-polyline-pt","fg-lg"],[1,"fg-polygon-pt","fg-lg"],["name","close"],["size","small","color","secondary",4,"ngIf"],["size","small","color","secondary",3,"click",4,"ngIf"],["size","small","color","secondary"],["name","arrow-back-outline",3,"click"],["size","small","color","secondary",3,"click"],["name","arrow-undo-circle-outline"],["name","trash"],["name","save"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(n,o){1&n&&(e.YNc(0,Da,9,0,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Ua,9,12,"ng-container",0),e.ALo(3,"async"),e.TgZ(4,"ion-modal",1),e.YNc(5,qa,10,1,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf",!1===e.lcZ(1,5,o.drawConfig$).inEditMode),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,7,o.drawConfig$).inEditMode),e.xp6(2),e.Q6J("isOpen",o.showModal)("initialBreakpoint",.4)("breakpoints",e.DdM(9,Fa)))},directives:[P.O5,v.ki,v.W4,v.gu,v.Gu,v.sr,v.W2,N._Y,N.JL,N.sg,v.Ie,v.pK,v.j9,N.JJ,N.u,v.g2,v.YG],pipes:[P.Ov],styles:[""],changeDetection:0}),t})();var Hn=S(6939);let Ya=(()=>{class t{constructor(n){this.store=n}ngOnInit(){this.store.dispatch(Vt.js())}onApprovePosition(){this.store.dispatch(Hn.Yw()),this.store.dispatch(Hn.Kl())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-photo-tool"]],decls:2,vars:0,consts:[["size","large","color","tertiary",1,"ion-margin",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-button",0),e.NdJ("click",function(){return o.onApprovePosition()}),e._uU(1," v\xe6lg placering\n"),e.qZA())},directives:[v.YG],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}"],changeDetection:0}),t})();var Ga=S(760),Ba=S(3722),Qa=S(1086),za=S(7224),Ha=S(1406),Wa=S(8780),Xa=S(8241),Va=S(2111);function Ka(t,r){1&t&&(e.TgZ(0,"ion-badge"),e._uU(1,"Zoom ind for at v\xe6lge matrikler"),e.qZA())}function ei(t,r){1&t&&(e.TgZ(0,"ion-badge"),e._uU(1,"Tryk p\xe5 kortet for at tegne"),e.qZA())}function ti(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab",7),e.TgZ(1,"ion-fab-button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().toggleModal()}),e._UZ(2,"ion-icon",9),e.qZA(),e.qZA()}}function ni(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ion-header"),e._UZ(1,"ion-toolbar",10),e.qZA(),e.TgZ(2,"ion-content"),e.TgZ(3,"form",11),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onCreateProject()}),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",12),e.qZA(),e.TgZ(6,"ion-item"),e._UZ(7,"ion-textarea",13),e.qZA(),e.TgZ(8,"ion-button",14),e._uU(9,"Opret projekt"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.project)}}const ri=function(){return[0,.4,.5]};let oi=(()=>{class t{constructor(n,o,a,i,c,f,p,m){this.router=n,this.fb=o,this.mapService=a,this.mapStore=i,this.projectStore=c,this.uiState=f,this.dawaService=p,this.store=m,this.showModal=!1,this.disableMatrikel$=this.mapStore.mapstate$.pipe((0,G.U)(g=>{var u;return(null===(u=g.view)||void 0===u?void 0:u.zoom)<15})),this.selectedArea$=this.store.select("map","selectedFeatures"),this.drawnGeometry$=this.store.select("map","drawnFeature")}ngOnInit(){this.project=this.fb.group({name:["",[N.kI.required]],description:[""]})}toggleModal(){let n;switch(this.showModal=!this.showModal,this.geomSource){case"jordstykke":n=this.mapStore.selectedFeatureAsWKT$;break;case"draw":n=this.mapStore.drawnGeometry$;break;case"bounds":const o=this.mapService.getViewExtent();n=(0,Qa.of)(this.mapService.featureAsWKT(o,"EPSG:4326","EPSG:25832"))}n.pipe((0,za.P)(),(0,G.U)(o=>{const c=(new Ba.Z).readFeature(o).getGeometry().getExtent();return this.mapService.transform((0,Ga.qg)(c),"EPSG:25832","EPSG:4326")}),(0,Ha.b)(o=>this.dawaService.reverseGeocode(o[0],o[1])),(0,st.b)(o=>this.project.patchValue({name:`${o.vejnavn} ${o.husnr}`,description:`N\xe6r ${o.adressebetegnelse} - Matrikel: ${o.matrikelnr}, ${o.ejerlav.navn}`}))).subscribe()}selectionMethodChanged(n){switch(this.geomSource=n.detail.value,this.geomSource){case"jordstykke":this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),this.mapService.addMatrikelWithinViewExtent(),this.uiState.removeMapTool("draw");break;case"draw":this.uiState.updateDrawUiState("inEditMode",!0),this.uiState.updateDrawUiState("showBack",!1),this.uiState.updateDrawUiState("showSave",!1),this.mapService.removeLayer("jordstykke"),this.mapService.removeDrawTool(),this.mapService.activateDrawTool("Polygon"),this.uiState.addMapTool("draw");break;case"bounds":this.mapService.removeLayer("jordstykke"),this.uiState.removeMapTool("draw"),this.mapService.removeDrawTool()}}onCreateProject(){"draw"===this.geomSource&&(this.mapService.finishDrawing(),this.uiState.removeMapTool("draw")),this.toggleModal(),this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),setTimeout(()=>{this.uiState.removeAllMapTools(),this.projectStore.addProject(this.project.value,this.geomSource),this.router.navigateByUrl("/app/projects")},250)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(xe.F0),e.Y36(N.qu),e.Y36(re.S),e.Y36(ct.C),e.Y36(Wa.c),e.Y36(Xa.J),e.Y36(Va.r),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-save-project"]],decls:18,vars:14,consts:[[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed",4,"ngIf"],["mode","md",3,"ionChange"],["value","jordstykke",3,"disabled"],["value","draw"],["value","bounds"],[3,"isOpen","initialBreakpoint","breakpoints"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","checkmark-outline"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(n,o){1&n&&(e.YNc(0,Ka,2,0,"ion-badge",0),e.ALo(1,"async"),e.YNc(2,ei,2,0,"ion-badge",0),e.YNc(3,ti,3,0,"ion-fab",1),e.ALo(4,"async"),e.TgZ(5,"ion-segment",2),e.NdJ("ionChange",function(i){return o.selectionMethodChanged(i)}),e.TgZ(6,"ion-segment-button",3),e.ALo(7,"async"),e.TgZ(8,"ion-label"),e._uU(9,"Matrikel"),e.qZA(),e.qZA(),e.TgZ(10,"ion-segment-button",4),e.TgZ(11,"ion-label"),e._uU(12,"Tegn"),e.qZA(),e.qZA(),e.TgZ(13,"ion-segment-button",5),e.TgZ(14,"ion-label"),e._uU(15,"Kortudsnit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"ion-modal",6),e.YNc(17,ni,10,1,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf",e.lcZ(1,7,o.disableMatrikel$)&&void 0===o.geomSource),e.xp6(2),e.Q6J("ngIf","draw"===o.geomSource),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,9,o.selectedArea$)&&"jordstykke"===o.geomSource||"draw"===o.geomSource||"bounds"===o.geomSource),e.xp6(3),e.Q6J("disabled",e.lcZ(7,11,o.disableMatrikel$)),e.xp6(10),e.Q6J("isOpen",o.showModal)("initialBreakpoint",.4)("breakpoints",e.DdM(13,ri)))},directives:[P.O5,v.cJ,v.QI,v.GO,v.Q$,v.ki,v.yp,v.IJ,v.W4,v.gu,v.Gu,v.sr,v.W2,N._Y,N.JL,N.sg,v.Ie,v.pK,v.j9,N.JJ,N.u,v.g2,v.YG],pipes:[P.Ov],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}.fab-vertical-bottom[_ngcontent-%COMP%]{bottom:55px}"],changeDetection:0}),t})();function ai(t,r){1&t&&e._UZ(0,"ion-progress-bar",4)}function ii(t,r){1&t&&e._UZ(0,"app-geo-search")}function si(t,r){1&t&&e._UZ(0,"app-info-tool",5)}function ci(t,r){1&t&&e._UZ(0,"app-map-geolocation")}function li(t,r){1&t&&e._UZ(0,"app-map-draw-tool")}function ui(t,r){1&t&&e._UZ(0,"app-photo-tool",5)}function pi(t,r){1&t&&e._UZ(0,"app-save-project",5)}function fi(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"ion-chip",7),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"ion-icon",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().onClearProject()}),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,1,n.selectedProject$).name)}}const di=[{path:"",component:(()=>{class t{constructor(n,o,a,i,c,f){this.rounter=n,this.route=o,this.mapStore=a,this.mapService=i,this.modalController=c,this.store=f,this.abandon$=new Ht.xQ,this.loading$=this.mapStore.mapstate$.pipe((0,G.U)(({loadingFeatureInfo:p,loadingLayer:m})=>({loadingFeatureInfo:p,loadingLayer:m})),(0,G.U)(p=>Object.values(p).some(m=>m))),this.activatedMapTools$=this.store.select("mapTools","activatedMapTools"),this.selectedProject$=this.store.select("project","selectedProject")}ngOnInit(){this.mapStore.mapstate$.pipe((0,Wt.R)(this.abandon$),(0,Ne.j)("loadingFeatureInfo")).subscribe(),this.route.queryParams.pipe((0,ur.q)(1),(0,st.b)(o=>{const a=[Number(o.x),Number(o.y)],i=Number(o.zoom);a[0]&&setTimeout(()=>{this.mapService.setView({center:a,zoom:i})},3e3)})).subscribe(),this.mapStore.mapstate$.pipe((0,Ne.j)("view"),(0,G.U)(o=>({x:null==o?void 0:o.center[0],y:null==o?void 0:o.center[1],zoom:null==o?void 0:o.zoom}))).pipe((0,Wt.R)(this.abandon$),(0,st.b)(o=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:o})})).subscribe()}ngOnDestroy(){this.abandon$.next()}ionViewDidEnter(){this.mapService.resize()}onClearProject(){this.store.dispatch(Xt._G()),this.store.dispatch(Vt.jd())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(xe.F0),e.Y36(xe.gz),e.Y36(ct.C),e.Y36(re.S),e.Y36(v.IN),e.Y36(oe.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-tap-map"]],decls:22,vars:24,consts:[["type","indeterminate","color","tertiary",4,"ngIf"],[4,"ngIf"],["class","full-width-bottom-tool",4,"ngIf"],["class","current-project",4,"ngIf"],["type","indeterminate","color","tertiary"],[1,"full-width-bottom-tool"],[1,"current-project"],["color","primary","outline","",1,"project-chip"],["name","close-circle",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-content"),e.YNc(1,ai,1,0,"ion-progress-bar",0),e.ALo(2,"async"),e.TgZ(3,"app-map"),e._UZ(4,"app-map-layers-control"),e._UZ(5,"app-map-legend-fab"),e._UZ(6,"app-map-feature-info"),e.TgZ(7,"app-map-tools"),e.YNc(8,ii,1,0,"app-geo-search",1),e.ALo(9,"async"),e.YNc(10,si,1,0,"app-info-tool",2),e.ALo(11,"async"),e.YNc(12,ci,1,0,"app-map-geolocation",1),e.ALo(13,"async"),e.YNc(14,li,1,0,"app-map-draw-tool",1),e.ALo(15,"async"),e.YNc(16,ui,1,0,"app-photo-tool",2),e.ALo(17,"async"),e.YNc(18,pi,1,0,"app-save-project",2),e.ALo(19,"async"),e.qZA(),e.qZA(),e.YNc(20,fi,6,3,"div",3),e.ALo(21,"async"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,8,o.loading$)),e.xp6(7),e.Q6J("ngIf",e.lcZ(9,10,o.activatedMapTools$).includes("geoSearch")),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,12,o.activatedMapTools$).includes("addressInfo")),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(13,14,o.activatedMapTools$).includes("saveProject")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,16,o.activatedMapTools$).includes("draw")),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,18,o.activatedMapTools$).includes("takePhoto")),e.xp6(2),e.Q6J("ngIf",e.lcZ(19,20,o.activatedMapTools$).includes("saveProject")),e.xp6(2),e.Q6J("ngIf",null!==e.lcZ(21,22,o.selectedProject$)))},directives:[v.W2,P.O5,dr,br,wr,Dr,Nr,v.X7,Aa,Oa,ja,Ja,Ya,oi,v.hM,v.Q$,v.gu],pipes:[P.Ov],styles:[".current-project[_ngcontent-%COMP%]{position:fixed;z-index:100;top:10px;width:100%;text-align:center}.project-chip[_ngcontent-%COMP%]{background:rgba(255,255,255,.4)}ion-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0px;z-index:100}app-map-draw-tool[_ngcontent-%COMP%]{position:fixed;top:calc(50% - 76px);z-index:100;background-color:rgba(var(--ion-color-tertiary-rgb),.8);border-radius:28px}.full-width-bottom-tool[_ngcontent-%COMP%]{position:fixed;z-index:10;bottom:0;width:100%}app-info-tool[_ngcontent-%COMP%], app-photo-tool[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),t})()}];let vi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[xe.Bz.forChild(di)],xe.Bz]}),t})(),mi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[v.Pc,P.ez,N.u5,N.UX,vi]]}),t})()}}]);