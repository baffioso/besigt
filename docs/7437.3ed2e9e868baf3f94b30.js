(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[7437],{7437:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProjectDetailPageModule:()=>U});var o=n(6274),i=n(3324),c=n(4683),a=n(4337),s=n(1855),r=n(2812),l=n(8561),p=n(4089),g=n(714),d=n(7272),u=n(1100),Z=n(7681),h=n(3220),m=n(9450);function f(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"ion-card"),d.TgZ(2,"ion-card-header"),d.TgZ(3,"ion-card-subtitle"),d._uU(4),d.ALo(5,"date"),d.qZA(),d.TgZ(6,"ion-card-title"),d._uU(7),d.qZA(),d.qZA(),d.TgZ(8,"ion-card-content"),d._uU(9),d.qZA(),d.qZA(),d.BQk()),2&e){const e=d.oxw().ngIf;d.xp6(4),d.hij("Oprettet: ",d.lcZ(5,3,e.inserted_at)," "),d.xp6(3),d.Oqu(e.name),d.xp6(2),d.hij(" ",e.description," ")}}function b(e,t){1&e&&d._UZ(0,"img",13),2&e&&d.Q6J("src",t.$implicit,d.LSH)}function T(e,t){if(1&e&&(d.ynx(0),d.YNc(1,b,1,1,"img",12),d.ALo(2,"async"),d.BQk()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",d.lcZ(2,1,e.photos$))}}function A(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"ion-header"),d.TgZ(2,"ion-toolbar",1),d.TgZ(3,"ion-buttons",2),d._UZ(4,"ion-back-button",3),d.qZA(),d.TgZ(5,"ion-title"),d._uU(6),d.qZA(),d.TgZ(7,"ion-buttons",4),d.TgZ(8,"ion-button"),d._UZ(9,"ion-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"ion-segment",6),d.NdJ("ionChange",function(t){return d.CHM(e),d.oxw().onTabChange(t)})("ngModelChange",function(t){return d.CHM(e),d.oxw().selectedTab=t}),d.TgZ(11,"ion-segment-button",7),d._UZ(12,"ion-icon",8),d.qZA(),d.TgZ(13,"ion-segment-button",9),d._UZ(14,"ion-icon",10),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"ion-content",11),d.YNc(16,f,10,5,"ng-container",0),d.YNc(17,T,3,3,"ng-container",0),d.qZA(),d.BQk()}if(2&e){const e=t.ngIf,n=d.oxw();d.xp6(6),d.Oqu(e.name),d.xp6(4),d.Q6J("ngModel",n.selectedTab),d.xp6(6),d.Q6J("ngIf","detail"===n.selectedTab),d.xp6(1),d.Q6J("ngIf","photos"===n.selectedTab)}}const q=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i){this.projectStore=e,this.route=t,this.supabase=n,this.domSanitizer=o,this.notification=i,this.selectedTab="detail",this.project$=this.route.paramMap.pipe((0,r.w)(e=>this.projectStore.projects$.pipe((0,l.U)(t=>t.find(t=>t.id===e.get("id")))))),this.photos$=this.project$.pipe((0,p.b)(()=>(0,s.mG)(this,void 0,void 0,function*(){this.loader=yield this.notification.presentLoading("Henter billeder...")})),(0,l.U)(e=>e.images.map(e=>e.file_name.replace("images/",""))),(0,r.w)(e=>{const t=e.map(e=>this.supabase.downloadImage(e));return(0,g.D)(t).pipe((0,l.U)(e=>e.map(e=>this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e.data)))))}),(0,p.b)(()=>{this.loader.dismiss()}))}ngOnInit(){}onTabChange(e){this.selectedTab=e.detail.value}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.c),d.Y36(a.gz),d.Y36(Z.T),d.Y36(h.H7),d.Y36(m.w))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-project-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],["color","primary",1,"ion-text-center"],["slot","start"],["aria-label","Tilbage","mode","md","defaultHref","/app/projects"],["slot","end"],["name","pencil"],["color","secondary",3,"ngModel","ionChange","ngModelChange"],["value","detail"],["name","information-circle"],["value","photos"],["name","camera"],["fullscreen",""],[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(e,t){1&e&&(d.YNc(0,A,18,4,"ng-container",0),d.ALo(1,"async")),2&e&&d.Q6J("ngIf",d.lcZ(1,1,t.project$))},directives:[o.O5,c.Gu,c.sr,c.Sm,c.oU,c.cs,c.wd,c.YG,c.gu,c.cJ,c.QI,i.JJ,i.On,c.GO,c.W2,c.PM,c.Zi,c.tO,c.gZ,c.FN,o.sg],pipes:[o.Ov,o.uU],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-light)}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.Bz.forChild(q)],a.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.ez,i.u5,c.Pc,x]]}),e})()}}]);