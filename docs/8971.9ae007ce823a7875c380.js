(self.webpackChunkbesigt=self.webpackChunkbesigt||[]).push([[8971],{8971:(t,e,n)=>{"use strict";n.r(e),n.d(e,{MapPageModule:()=>T});var o=n(5401),r=n(222),i=n(4988),c=n(6274),a=n(8561);function s(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>(0,a.U)(function(t,e){return n=>{let o=n;for(let r=0;r<e;r++){const e=null!=o?o[t[r]]:void 0;if(void 0===e)return;o=e}return o}}(t,e))(n)}var l=n(6286),p=n(3606),u=n(2329),m=n(5176);let h=(()=>{class t{constructor(t){this.mapService=t}ngAfterViewInit(){this.mapService.createMap(),setTimeout(()=>{this.mapService.resize()},500)}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(m.S))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-map"]],decls:1,vars:0,consts:[["id","ol-map",1,"map-container"]],template:function(t,e){1&t&&p._UZ(0,"div",0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();function f(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}s((o=o.apply(t,e||[])).next())})}var g=n(9790);let d=(()=>{class t{constructor(t){this.modalController=t}ngOnInit(){}onShowLayersControl(){return f(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:g.K,cssClass:"my-custom-class"});return yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(o.IN))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(t,e){1&t&&(p.TgZ(0,"ion-fab",0),p.TgZ(1,"ion-fab-button",1),p.NdJ("click",function(){return e.onShowLayersControl()}),p._UZ(2,"ion-icon",2),p.qZA(),p.qZA())},directives:[o.IJ,o.W4,o.gu],styles:[""]}),t})();var v=n(4689);let y=(()=>{class t{constructor(t){this.modalController=t}ngOnInit(){}onShowGeoSearch(){return f(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:v.p,cssClass:"my-custom-class"});return yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(o.IN))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-map-geosearch"]],decls:2,vars:0,consts:[["size","small","color","light",3,"click"],["name","search"]],template:function(t,e){1&t&&(p.TgZ(0,"ion-fab-button",0),p.NdJ("click",function(){return e.onShowGeoSearch()}),p._UZ(1,"ion-icon",1),p.qZA())},directives:[o.W4,o.gu],styles:[""]}),t})(),Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-map-tools"]],decls:5,vars:0,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"]],template:function(t,e){1&t&&(p.TgZ(0,"ion-fab",0),p.TgZ(1,"ion-fab-button",1),p._UZ(2,"ion-icon",2),p.qZA(),p.TgZ(3,"ion-fab-list"),p._UZ(4,"app-map-geosearch"),p.qZA(),p.qZA())},directives:[o.IJ,o.W4,o.gu,o.zq,y],styles:[""]}),t})();function S(t,e){1&t&&p._UZ(0,"ion-spinner",4)}let b=(()=>{class t{constructor(t,e){this.mapService=t,this.mapStoreService=e,this.tracking$=this.mapStoreService.mapstate$.pipe(s("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe(s("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(m.S),p.Y36(u.C))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(t,e){1&t&&(p.TgZ(0,"ion-fab",0),p.TgZ(1,"ion-fab-button",1),p.NdJ("click",function(){return e.onToggleGeolocate()}),p._UZ(2,"ion-icon",2),p.YNc(3,S,1,0,"ion-spinner",3),p.ALo(4,"async"),p.qZA(),p.qZA()),2&t&&(p.xp6(1),p.Q6J("color",e.tracking?"danger":"primary"),p.xp6(2),p.Q6J("ngIf",p.lcZ(4,2,e.locating$)))},directives:[o.IJ,o.W4,o.gu,r.O5,o.PQ],pipes:[r.Ov],styles:[""]}),t})();const w=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.mapState=t,this.rounter=e,this.route=n,this.mapSerice=o}ngOnInit(){this.route.queryParams.subscribe(t=>{var e;null===(e=t.center)||void 0===e||e.map(t=>Number(t)),Number(t.zoom),Number(t.rotation)}),this.rounter.navigate([],{relativeTo:this.route,queryParams:{hello:"world"},queryParamsHandling:"merge"}),this.mapState.mapstate$.pipe(s("view"),(0,l.b)(t=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:t})})).subscribe()}addMapViewStateToUrl(t){}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(u.C),p.Y36(c.F0),p.Y36(c.gz),p.Y36(m.S))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-tap-map"]],decls:5,vars:0,template:function(t,e){1&t&&(p.TgZ(0,"ion-content"),p._UZ(1,"app-map"),p._UZ(2,"app-map-layers-control"),p._UZ(3,"app-map-tools"),p._UZ(4,"app-map-geolocation"),p.qZA())},directives:[o.W2,h,d,Z,b],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[c.Bz.forChild(w)],c.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[o.Pc,r.ez,i.u5,k]]}),t})()}}]);