"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3568],{3568:(Yi,zt,S)=>{S.r(zt),S.d(zt,{MapPageModule:()=>Ci});var f=S(3349),Z=S(9808),E=S(3075),Ze=S(5330),Ht=S(8929),G=S(4850),mo=S(2986),ye=S(2994),go=S(7625),ho=S(9780),Vt=S(6674),e=S(5e3),lt=S(8273),oe=S(8222),re=S(5094);function _o(t,o){1&t&&e._UZ(0,"div",2)}const yo=["*"];let bo=(()=>{class t{constructor(n,r){this.mapService=n,this.store=r,this.showMapCenter$=this.store.select("mapTools","activatedMapTools").pipe((0,G.U)(a=>a.includes("takePhoto"))),this.center=[1360103,7491908],this.zoom=13}ngAfterViewInit(){this.mapService.createMap(this.center,this.zoom)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.S),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map"]],ngContentSelectors:yo,decls:4,vars:3,consts:[["id","ol-map",1,"map-container"],["id","center",4,"ngIf"],["id","center"]],template:function(n,r){1&n&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,_o,1,0,"div",1),e.ALo(2,"async"),e.Hsn(3),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.showMapCenter$)))},directives:[Z.O5],pipes:[Z.Ov],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}#center[_ngcontent-%COMP%]{top:50%;left:50%;margin-top:-13px;margin-left:-13px;padding:10px;border:3px dashed #fc1717;border-radius:50%;z-index:10000;position:absolute}"],changeDetection:0}),t})();var Wt=S(655),ut=S(7037);function To(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-item",14),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-toggle",15),e.NdJ("ionChange",function(a){const c=e.CHM(n).$implicit,d=e.oxw().$implicit;return e.oxw(2).onOverlayToggle(a,d,c)}),e.qZA(),e.qZA()}if(2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n.label),e.xp6(1),e.Q6J("name",n.name)("checked",n.addedToMap)}}function Co(t,o){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-accordion-group"),e.TgZ(2,"ion-accordion"),e.TgZ(3,"ion-item",10),e._UZ(4,"ion-icon",11),e.TgZ(5,"ion-label"),e._uU(6),e.qZA(),e.TgZ(7,"ion-badge",12),e._uU(8),e.qZA(),e.qZA(),e.YNc(9,To,4,3,"ion-item",13),e.qZA(),e.qZA(),e.qZA()),2&t){const n=o.$implicit,r=e.oxw(2);e.xp6(4),e.Q6J("name",n.icon),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.AsE("",n.layerCount.added,"/",n.layerCount.total,""),e.xp6(1),e.Q6J("ngForOf",n.layers)("ngForTrackBy",r.trackItems)}}function So(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Co,10,6,"ion-list",9),e.ALo(2,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,n.overlays$))("ngForTrackBy",n.trackItems)}}const Xt=function(t){return{selected:t}};function xo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-col",17),e.TgZ(1,"div",18),e.NdJ("click",function(){const i=e.CHM(n).$implicit;return e.oxw(2).onBaseLayerSelect(i)}),e.TgZ(2,"ion-card",19),e.ALo(3,"async"),e._UZ(4,"ion-img",20),e.qZA(),e.TgZ(5,"ion-text",21),e.ALo(6,"async"),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=o.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,Xt,n.id===e.lcZ(3,4,r.selectedBaseMap$))),e.xp6(2),e.Q6J("src",n.image),e.xp6(1),e.Q6J("ngClass",e.VKq(10,Xt,n.id===e.lcZ(6,6,r.selectedBaseMap$))),e.xp6(2),e.hij(" ",n.name," ")}}function wo(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row"),e.YNc(3,xo,8,12,"ion-col",16),e.ALo(4,"async"),e.qZA(),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,n.baseMaps$))}}let Mo=(()=>{class t{constructor(n,r,a){this.modalController=n,this.mapLayersService=r,this.mapService=a,this.segment="overlays"}ngOnInit(){this.baseMaps$=this.mapLayersService.baseMaps$,this.overlays$=this.mapLayersService.overlays$.pipe((0,G.U)(n=>n.map(r=>Object.assign(Object.assign({},r),{layerCount:{total:r.layers.length,added:r.layers.filter(a=>a.addedToMap).length}})))),this.selectedBaseMap$=this.mapLayersService.selectedBaseMap$}onOverlayToggle(n,r,a){this.mapLayersService.updateOverlays(r.name,a.name,n.detail.checked),n.detail.checked?this.mapService.addWMSLayer(r.url,a):this.mapService.removeLayer(a.name)}onBaseLayerSelect(n){this.mapLayersService.changeSelectedBaseMap(n.id),this.mapService.changeBaseMap(n.id)}dismiss(){this.modalController.dismiss()}trackItems(n,r){return r.name}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.IN),e.Y36(ut.Y),e.Y36(oe.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-layers-control-modal"]],decls:12,vars:3,consts:[["mode","md",1,"ion-padding-top",3,"ngModel","ngModelChange"],["value","overlays"],["name","layers-outline"],["value","baselayers"],["name","map-outline"],[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"],[4,"ngFor","ngForOf","ngForTrackBy"],["slot","header"],["slot","start",3,"name"],["color","secondary"],["slot","content",4,"ngFor","ngForOf","ngForTrackBy"],["slot","content"],["mode","md","slot","end",3,"name","checked","ionChange"],["size","4","class","ion-text-center",4,"ngFor","ngForOf"],["size","4",1,"ion-text-center"],[1,"base-map",3,"click"],[3,"ngClass"],[3,"src"],["color","medium",3,"ngClass"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-segment",0),e.NdJ("ngModelChange",function(i){return r.segment=i}),e.TgZ(2,"ion-segment-button",1),e._UZ(3,"ion-icon",2),e.qZA(),e.TgZ(4,"ion-segment-button",3),e._UZ(5,"ion-icon",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content"),e.YNc(7,So,3,4,"ng-container",5),e.YNc(8,wo,5,3,"ng-container",5),e.qZA(),e.TgZ(9,"ion-fab",6),e.TgZ(10,"ion-fab-button",7),e.NdJ("click",function(){return r.dismiss()}),e._UZ(11,"ion-icon",8),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngModel",r.segment),e.xp6(6),e.Q6J("ngIf","overlays"===r.segment),e.xp6(1),e.Q6J("ngIf","baselayers"===r.segment))},directives:[f.Gu,f.cJ,f.QI,E.JJ,E.On,f.GO,f.gu,f.W2,Z.O5,f.IJ,f.W4,Z.sg,f.q_,f.eh,f.We,f.Ie,f.Q$,f.yp,f.ho,f.w,f.jY,f.Nd,f.wI,f.PM,Z.mk,f.Xz,f.yW],pipes:[Z.Ov],styles:["ion-segment[_ngcontent-%COMP%]{--background: var(--ion-color-tertiary)}ion-accordion.accordion-expanding[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%], ion-accordion.accordion-expanded[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%]{--color: var(--ion-color-primary-contrast);--background: var(--ion-color-primary)}ion-accordion.accordion-expanding[_ngcontent-%COMP%]   ion-item[slot=content][_ngcontent-%COMP%], ion-accordion.accordion-expanded[_ngcontent-%COMP%]   ion-item[slot=content][_ngcontent-%COMP%]{--background: var(--ion-color-light-tint)}ion-card[_ngcontent-%COMP%]{--background: var(--ion-color-secondary)}ion-card.selected[_ngcontent-%COMP%]{outline:4px solid var(--ion-color-secondary);outline-offset:5px;transition:ease-in-out .2s}.selected[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-weight:700;transition:ease-in-out .2s}"],changeDetection:0}),t})(),Zo=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}onShowLayersControl(){return(0,Wt.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:Mo,cssClass:"layer-control-modal",breakpoints:[0,.5,1],initialBreakpoint:.5})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e.NdJ("click",function(){return r.onShowLayersControl()}),e._UZ(2,"ion-icon",2),e.qZA(),e.qZA())},directives:[f.IJ,f.W4,f.gu],styles:[""],changeDetection:0}),t})();function Ao(t,o){1&t&&e._UZ(0,"img",1),2&t&&e.Q6J("src",o.$implicit,e.LSH)}let ko=(()=>{class t{constructor(n){this.mapLayersService=n,this.legends$=this.mapLayersService.legends$}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(ut.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-legend-popover"]],decls:2,vars:3,consts:[[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(n,r){1&n&&(e.YNc(0,Ao,1,1,"img",0),e.ALo(1,"async")),2&n&&e.Q6J("ngForOf",e.lcZ(1,1,r.legends$))},directives:[Z.sg],pipes:[Z.Ov],styles:["img[_ngcontent-%COMP%]{display:block;padding:10px}"],changeDetection:0}),t})();function Oo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab",1),e.TgZ(1,"ion-fab-button",2),e.NdJ("click",function(a){return e.CHM(n),e.oxw().onShowPopover(a)}),e._UZ(2,"i",3),e.qZA(),e.qZA()}}let Po=(()=>{class t{constructor(n,r){this.popoverController=n,this.mapLayersService=r,this.showLegend$=this.mapLayersService.legends$.pipe((0,G.U)(a=>0!==a.length))}onShowPopover(n){return(0,Wt.mG)(this,void 0,void 0,function*(){yield(yield this.popoverController.create({component:ko,cssClass:"legend-popover",translucent:!0,showBackdrop:!1,animated:!1,event:n})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.Dh),e.Y36(ut.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-legend-fab"]],decls:2,vars:3,consts:[["horizontal","start","vertical","bottom","slot","fixed",4,"ngIf"],["horizontal","start","vertical","bottom","slot","fixed"],[3,"click"],[1,"fg-map-legend-o","fg-2x"]],template:function(n,r){1&n&&(e.YNc(0,Oo,3,0,"ion-fab",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,r.showLegend$))},directives:[Z.O5,f.IJ,f.W4],pipes:[Z.Ov],styles:[""],changeDetection:0}),t})();var Kt=S(5254),en=S(2198),Io=S(7545),jo=S(1709);function Do(t,o){if(1&t&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",2),e.TgZ(2,"ion-label",3),e.TgZ(3,"p"),e._uU(4,"Beskrivelse"),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(6),e.Oqu(n.properties.description)}}let Lo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-draw-info"]],inputs:{properties:"properties"},decls:9,vars:2,consts:[["name","information-circle-outline","slot","start"],[4,"ngIf"],["name","chatbox-outline","slot","start"],[1,"ion-text-wrap"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-item"),e._UZ(2,"ion-icon",0),e.TgZ(3,"ion-label"),e.TgZ(4,"p"),e._uU(5,"Navn"),e.qZA(),e.TgZ(6,"h3"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,Do,7,1,"ion-item",1),e.qZA()),2&n&&(e.xp6(7),e.Oqu(r.properties.name),e.xp6(1),e.Q6J("ngIf",r.properties.description.length>0))},directives:[f.q_,f.Ie,f.gu,f.Q$,Z.O5],styles:[""]}),t})();var $o=S(7914),Uo=S(2313);function Eo(t,o){1&t&&e._UZ(0,"img",2),2&t&&e.Q6J("src",o.ngIf,e.LSH)}function No(t,o){1&t&&(e.TgZ(0,"div",3),e._UZ(1,"ion-spinner",4),e._UZ(2,"br"),e.TgZ(3,"ion-text",5),e._uU(4,"Henter billede..."),e.qZA(),e.qZA())}let qo=(()=>{class t{constructor(n,r){this.supabase=n,this.domSanitizer=r}set properties(n){const r=n.file_name.replace("images/","");this.photoUrl$=this.downLoadImage(r)}ngOnInit(){}downLoadImage(n){return this.supabase.downloadImage(n).pipe((0,G.U)(r=>this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(r.data))))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36($o.T),e.Y36(Uo.H7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-photo-viewer"]],inputs:{properties:"properties"},decls:4,vars:4,consts:[[3,"src",4,"ngIf","ngIfElse"],["loading",""],[3,"src"],[1,"ion-text-center","ion-margin-top"],["color","primary"],["color","medium"]],template:function(n,r){if(1&n&&(e.YNc(0,Eo,1,1,"img",0),e.ALo(1,"async"),e.YNc(2,No,5,0,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,r.photoUrl$))("ngIfElse",a)}},directives:[Z.O5,f.PQ,f.yW],pipes:[Z.Ov],styles:[""]}),t})(),Ro=(()=>{class t{oisUrl(n){return`http://gis.frederiksberg.dk/vaerktoejer/ois-link.html?komnr=${n.kommunekode}&ejdnr=${n.esrejendomsnr}`}dinGeoUrl(n){return`https://www.dingeo.dk/adresse/${n.postnr}-${n.postnrnavn}/${n.vejnavn}-${n.husnr}/`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-address-info"]],inputs:{properties:"properties"},decls:25,vars:6,consts:[["color","primary"],[1,"ion-text-center"],["fullscreen",""],["name","home-outline","slot","start"],["target","_blank",3,"href"],["name","link-outline","slot","start"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title",1),e._uU(3,"Adresseinfo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"ion-list"),e.TgZ(6,"ion-item"),e._UZ(7,"ion-icon",3),e.TgZ(8,"ion-label"),e.TgZ(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-item",4),e._UZ(14,"ion-icon",5),e.TgZ(15,"ion-label"),e._uU(16," OIS "),e.qZA(),e.qZA(),e.TgZ(17,"ion-item",4),e._UZ(18,"ion-icon",5),e.TgZ(19,"ion-label"),e._uU(20," DinGeo "),e.qZA(),e.qZA(),e.TgZ(21,"ion-item",4),e._UZ(22,"ion-icon",5),e.TgZ(23,"ion-label"),e._uU(24," De Gule Sider "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(10),e.Oqu(r.properties.betegnelse),e.xp6(2),e.AsE("",r.properties.matrikelnr,", ",r.properties.ejerlavnavn,""),e.xp6(1),e.Q6J("href",r.oisUrl(r.properties)),e.xp6(4),e.Q6J("href",r.dinGeoUrl(r.properties)),e.xp6(4),e.Q6J("href","https://kort.degulesider.dk/s/"+r.properties.betegnelse))},directives:[f.Gu,f.sr,f.wd,f.W2,f.q_,f.Ie,f.gu,f.Q$],styles:[""]}),t})();function Fo(t,o){if(1&t&&e._UZ(0,"app-draw-info",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}function Jo(t,o){if(1&t&&e._UZ(0,"app-photo-viewer",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}function Yo(t,o){if(1&t&&e._UZ(0,"app-address-info",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}let Go=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}onCloseModal(){this.modalController.dismiss()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-feature-info-modal"]],inputs:{feature:"feature"},decls:3,vars:3,consts:[[3,"properties",4,"ngIf"],[3,"properties"]],template:function(n,r){1&n&&(e.YNc(0,Fo,1,1,"app-draw-info",0),e.YNc(1,Jo,1,1,"app-photo-viewer",0),e.YNc(2,Yo,1,1,"app-address-info",0)),2&n&&(e.Q6J("ngIf","projectFeatures"===r.feature.layerName),e.xp6(1),e.Q6J("ngIf","projectPhotos"===r.feature.layerName),e.xp6(1),e.Q6J("ngIf","adresser"===r.feature.layerName))},directives:[Z.O5,Lo,qo,Ro],styles:[""]}),t})(),Qo=(()=>{class t{constructor(n,r,a){this.modalController=n,this.mapService=r,this.store=a,this.infoLayers=["adresser","projectPhotos","projectFeatures"]}ngOnInit(){this.store.select("map","selectedFeatures").pipe((0,en.h)(n=>!!n&&n.filter(r=>this.infoLayers.includes(r.layerName)).length>0),(0,G.U)(n=>({properties:n[0].feature.getProperties(),layerName:n[0].layerName})),(0,Io.w)(n=>this.showModal(n)),(0,jo.zg)(n=>(0,Kt.D)(n.onDidDismiss()).pipe((0,ye.b)(()=>this.mapService.clearFeatureSelection())))).subscribe()}showModal(n){return(0,Kt.D)(this.modalController.create({component:Go,componentProps:{feature:n},initialBreakpoint:.4,breakpoints:[0,.4,1]})).pipe((0,ye.b)(r=>r.present()))}onCloseModal(){this.modalController.dismiss(),this.mapService.clearFeatureSelection()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.IN),e.Y36(oe.S),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-feature-info"]],decls:0,vars:0,template:function(n,r){},styles:["ion-modal[_ngcontent-%COMP%]{pointer-events:none}ion-backdrop[_ngcontent-%COMP%]{pointer-events:none!important}"],changeDetection:0}),t})();var tn=S(5357);function Bo(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-fab-button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().activateTool("takePhoto")}),e.ALo(2,"async"),e._UZ(3,"ion-icon",9),e.qZA(),e.TgZ(4,"ion-fab-button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().activateTool("draw")}),e.ALo(5,"async"),e._UZ(6,"i",10),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("color",e.lcZ(2,2,n.activatedMapTools$).includes("takePhoto")?"secondary":"light"),e.xp6(3),e.Q6J("color",e.lcZ(5,4,n.activatedMapTools$).includes("draw")?"secondary":"light")}}const zo=["*"];let Ho=(()=>{class t{constructor(n){this.store=n,this.selectedProject$=this.store.select("project","selectedProject"),this.activatedMapTools$=this.store.select("mapTools","activatedMapTools")}activateTool(n){this.store.dispatch(tn.mZ({tool:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-tools"]],ngContentSelectors:zo,decls:16,vars:12,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"],["color","light",3,"color","click"],["name","search"],[3,"color","click"],[1,"fg-poi-info","fg-lg"],[4,"ngIf"],["name","archive"],["name","camera"],[1,"fg-polygon-pt","fg-lg"]],template:function(n,r){1&n&&(e.F$t(),e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e._UZ(2,"ion-icon",2),e.qZA(),e.TgZ(3,"ion-fab-list"),e.TgZ(4,"ion-fab-button",3),e.NdJ("click",function(){return r.activateTool("geoSearch")}),e.ALo(5,"async"),e._UZ(6,"ion-icon",4),e.qZA(),e.TgZ(7,"ion-fab-button",5),e.NdJ("click",function(){return r.activateTool("addressInfo")}),e.ALo(8,"async"),e._UZ(9,"i",6),e.qZA(),e.YNc(10,Bo,7,6,"ng-container",7),e.ALo(11,"async"),e.TgZ(12,"ion-fab-button",5),e.NdJ("click",function(){return r.activateTool("saveProject")}),e.ALo(13,"async"),e._UZ(14,"ion-icon",8),e.qZA(),e.qZA(),e.qZA(),e.Hsn(15,0,["#mapTools",""])),2&n&&(e.xp6(4),e.Q6J("color",e.lcZ(5,4,r.activatedMapTools$).includes("geoSearch")?"secondary":"light"),e.xp6(3),e.Q6J("color",e.lcZ(8,6,r.activatedMapTools$).includes("addressInfo")?"secondary":"light"),e.xp6(3),e.Q6J("ngIf",null!==e.lcZ(11,8,r.selectedProject$)),e.xp6(2),e.Q6J("color",e.lcZ(13,10,r.activatedMapTools$).includes("saveProject")?"secondary":"light"))},directives:[f.IJ,f.W4,f.gu,f.zq,Z.O5],pipes:[Z.Ov],styles:[""],changeDetection:0}),t})();function pe(t,o){return t(o={exports:{}},o.exports),o.exports}var x=pe(function(t){var o=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=o)}),ee=pe(function(t){var o=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=o)}),te=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Q=function(t){if(!te(t))throw TypeError(t+" is not an object!");return t},se=function(t){try{return!!t()}catch(o){return!0}},Ae=!se(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),pt=x.document,Wo=te(pt)&&te(pt.createElement),qe=function(t){return Wo?pt.createElement(t):{}},Xo=!Ae&&!se(function(){return 7!=Object.defineProperty(qe("div"),"a",{get:function(){return 7}}).a}),er=Object.defineProperty,tr=Ae?Object.defineProperty:function(o,n,r){if(Q(o),n=function(t,o){if(!te(t))return t;var n,r;if("function"==typeof(n=t.toString)&&!te(r=n.call(t))||"function"==typeof(n=t.valueOf)&&!te(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(n),Q(r),Xo)try{return er(o,n,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(o[n]=r.value),o},Re={f:tr},nn=function(t,o){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:o}},z=Ae?function(t,o,n){return Re.f(t,o,nn(1,n))}:function(t,o,n){return t[o]=n,t},nr={}.hasOwnProperty,be=function(t,o){return nr.call(t,o)},or=0,rr=Math.random(),ft=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++or+rr).toString(36))},dt=pe(function(t){var o="__core-js_shared__",n=x[o]||(x[o]={});(t.exports=function(r,a){return n[r]||(n[r]=void 0!==a?a:{})})("versions",[]).push({version:ee.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),vt=dt("native-function-to-string",Function.toString),Te=pe(function(t){var o=ft("src"),n="toString",r=(""+vt).split(n);ee.inspectSource=function(a){return vt.call(a)},(t.exports=function(a,i,c,d){var u="function"==typeof c;u&&(be(c,"name")||z(c,"name",i)),a[i]!==c&&(u&&(be(c,o)||z(c,o,a[i]?""+a[i]:r.join(String(i)))),a===x?a[i]=c:d?a[i]?a[i]=c:z(a,i,c):(delete a[i],z(a,i,c)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||vt.call(this)})}),ke=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},B=function(t,o,n){if(ke(t),void 0===o)return t;switch(n){case 1:return function(r){return t.call(o,r)};case 2:return function(r,a){return t.call(o,r,a)};case 3:return function(r,a,i){return t.call(o,r,a,i)}}return function(){return t.apply(o,arguments)}},mt="prototype",J=function(t,o,n){var p,y,_,T,r=t&J.F,a=t&J.G,c=t&J.P,d=t&J.B,u=a?x:t&J.S?x[o]||(x[o]={}):(x[o]||{})[mt],m=a?ee:ee[o]||(ee[o]={}),h=m[mt]||(m[mt]={});for(p in a&&(n=o),n)_=((y=!r&&u&&void 0!==u[p])?u:n)[p],T=d&&y?B(_,x):c&&"function"==typeof _?B(Function.call,_):_,u&&Te(u,p,_,t&J.U),m[p]!=_&&z(m,p,T),c&&h[p]!=_&&(h[p]=_)};x.core=ee,J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128;var t,I=J,ar={}.toString,fe=function(t){return ar.call(t).slice(8,-1)},on=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==fe(t)?t.split(""):Object(t)},Fe=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},gt=function(t){return on(Fe(t))},ir=Math.ceil,sr=Math.floor,Je=function(t){return isNaN(t=+t)?0:(t>0?sr:ir)(t)},cr=Math.min,Ye=function(t){return t>0?cr(Je(t),9007199254740991):0},lr=Math.max,ur=Math.min,rn=dt("keys"),ht=function(t){return rn[t]||(rn[t]=ft(t))},dr=(t=!1,function(o,n,r){var a=gt(o),i=Ye(a.length),c=function(t,o){return(t=Je(t))<0?lr(t+o,0):ur(t,o)}(r,i);for(t;i>c;c++)if(c in a&&a[c]===n)return c||0;return-1}),vr=ht("IE_PROTO"),_t="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Oe=Object.keys||function(o){return function(t,o){var i,n=gt(t),r=0,a=[];for(i in n)i!=vr&&be(n,i)&&a.push(i);for(;o.length>r;)be(n,i=o[r++])&&(~dr(a,i)||a.push(i));return a}(o,_t)},hr={f:Object.getOwnPropertySymbols},yr={f:{}.propertyIsEnumerable},Ge=function(t){return Object(Fe(t))},Qe=Object.assign,br=!Qe||se(function(){var t={},o={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(a){o[a]=a}),7!=Qe({},t)[n]||Object.keys(Qe({},o)).join("")!=r})?function(o,n){for(var r=Ge(o),a=arguments.length,i=1,c=hr.f,d=yr.f;a>i;)for(var y,u=on(arguments[i++]),m=c?Oe(u).concat(c(u)):Oe(u),h=m.length,p=0;h>p;)d.call(u,y=m[p++])&&(r[y]=u[y]);return r}:Qe;I(I.S+I.F,"Object",{assign:br});var Cr=function(o,n){var c,d,r=String(Fe(o)),a=Je(n),i=r.length;return a<0||a>=i?"":(c=r.charCodeAt(a))<55296||c>56319||a+1===i||(d=r.charCodeAt(a+1))<56320||d>57343?r.charAt(a):r.slice(a,a+2)},an=function(t,o,n){return o+(n?Cr(t,o).length:1)},R=pe(function(t){var o=dt("wks"),n=x.Symbol,r="function"==typeof n;(t.exports=function(i){return o[i]||(o[i]=r&&n[i]||(r?n:ft)("Symbol."+i))}).store=o}),Sr=R("toStringTag"),xr="Arguments"==fe(function(){return arguments}()),Be=function(t){var o,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,o){try{return t[o]}catch(n){}}(o=Object(t),Sr))?n:xr?fe(o):"Object"==(r=fe(o))&&"function"==typeof o.callee?"Arguments":r},Mr=RegExp.prototype.exec,yt=function(t,o){var n=t.exec;if("function"==typeof n){var r=n.call(t,o);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Be(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Mr.call(t,o)},Zr=function(){var t=Q(this),o="";return t.global&&(o+="g"),t.ignoreCase&&(o+="i"),t.multiline&&(o+="m"),t.unicode&&(o+="u"),t.sticky&&(o+="y"),o},ze=RegExp.prototype.exec,Ar=String.prototype.replace,sn=ze,He="lastIndex",bt=function(){var t=/a/,o=/b*/g;return ze.call(t,"a"),ze.call(o,"a"),0!==t[He]||0!==o[He]}(),Tt=void 0!==/()??/.exec("")[1];(bt||Tt)&&(sn=function(o){var r,a,i,c,n=this;return Tt&&(a=new RegExp("^"+n.source+"$(?!\\s)",Zr.call(n))),bt&&(r=n[He]),i=ze.call(n,o),bt&&i&&(n[He]=n.global?i.index+i[0].length:r),Tt&&i&&i.length>1&&Ar.call(i[0],a,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)}),i});var Ve=sn;I({target:"RegExp",proto:!0,forced:Ve!==/./.exec},{exec:Ve});var Or=R("species"),Pr=!se(function(){var t=/./;return t.exec=function(){var o=[];return o.groups={a:"7"},o},"7"!=="".replace(t,"$<a>")}),Ir=function(){var t=/(?:)/,o=t.exec;t.exec=function(){return o.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),cn=function(t,o,n){var r=R(t),a=!se(function(){var h={};return h[r]=function(){return 7},7!=""[t](h)}),i=a?!se(function(){var h=!1,p=/a/;return p.exec=function(){return h=!0,null},"split"===t&&(p.constructor={},p.constructor[Or]=function(){return p}),p[r](""),!h}):void 0;if(!a||!i||"replace"===t&&!Pr||"split"===t&&!Ir){var c=/./[r],d=n(Fe,r,""[t],function(p,y,_,T,C){return y.exec===Ve?a&&!C?{done:!0,value:c.call(y,_,T)}:{done:!0,value:p.call(_,y,T)}:{done:!1}}),m=d[1];Te(String.prototype,t,d[0]),z(RegExp.prototype,r,2==o?function(h,p){return m.call(h,this,p)}:function(h){return m.call(h,this)})}},jr=Math.max,Dr=Math.min,Lr=Math.floor,$r=/\$([$&`']|\d\d?|<[^>]*>)/g,Ur=/\$([$&`']|\d\d?)/g,Er=function(t){return void 0===t?t:String(t)};cn("replace",2,function(t,o,n,r){return[function(c,d){var u=t(this),m=null==c?void 0:c[o];return void 0!==m?m.call(c,u,d):n.call(String(u),c,d)},function(i,c){var d=r(n,i,this,c);if(d.done)return d.value;var u=Q(i),m=String(this),h="function"==typeof c;h||(c=String(c));var p=u.global;if(p){var y=u.unicode;u.lastIndex=0}for(var _=[];;){var T=yt(u,m);if(null===T||(_.push(T),!p))break;""===String(T[0])&&(u.lastIndex=an(m,Ye(u.lastIndex),y))}for(var k="",w=0,P=0;P<_.length;P++){T=_[P];for(var $=String(T[0]),D=jr(Dr(Je(T.index),m.length),0),ie=[],ge=1;ge<T.length;ge++)ie.push(Er(T[ge]));var he=T.groups;if(h){var xe=[$].concat(ie,D,m);void 0!==he&&xe.push(he);var F=String(c.apply(void 0,xe))}else F=a($,m,D,ie,he,c);D>=w&&(k+=m.slice(w,D)+F,w=D+$.length)}return k+m.slice(w)}];function a(i,c,d,u,m,h){var p=d+i.length,y=u.length,_=Ur;return void 0!==m&&(m=Ge(m),_=$r),n.call(h,_,function(T,C){var k;switch(C.charAt(0)){case"$":return"$";case"&":return i;case"`":return c.slice(0,d);case"'":return c.slice(p);case"<":k=m[C.slice(1,-1)];break;default:var w=+C;if(0===w)return T;if(w>y){var P=Lr(w/10);return 0===P?T:P<=y?void 0===u[P-1]?C.charAt(1):u[P-1]+C.charAt(1):T}k=u[w-1]}return void 0===k?"":k})}});var Nr=R("match"),Rr=R("species"),ln=function(t,o){var r,n=Q(t).constructor;return void 0===n||null==(r=Q(n)[Rr])?o:ke(r)},Fr=Math.min,Jr=[].push,de="split",H="length",Ct="lastIndex",un=4294967295,Pe=!se(function(){});cn("split",2,function(t,o,n,r){var a;return a="c"=="abbc"[de](/(b)*/)[1]||4!="test"[de](/(?:)/,-1)[H]||2!="ab"[de](/(?:ab)*/)[H]||4!="."[de](/(.?)(.?)/)[H]||"."[de](/()()/)[H]>1||""[de](/.?/)[H]?function(i,c){var d=String(this);if(void 0===i&&0===c)return[];if(!function(t){var o;return te(t)&&(void 0!==(o=t[Nr])?!!o:"RegExp"==fe(t))}(i))return n.call(d,i,c);for(var _,T,C,u=[],h=0,p=void 0===c?un:c>>>0,y=new RegExp(i.source,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":"")+"g");(_=Ve.call(y,d))&&!((T=y[Ct])>h&&(u.push(d.slice(h,_.index)),_[H]>1&&_.index<d[H]&&Jr.apply(u,_.slice(1)),C=_[0][H],h=T,u[H]>=p));)y[Ct]===_.index&&y[Ct]++;return h===d[H]?(C||!y.test(""))&&u.push(""):u.push(d.slice(h)),u[H]>p?u.slice(0,p):u}:"0"[de](void 0,0)[H]?function(i,c){return void 0===i&&0===c?[]:n.call(this,i,c)}:n,[function(c,d){var u=t(this),m=null==c?void 0:c[o];return void 0!==m?m.call(c,u,d):a.call(String(u),c,d)},function(i,c){var d=r(a,i,this,c,a!==n);if(d.done)return d.value;var u=Q(i),m=String(this),h=ln(u,RegExp),p=u.unicode,_=new h(Pe?u:"^(?:"+u.source+")",(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(Pe?"y":"g")),T=void 0===c?un:c>>>0;if(0===T)return[];if(0===m.length)return null===yt(_,m)?[m]:[];for(var C=0,k=0,w=[];k<m.length;){_.lastIndex=Pe?k:0;var $,P=yt(_,Pe?m:m.slice(k));if(null===P||($=Fr(Ye(_.lastIndex+(Pe?0:k)),m.length))===C)k=an(m,k,p);else{if(w.push(m.slice(C,k)),w.length===T)return w;for(var D=1;D<=P.length-1;D++)if(w.push(P[D]),w.length===T)return w;k=C=$}}return w.push(m.slice(C)),w}]});var A=pe(function(t,o){Object.defineProperty(o,"__esModule",{value:!0});var n={default:"__default"},r=Object.prototype.hasOwnProperty;function a(){}function i(s,l){return r.call(s,l)}function c(){return new a}function d(s,l){for(;s.length>l;)s.pop()}function m(s,l,v){if(null==v)s.removeAttribute(l);else{var g=function(s){return 0===s.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===s.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0}(l);g?s.setAttributeNS(g,l,String(v)):s.setAttribute(l,String(v))}}function h(s,l,v){s[l]=v}function p(s,l,v){l.indexOf("-")>=0?s.setProperty(l,v):s[l]=v}a.prototype=Object.create(null);var T=c();function C(s,l,v){(T[l]||T[n.default])(s,l,v)}T[n.default]=function(s,l,v){var g=typeof v;"object"===g||"function"===g?h(s,l,v):m(s,l,v)},T.style=function(s,l,v){if("string"==typeof v)s.style.cssText=v;else{s.style.cssText="";var g=s.style;for(var b in v)i(v,b)&&p(g,b,v[b])}};var w={nodesCreated:null,nodesDeleted:null},P=function(){function s(){this.created=[],this.deleted=[]}return s.prototype.markCreated=function(l){this.created.push(l)},s.prototype.markDeleted=function(l){this.deleted.push(l)},s.prototype.notifyChanges=function(){w.nodesCreated&&this.created.length>0&&w.nodesCreated(this.created),w.nodesDeleted&&this.deleted.length>0&&w.nodesDeleted(this.deleted)},s}();function D(s){return 1===s.nodeType}var he=Node.prototype.getRootNode||function(){for(var s=this,l=s;s;)l=s,s=s.parentNode;return l};var U=function(){function s(l,v,g){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=l,this.key=v,this.text=g}return s.prototype.hasEmptyAttrsArr=function(){var l=this._attrsArr;return!l||!l.length},s.prototype.getAttrsArr=function(l){return this._attrsArr||(this._attrsArr=new Array(l))},s}();function we(s,l,v,g){var b=new U(l,v,g);return s.__incrementalDOMData=b,b}function Ee(s,l){return eo(s,l)}function eo(s,l){if(s.__incrementalDOMData)return s.__incrementalDOMData;var v=D(s)?s.localName:s.nodeName,g=D(s)?s.getAttribute("key")||l:null,M=we(s,v,g,function(s){return 3===s.nodeType}(s)?s.data:void 0);return D(s)&&function(s,l){var v=s.attributes,g=v.length;if(g)for(var b=l.getAttrsArr(g),M=0,j=0;M<g;M+=1,j+=2){var V=v[M],Y=V.value;b[j]=V.name,b[j+1]=Y}}(s,M),M}var Me=null,L=null,N=null,Ne=null,at=[],it=[];function st(){return it}function oo(s){return function(v,g,b){var M=Me,j=Ne,V=at,ne=it,Y=L,X=N;Me=new P,Ne=v.ownerDocument,it=[],at=function(s,l){var v=function(s){var l=he.call(s);return function(s){return 11===s.nodeType||9===s.nodeType}(l)?l.activeElement:null}(s);return v&&s.contains(v)?function(s,l){for(var v=[],g=s;g!==l;){var b=g;v.push(b),g=b.parentNode}return v}(v,l):[]}(v,N=v.parentNode);try{return s(v,g,b)}finally{Ne=j,it=ne,L=Y,N=X,at=V,Me.notifyChanges(),Me=M}}}var ro=oo(function(s,l,v){return L=s,co(),l(v),lo(),s}),ki=oo(function(s,l,v){var g={nextSibling:s};return L=g,l(v),N&&so(N,ct(),s.nextSibling),g===L?null:L});function ao(s,l,v){var g=Ee(s,v);return l==g.nameOrCtor&&v==g.key}function Pi(s,l){var v;return v="#text"===s?function(s){var l=s.createTextNode("");return we(l,"#text",null),l}(Ne):function(s,l,v,g){var b;if("function"==typeof v)b=new v;else{var M=function(s,l){return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/Math/MathML":null==l||"foreignObject"===Ee(l).nameOrCtor?null:l.namespaceURI}(v,l);b=M?s.createElementNS(M,v):s.createElement(v)}return we(b,v,g),b}(Ne,N,s,l),Me.markCreated(v),v}function io(s,l){var v=function(s,l,v){if(!s)return null;if(ao(s,l,v))return s;if(v)for(;s=s.nextSibling;)if(ao(s,l,v))return s;return null}(L,s,l),g=v||Pi(s,l);g!==L&&(at.indexOf(g)>=0?function(s,l,v){for(var g=l.nextSibling,b=v;null!==b&&b!==l;){var M=b.nextSibling;s.insertBefore(b,g),b=M}}(N,g,L):N.insertBefore(g,L),L=g)}function so(s,l,v){for(var g=s,b=l;b!==v;){var M=b.nextSibling;g.removeChild(b),Me.markDeleted(b),b=M}}function co(){N=L,L=null}function ct(){return L?L.nextSibling:N.firstChild}function Qt(){L=ct()}function lo(){so(N,ct(),null),L=N,N=N.parentNode}function uo(s,l){return Qt(),io(s,l),co(),N}function po(){return lo(),L}function Ii(){return Qt(),io("#text",null),L}var W=c();function $i(s,l,v){if(l.staticsApplied=!0,v&&v.length){if(l.hasEmptyAttrsArr()){for(var g=0;g<v.length;g+=2)C(s,v[g],v[g+1]);return}for(g=0;g<v.length;g+=2)W[v[g]]=g+1;var b=l.getAttrsArr(0),M=0;for(g=0;g<b.length;g+=2){var V=b[g+1],ne=W[j=b[g]];ne?v[ne]===V&&delete W[j]:(b[M]=j,b[M+1]=V,M+=2)}for(var j in d(b,M),W)C(s,j,v[W[j]]),delete W[j]}}function Bt(s,l,v){for(var g=[],b=3;b<arguments.length;b++)g[b-3]=arguments[b];var M=uo(s,l),j=Ee(M);j.staticsApplied||$i(M,j,v);var V=Math.max(0,arguments.length-3),ne=j.hasEmptyAttrsArr();if(!V&&ne)return M;for(var Y=j.getAttrsArr(V),X=3,q=0;X<arguments.length;X+=2,q+=2){var K=arguments[X];if(ne)Y[q]=K;else if(Y[q]!==K)break;var _e=arguments[X+1];(ne||Y[q+1]!==_e)&&(Y[q+1]=_e,C(M,K,_e))}if(X<arguments.length||q<Y.length){for(var Ji=q;q<Y.length;q+=2)W[Y[q]]=Y[q+1];for(q=Ji;X<arguments.length;X+=2,q+=2)W[K=arguments[X]]!==(_e=arguments[X+1])&&C(M,K,_e),Y[q]=K,Y[q+1]=_e,delete W[K];for(var K in d(Y,q),W)C(M,K,void 0),delete W[K]}return M}function vo(s){return po()}o.applyAttr=m,o.applyProp=h,o.attributes=T,o.close=po,o.currentElement=function(){return N},o.currentPointer=function(){return ct()},o.open=uo,o.patch=ro,o.patchInner=ro,o.patchOuter=ki,o.skip=function(){L=N.lastChild},o.skipNode=Qt,o.getKey=function(s){return Ee(s).key},o.clearCache=function no(s){s.__incrementalDOMData=null;for(var l=s.firstChild;l;l=l.nextSibling)no(l)},o.importNode=function to(s){eo(s);for(var l=s.firstChild;l;l=l.nextSibling)to(l)},o.isDataInitialized=function(s){return Boolean(s.__incrementalDOMData)},o.notifications=w,o.symbols=n,o.attr=function(s,l){var v=st();v.push(s),v.push(l)},o.elementClose=vo,o.elementOpen=Bt,o.elementOpenEnd=function(){var s=st(),l=Bt.apply(null,s);return d(s,0),l},o.elementOpenStart=function(s,l,v){var g=st();g[0]=s,g[1]=l,g[2]=v},o.elementVoid=function(s,l,v){for(var g=[],b=3;b<arguments.length;b++)g[b-3]=arguments[b];return Bt.apply(null,arguments),vo()},o.text=function(s){for(var l=[],v=1;v<arguments.length;v++)l[v-1]=arguments[v];var g=Ii(),b=Ee(g);if(b.text!==s){b.text=s;for(var M=s,j=1;j<arguments.length;j+=1){var V=arguments[j];M=V(M)}g.data=M}return g},o.key=function(s){st()[1]=s}});!function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")}(A);var Yr=A.applyProp,pn=A.attributes,fn=A.patch,dn=A.elementClose,vn=A.elementOpen,Gr=A.elementVoid,St=A.text;pn.caretpos=function(t,o,n){t.setSelectionRange(n,n)},pn.value=Yr;var Br=function(o,n,r,a){fn(o,function(){!function(o,n,r){if(o.suggestions.length>0&&o.focused){vn("ul","",["class","dawa-autocomplete-suggestions","role","listbox","unselectable","on"]);for(var a=function(d){var u=o.suggestions[d],m="dawa-autocomplete-suggestion";o.selected===d&&(m+=" dawa-selected"),vn("li","",["role","option"],"class",m,"onmousedown",function(y){n(d),y.preventDefault()});var h=u.forslagstekst.split("\n");if(h=h.map(function(y){return y.replace(/ /g,"\xa0")}),r){St(h[0]);for(var p=1;p<h.length;++p)Gr("br"),St(h[p])}else St(h.join(", "));dn("li")},i=0;i<o.suggestions.length;++i)a(i);dn("ul")}}(n,r,a)})};function mn(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ve,kt,Ot,Xr=function(t,o,n,r){try{return r?o(Q(n)[0],n[1]):o(n)}catch(i){var a=t.return;throw void 0!==a&&Q(a.call(t)),i}},ce={},Kr=R("iterator"),ea=Array.prototype,na=R("iterator"),oa=ee.getIteratorMethod=function(t){if(null!=t)return t[na]||t["@@iterator"]||ce[Be(t)]},gn=pe(function(t){var o={},n={},r=t.exports=function(a,i,c,d,u){var y,_,T,C,m=u?function(){return a}:oa(a),h=B(c,d,i?2:1),p=0;if("function"!=typeof m)throw TypeError(a+" is not iterable!");if(function(t){return void 0!==t&&(ce.Array===t||ea[Kr]===t)}(m)){for(y=Ye(a.length);y>p;p++)if((C=i?h(Q(_=a[p])[0],_[1]):h(a[p]))===o||C===n)return C}else for(T=m.call(a);!(_=T.next()).done;)if((C=Xr(T,h,_.value,i))===o||C===n)return C};r.BREAK=o,r.RETURN=n}),ra=function(t,o,n){var r=void 0===n;switch(o.length){case 0:return r?t():t.call(n);case 1:return r?t(o[0]):t.call(n,o[0]);case 2:return r?t(o[0],o[1]):t.call(n,o[0],o[1]);case 3:return r?t(o[0],o[1],o[2]):t.call(n,o[0],o[1],o[2]);case 4:return r?t(o[0],o[1],o[2],o[3]):t.call(n,o[0],o[1],o[2],o[3])}return t.apply(n,o)},hn=x.document,xt=hn&&hn.documentElement,_n=x.process,wt=x.setImmediate,Mt=x.clearImmediate,yn=x.MessageChannel,Zt=x.Dispatch,At=0,Ie={},bn="onreadystatechange",je=function(){var t=+this;if(Ie.hasOwnProperty(t)){var o=Ie[t];delete Ie[t],o()}},Tn=function(t){je.call(t.data)};(!wt||!Mt)&&(wt=function(o){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return Ie[++At]=function(){ra("function"==typeof o?o:Function(o),n)},ve(At),At},Mt=function(o){delete Ie[o]},"process"==fe(_n)?ve=function(t){_n.nextTick(B(je,t,1))}:Zt&&Zt.now?ve=function(t){Zt.now(B(je,t,1))}:yn?(Ot=(kt=new yn).port2,kt.port1.onmessage=Tn,ve=B(Ot.postMessage,Ot,1)):x.addEventListener&&"function"==typeof postMessage&&!x.importScripts?(ve=function(t){x.postMessage(t+"","*")},x.addEventListener("message",Tn,!1)):ve=bn in qe("script")?function(t){xt.appendChild(qe("script"))[bn]=function(){xt.removeChild(this),je.call(t)}}:function(t){setTimeout(B(je,t,1),0)});var Cn={set:wt,clear:Mt},aa=Cn.set,Sn=x.MutationObserver||x.WebKitMutationObserver,Pt=x.process,It=x.Promise,xn="process"==fe(Pt);function sa(t){var o,n;this.promise=new t(function(r,a){if(void 0!==o||void 0!==n)throw TypeError("Bad Promise constructor");o=r,n=a}),this.resolve=ke(o),this.reject=ke(n)}var jt={f:function(t){return new sa(t)}},Dt=function(t){try{return{e:!1,v:t()}}catch(o){return{e:!0,v:o}}},wn=x.navigator,la=wn&&wn.userAgent||"",fa=Re.f,Mn=R("toStringTag"),Lt=function(t,o,n){t&&!be(t=n?t:t.prototype,Mn)&&fa(t,Mn,{configurable:!0,value:o})},Zn=R("species"),$t=R("iterator"),An=!1;try{[7][$t]().return=function(){An=!0}}catch(t){}var Xe,jn,Dn,Ln,o,kn=Cn.set,On=function(){var t,o,n,r=function(){var d,u;for(xn&&(d=Pt.domain)&&d.exit();t;){u=t.fn,t=t.next;try{u()}catch(m){throw t?n():o=void 0,m}}o=void 0,d&&d.enter()};if(xn)n=function(){Pt.nextTick(r)};else if(!Sn||x.navigator&&x.navigator.standalone)if(It&&It.resolve){var c=It.resolve(void 0);n=function(){c.then(r)}}else n=function(){aa.call(x,r)};else{var a=!0,i=document.createTextNode("");new Sn(r).observe(i,{characterData:!0}),n=function(){i.data=a=!a}}return function(d){var u={fn:d,next:void 0};o&&(o.next=u),t||(t=u,n()),o=u}}(),le="Promise",Pn=x.TypeError,Ce=x.process,In=Ce&&Ce.versions,ga=In&&In.v8||"",ae=x[le],De="process"==Be(Ce),We=function(){},Le=jn=jt.f,$e=!!function(){try{var t=ae.resolve(1),o=(t.constructor={})[R("species")]=function(n){n(We,We)};return(De||"function"==typeof PromiseRejectionEvent)&&t.then(We)instanceof o&&0!==ga.indexOf("6.6")&&-1===la.indexOf("Chrome/66")}catch(n){}}(),$n=function(t){var o;return!(!te(t)||"function"!=typeof(o=t.then))&&o},Ut=function(t,o){if(!t._n){t._n=!0;var n=t._c;On(function(){for(var r=t._v,a=1==t._s,i=0,c=function(d){var y,_,T,u=a?d.ok:d.fail,m=d.resolve,h=d.reject,p=d.domain;try{u?(a||(2==t._h&&_a(t),t._h=1),!0===u?y=r:(p&&p.enter(),y=u(r),p&&(p.exit(),T=!0)),y===d.promise?h(Pn("Promise-chain cycle")):(_=$n(y))?_.call(y,m,h):m(y)):h(r)}catch(C){p&&!T&&p.exit(),h(C)}};n.length>i;)c(n[i++]);t._c=[],t._n=!1,o&&!t._h&&ha(t)})}},ha=function(t){kn.call(x,function(){var r,a,i,o=t._v,n=Un(t);if(n&&(r=Dt(function(){De?Ce.emit("unhandledRejection",o,t):(a=x.onunhandledrejection)?a({promise:t,reason:o}):(i=x.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=De||Un(t)?2:1),t._a=void 0,n&&r.e)throw r.v})},Un=function(t){return 1!==t._h&&0===(t._a||t._c).length},_a=function(t){kn.call(x,function(){var o;De?Ce.emit("rejectionHandled",t):(o=x.onrejectionhandled)&&o({promise:t,reason:t._v})})},Se=function(t){var o=this;o._d||(o._d=!0,(o=o._w||o)._v=t,o._s=2,o._a||(o._a=o._c.slice()),Ut(o,!0))},Et=function(t){var n,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===t)throw Pn("Promise can't be resolved itself");(n=$n(t))?On(function(){var r={_w:o,_d:!1};try{n.call(t,B(Et,r,1),B(Se,r,1))}catch(a){Se.call(r,a)}}):(o._v=t,o._s=1,Ut(o,!1))}catch(r){Se.call({_w:o,_d:!1},r)}}};$e||(ae=function(o){(function(t,o,n,r){if(!(t instanceof o)||"_h"in t)throw TypeError("Promise: incorrect invocation!")})(this,ae),ke(o),Xe.call(this);try{o(B(Et,this,1),B(Se,this,1))}catch(n){Se.call(this,n)}},(Xe=function(o){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,o,n){for(var r in o)Te(t,r,o[r],undefined);return t}(ae.prototype,{then:function(o,n){var r=Le(ln(this,ae));return r.ok="function"!=typeof o||o,r.fail="function"==typeof n&&n,r.domain=De?Ce.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Ut(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Dn=function(){var t=new Xe;this.promise=t,this.resolve=B(Et,t,1),this.reject=B(Se,t,1)},jt.f=Le=function(t){return t===ae||t===Ln?new Dn(t):jn(t)}),I(I.G+I.W+I.F*!$e,{Promise:ae}),Lt(ae,le),o=x.Promise,Ae&&o&&!o[Zn]&&Re.f(o,Zn,{configurable:!0,get:function(){return this}}),Ln=ee[le],I(I.S+I.F*!$e,le,{reject:function(o){var n=Le(this);return(0,n.reject)(o),n.promise}}),I(I.S+I.F*!$e,le,{resolve:function(o){return function(t,o){if(Q(t),te(o)&&o.constructor===t)return o;var n=jt.f(t);return(0,n.resolve)(o),n.promise}(this,o)}}),I(I.S+I.F*!($e&&function(t,o){if(!An)return!1;var n=!1;try{var r=[7],a=r[$t]();a.next=function(){return{done:n=!0}},r[$t]=function(){return a},function(t){ae.all(t).catch(We)}(r)}catch(i){}return n}()),le,{all:function(o){var n=this,r=Le(n),a=r.resolve,i=r.reject,c=Dt(function(){var d=[],u=0,m=1;gn(o,!1,function(h){var p=u++,y=!1;d.push(void 0),m++,n.resolve(h).then(function(_){y||(y=!0,d[p]=_,--m||a(d))},i)}),--m||a(d)});return c.e&&i(c.v),r.promise},race:function(o){var n=this,r=Le(n),a=r.reject,i=Dt(function(){gn(o,!1,function(c){n.resolve(c).then(r.resolve,a)})});return i.e&&a(i.v),r.promise}});var Nt=R("unscopables"),qt=Array.prototype;null==qt[Nt]&&z(qt,Nt,{});var Rt=function(t){qt[Nt][t]=!0},Ke=function(t,o){return{value:o,done:!!t}},ya=Ae?Object.defineProperties:function(o,n){Q(o);for(var c,r=Oe(n),a=r.length,i=0;a>i;)Re.f(o,c=r[i++],n[c]);return o},ba=ht("IE_PROTO"),Ft=function(){},Jt="prototype",et=function(){var a,t=qe("iframe"),o=_t.length;for(t.style.display="none",xt.appendChild(t),t.src="javascript:",(a=t.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),et=a.F;o--;)delete et[Jt][_t[o]];return et()},Ta=Object.create||function(o,n){var r;return null!==o?(Ft[Jt]=Q(o),r=new Ft,Ft[Jt]=null,r[ba]=o):r=et(),void 0===n?r:ya(r,n)},En={};z(En,R("iterator"),function(){return this});var Nn=ht("IE_PROTO"),Sa=Object.prototype,xa=Object.getPrototypeOf||function(t){return t=Ge(t),be(t,Nn)?t[Nn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Sa:null},Ue=R("iterator"),Yt=!([].keys&&"next"in[].keys()),tt="values",Rn=function(){return this},Fn=function(t,o,n,r,a,i,c){!function(t,o,n){t.prototype=Ta(En,{next:nn(1,n)}),Lt(t,"Array Iterator")}(n,0,function(){var t=this._t,o=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ke(1)):Ke(0,"keys"==o?n:"values"==o?t[n]:[n,t[n]])});var k,w,P,d=function($){if(!Yt&&$ in p)return p[$];switch($){case"keys":case tt:return function(){return new n(this,$)}}return function(){return new n(this,$)}},u=o+" Iterator",h=!1,p=t.prototype,y=p[Ue]||p["@@iterator"]||p[a],_=y||d(a),T=d("entries"),C=p.entries||y;if(C&&(P=xa(C.call(new t)))!==Object.prototype&&P.next&&(Lt(P,u,!0),"function"!=typeof P[Ue]&&z(P,Ue,Rn)),y&&y.name!==tt&&(h=!0,_=function(){return y.call(this)}),(Yt||h||!p[Ue])&&z(p,Ue,_),ce[o]=_,ce[u]=Rn,void(k={values:_,keys:d("keys"),entries:T}))for(w in k)w in p||Te(p,w,k[w]);else I(I.P+I.F*(Yt||h),o,k);return k}(Array,"Array",function(t,o){this._t=gt(t),this._i=0,this._k=o},0,"values");ce.Arguments=ce.Array,Rt("keys"),Rt("values"),Rt("entries");for(var Jn=R("iterator"),Yn=R("toStringTag"),Gn=ce.Array,Qn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Bn=Oe(Qn),Gt=0;Gt<Bn.length;Gt++){var ot,nt=Bn[Gt],Za=Qn[nt],zn=x[nt],me=zn&&zn.prototype;if(me&&(me[Jn]||z(me,Jn,Gn),me[Yn]||z(me,Yn,nt),ce[nt]=Gn,Za))for(ot in Fn)me[ot]||Te(me,ot,Fn[ot],!0)}var Hn={};Hn[R("toStringTag")]="z",Hn+""!="[object z]"&&Te(Object.prototype,"toString",function(){return"[object "+Be(this)+"]"},!0),function(t,o){var n=(ee.Object||{})[t]||Object[t],r={keys:function(o){return Oe(Ge(o))}};I(I.S+I.F*se(function(){n(1)}),"Object",r)}("keys");var Ia={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(o,n){return function(t,o){return o=o||{},new Promise(function(n,r){var a=new XMLHttpRequest,i=[],c=[],d={},u=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(JSON.parse(a.responseText))},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:u,headers:{keys:function(){return i},entries:function(){return c},get:function(h){return d[h.toLowerCase()]},has:function(h){return h.toLowerCase()in d}}}};for(var m in a.open(o.method||"get",t,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(h,p,y){i.push(p=p.toLowerCase()),c.push([p,y]),d[p]=d[p]?d[p]+","+y:y}),n(u())},a.onerror=r,a.withCredentials="include"==o.credentials,o.headers)a.setRequestHeader(m,o.headers[m]);a.send(o.body||null)})}("".concat(o,"?").concat(function(o){return Object.keys(o).map(function(n){var r=o[n];return"".concat(n,"=").concat(encodeURIComponent(r))}).join("&")}(n)),{mode:"cors"}).then(function(r){return r.json()})}},ja=function(){function t(o){(function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),o=Object.assign({},Ia,o||{}),this.options=o,this.state={currentRequest:null,pendingRequest:null},this.selected=null}return function(t,o,n){o&&mn(t.prototype,o)}(t,[{key:"_getAutocompleteResponse",value:function(n,r,a,i,c,d){var u=Object.assign({},this.options.params,{q:n,type:this.options.type,caretpos:r,supplerendebynavn:c,stormodtagerpostnumre:d,multilinje:!0});return this.options.fuzzy&&(u.fuzzy=""),i&&(u.adgangsadresseid=i),a&&(u.startfra="adgangsadresse"),this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),u)}},{key:"_scheduleRequest",value:function(n){null!==this.state.currentRequest?this.state.pendingRequest=n:(this.state.currentRequest=n,this._executeRequest())}},{key:"_executeRequest",value:function(){var c,d,n=this,r=this.state.currentRequest,a=null,i=!1;if(r.selected){var u=r.selected;if(u.type===this.options.type)return this.options.selectCallback(u),this.selected=u,void this._requestCompleted();a="adgangsadresse"===u.type?u.data.id:null,i="vejnavn"===u.type,c=u.tekst,d=u.caretpos}else c=r.text,d=r.caretpos;if(r.selectedId){var m={id:r.selectedId,type:this.options.type};return this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),m).then(function(h){return n._handleResponse(r,h)},function(h){return n._handleFailedRequest(r,h)})}r.selected||r.text.length>=this.options.minLength?this._getAutocompleteResponse(c,d,i,a,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(h){return n._handleResponse(r,h)},function(h){return n._handleFailedRequest(r,h)}):this._handleResponse(r,[])}},{key:"_handleFailedRequest",value:function(n,r){var o,a=this;return console.error("DAWA request failed",r),(o=this.options.retryDelay,new Promise(function(n){return setTimeout(n,o)})).then(function(){a.state.pendingRequest||a._scheduleRequest(n),a._requestCompleted()})}},{key:"_handleResponse",value:function(n,r){if(n.selected)if(1===r.length){var a=r[0];a.type===this.options.type?this.options.selectCallback(a):this.state.pendingRequest||(this.state.pendingRequest={selected:a})}else this.options.renderCallback&&this.options.renderCallback(r);else n.selectedId?1===r.length&&(this.selected=r[0],this.options.initialRenderCallback(r[0].tekst)):this.options.renderCallback&&this.options.renderCallback(r);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(n){this.options.renderCallback=n}},{key:"setInitialRenderCallback",value:function(n){this.options.initialRenderCallback=n}},{key:"setSelectCallback",value:function(n){this.options.selectCallback=n}},{key:"update",value:function(n,r){this._scheduleRequest({text:n,caretpos:r})}},{key:"select",value:function(n){this._scheduleRequest({selected:n})}},{key:"selectInitial",value:function(n){this._scheduleRequest({selectedId:n})}},{key:"destroy",value:function(){}}]),t}();const La=["input"];function $a(t,o){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title",2),e._uU(3," Adresses\xf8gning "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content"),e.TgZ(5,"div",3),e._UZ(6,"input",4,5),e.qZA(),e.qZA())}const Ua=function(){return[0,.8]};let Ea=(()=>{class t{constructor(n,r){this.mapService=n,this.store=r,this.showModal$=this.store.select("mapTools","activatedMapTools").pipe((0,G.U)(a=>a.includes("geoSearch")))}ngAfterViewInit(){this.autocomplete=function(t,o){o=Object.assign({select:function(){return null}},o);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn","type"].reduce(function(i,c){return o.hasOwnProperty(c)&&(i[c]=o[c]),i},{});n.type||(n.type=o.adgangsadresserOnly?"adgangsadresse":"adresse");var r=new ja(n),a=function(o,n){var r=n.onSelect,a=n.onTextChange,i=n.render||Br,c=!1,d="",u=0,m=document.createElement("div");o.parentNode.insertBefore(m,o.nextSibling);var _,p={caretpos:2,inputText:"",selected:0,focused:document.activeElement===o,suggestions:[]},y=function(O){var U=O.value,we=O.selectionStart;p.caretpos=we,p.inputText=U,function(O,U){(d!==O||u!==U)&&(a(O,U),d=O,u=U)}(U,we)},T=function(O){var U=p.suggestions[O];p.inputText=U.tekst,p.caretpos=U.caretpos,p.suggestions=[],r(U),_(!0)},C=function(O){var U=window.event?O.keyCode:O.which;if(p.suggestions.length>0&&p.focused){if(40===U)p.selected=(p.selected+1)%p.suggestions.length,_();else if(38===U)p.selected=(p.selected-1+p.suggestions.length)%p.suggestions.length,_();else{if(13!==U&&9!==U)return!0;T(p.selected)}return O.preventDefault(),!1}},k=function(){p.focused=!0,_()},w=function(){return p.focused=!1,_(),!1},P=function(O){y(O.target)},$=function(O){return y(O.target)},D=!1,ie=!1;return(_=function(O){O&&(ie=!0),D||(D=!0,requestAnimationFrame(function(){c||(D=!1,ie&&(o.value=p.inputText,o.setSelectionRange(p.caretpos,p.caretpos)),ie=!1,i(m,p,function(U){return T(U)},n.multiline))}))})(),o.addEventListener("keydown",C),o.addEventListener("blur",w),o.addEventListener("focus",k),o.addEventListener("input",P),o.addEventListener("mouseup",$),o.setAttribute("aria-autocomplete","list"),o.setAttribute("autocomplete","off"),{destroy:function(){c=!0,o.removeEventListener("keydown",C),o.removeEventListener("blur",w),o.removeEventListener("focus",k),o.removeEventListener("input",P),o.removeEventListener("mouseup",$),fn(m,function(){}),m.remove()},setSuggestions:function(O){p.suggestions=O,p.selected=0,_()},selectAndClose:function(O){p.inputText=O,p.caretpos=O.length,p.suggestions=[],p.selected=0,_(!0)}}}(t,{onSelect:function(c){r.select(c)},onTextChange:function(c,d){r.update(c,d)},render:o.render,multiline:o.multiline||!1});return r.setRenderCallback(function(i){return a.setSuggestions(i)}),r.setSelectCallback(function(i){a.selectAndClose(i.tekst),o.select(i)}),r.setInitialRenderCallback(function(i){return a.selectAndClose(i)}),o.id&&r.selectInitial(o.id),{id:function(c){return r.selectInitial(c)},destroy:function(){return a.destroy()},selected:function(){return r.selected}}}(this.input.nativeElement,{select:n=>{const r=[n.data.x,n.data.y];this.mapService.removeLayer("marker"),this.mapService.addMarker(r),this.mapService.flyTo(r)},adgangsadresserOnly:!0}),setTimeout(()=>{this.input.nativeElement.focus()},500)}ngOnDestroy(){this.autocomplete.destroy(),console.log("DESTROY SEARCH")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.S),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-geo-search"]],viewQuery:function(n,r){if(1&n&&e.Gf(La,5),2&n){let a;e.iGM(a=e.CRH())&&(r.input=a.first)}},decls:3,vars:6,consts:[[3,"isOpen","initialBreakpoint","breakpoints"],["color","primary"],[1,"ion-text-center"],[1,"autocomplete-container"],["placeholder","S\xf8g adresse","type","search","id","dawa-autocomplete-input"],["input",""]],template:function(n,r){1&n&&(e.TgZ(0,"ion-modal",0),e.ALo(1,"async"),e.YNc(2,$a,8,0,"ng-template"),e.qZA()),2&n&&e.Q6J("isOpen",e.lcZ(1,3,r.showModal$))("initialBreakpoint",.8)("breakpoints",e.DdM(5,Ua))},directives:[f.ki,f.Gu,f.sr,f.wd,f.W2],pipes:[Z.Ov],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:30em;padding:10px;margin:auto}.autocomplete-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border-radius:5px;border:.01px solid var(--ion-color-medium)}"],changeDetection:0}),t})();var Vn=S(591),Wn=S(9385);let Na=(()=>{class t{constructor(n,r,a){this.mapService=n,this.notification=r,this.store=a,this.showModal=!1,this.adandon$=new Ht.xQ,this.dawaInfo$=new Vn.X(null),this.disableAddressButton$=this.store.select("map","viewParams").pipe((0,G.U)(i=>(null==i?void 0:i.zoom)<15))}onShowPOI(){this.mapService.removeLayer("adresser"),this.mapService.addAdresserWithinViewExtent(),this.notification.presentToast({message:"Klik p\xe5 adresse for info",duration:2e3,position:"top",color:"secondary"})}ngOnDestroy(){this.mapService.removeLayer("adresser")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.S),e.Y36(Wn.w),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-info-tool"]],decls:4,vars:6,consts:[["color","tertiary",3,"disabled","click"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-button",0),e.NdJ("click",function(){return r.onShowPOI()}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"async"),e.qZA()),2&n&&(e.Q6J("disabled",e.lcZ(1,2,r.disableAddressButton$)),e.xp6(2),e.hij(" ",!1===e.lcZ(3,4,r.disableAddressButton$)?"Hent adresser":"Zoom l\xe6ngere ind for info","\n"))},directives:[f.YG],pipes:[Z.Ov],styles:["ion-chip[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"],changeDetection:0}),t})();var Xn=S(373);function qa(t,o){1&t&&e._UZ(0,"ion-spinner",4)}let Ra=(()=>{class t{constructor(n,r){this.mapService=n,this.mapStoreService=r,this.tracking$=this.mapStoreService.mapstate$.pipe((0,Xn.j)("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe((0,Xn.j)("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.S),e.Y36(lt.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e.NdJ("click",function(){return r.onToggleGeolocate()}),e._UZ(2,"ion-icon",2),e.YNc(3,qa,1,0,"ion-spinner",3),e.ALo(4,"async"),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("color",r.tracking?"danger":"primary"),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,2,r.locating$)))},directives:[f.IJ,f.W4,f.gu,Z.O5,f.PQ],pipes:[Z.Ov],styles:[""],changeDetection:0}),t})();var rt=S(8200),Fa=S(2880);function Ja(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("Point")}),e._UZ(2,"i",3),e.qZA(),e.TgZ(3,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("LineString")}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("Polygon")}),e._UZ(6,"i",5),e.qZA(),e.TgZ(7,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onEndDraw()}),e._UZ(8,"ion-icon",6),e.qZA(),e.BQk()}}function Ya(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",9),e.TgZ(1,"ion-icon",10),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onDisableEditMode()}),e.qZA(),e.qZA()}}function Ga(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onUndo()}),e._UZ(1,"ion-icon",12),e.qZA()}}function Qa(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onDelete()}),e._UZ(1,"ion-icon",13),e.qZA()}}function Ba(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onSave()}),e._UZ(1,"ion-icon",14),e.qZA()}}function za(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ya,2,0,"ion-fab-button",7),e.ALo(2,"async"),e.YNc(3,Ga,2,0,"ion-fab-button",8),e.ALo(4,"async"),e.YNc(5,Qa,2,0,"ion-fab-button",8),e.ALo(6,"async"),e.YNc(7,Ba,2,0,"ion-fab-button",8),e.ALo(8,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,n.drawConfig$).showBack),e.xp6(2),e.Q6J("ngIf","Point"!==n.drawGeometry&&e.lcZ(4,6,n.drawConfig$).showUndo),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,8,n.drawConfig$).showDelete),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,10,n.drawConfig$).showSave)}}function Ha(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-header"),e._UZ(1,"ion-toolbar",15),e.qZA(),e.TgZ(2,"ion-content"),e.TgZ(3,"form",16),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onAddFeature()}),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",17),e.qZA(),e.TgZ(6,"ion-item"),e._UZ(7,"ion-textarea",18),e.qZA(),e.TgZ(8,"ion-button",19),e._uU(9,"Gem geometri"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.featureProperties)}}const Va=function(){return[0,.4,.5]};let Wa=(()=>{class t{constructor(n,r,a){this.mapService=n,this.fb=r,this.store=a,this.showModal=!1,this.drawConfig$=this.store.select("drawTool")}ngOnInit(){this.store.dispatch(rt.T_()),this.featureProperties=this.fb.group({name:["",[E.kI.required]],description:[""]})}onStartDraw(n){this.mapService.removeClickInfo(),this.mapService.removeDrawTool(),this.drawGeometry=n,this.mapService.activateDrawTool(n),this.store.dispatch(rt.vs({change:{prop:"inEditMode",value:!0}}))}onEndDraw(){this.store.dispatch(tn.lu({tool:"draw"})),this.mapService.removeDrawTool(),this.mapService.addClickInfo()}onDisableEditMode(){this.store.dispatch(rt.vs({change:{prop:"inEditMode",value:!1}}))}onUndo(){this.mapService.removeLastDrawPoint()}onDelete(){this.mapService.removeDrawTool(),this.onStartDraw(this.drawGeometry)}onSave(){this.mapService.finishDrawing(),this.mapService.changeLayerStyle("draw",Fa.l.default),this.onDisableEditMode(),this.showModal=!0}onAddFeature(){this.store.dispatch(rt.TN({properties:this.featureProperties.value})),this.showModal=!1}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.S),e.Y36(E.qu),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-draw-tool"]],decls:6,vars:10,consts:[[4,"ngIf"],[3,"isOpen","initialBreakpoint","breakpoints"],["size","small","color","primary",3,"click"],[1,"fg-point","fg-lg"],[1,"fg-polyline-pt","fg-lg"],[1,"fg-polygon-pt","fg-lg"],["name","close"],["size","small","color","secondary",4,"ngIf"],["size","small","color","secondary",3,"click",4,"ngIf"],["size","small","color","secondary"],["name","arrow-back-outline",3,"click"],["size","small","color","secondary",3,"click"],["name","arrow-undo-circle-outline"],["name","trash"],["name","save"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(n,r){1&n&&(e.YNc(0,Ja,9,0,"ng-container",0),e.ALo(1,"async"),e.YNc(2,za,9,12,"ng-container",0),e.ALo(3,"async"),e.TgZ(4,"ion-modal",1),e.YNc(5,Ha,10,1,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf",!1===e.lcZ(1,5,r.drawConfig$).inEditMode),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,7,r.drawConfig$).inEditMode),e.xp6(2),e.Q6J("isOpen",r.showModal)("initialBreakpoint",.4)("breakpoints",e.DdM(9,Va)))},directives:[Z.O5,f.ki,f.W4,f.gu,f.Gu,f.sr,f.W2,E._Y,E.JL,E.sg,f.Ie,f.pK,f.j9,E.JJ,E.u,f.g2,f.YG],pipes:[Z.Ov],styles:[""],changeDetection:0}),t})();var Kn=S(6939);let Xa=(()=>{class t{constructor(n){this.store=n}ngOnInit(){this.store.dispatch(Vt.js())}onApprovePosition(){this.store.dispatch(Kn.Yw()),this.store.dispatch(Kn.Kl())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-photo-tool"]],decls:2,vars:0,consts:[["size","large","color","tertiary",1,"ion-margin",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-button",0),e.NdJ("click",function(){return r.onApprovePosition()}),e._uU(1," V\xc6LG PLACERING\n"),e.qZA())},directives:[f.YG],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}"],changeDetection:0}),t})();var Ka=S(760),ei=S(1086),ti=S(7224),ni=S(1406),oi=S(6453),ue=S(4012);let ri=(()=>{class t{constructor(){this.initialState={activatedMapTools:[],uploadingImage:!1,drawConfig:{inEditMode:!1,showBack:!0,showDelete:!0,showSave:!0,showUndo:!0}},this._uiState$=new Vn.X(this.initialState),this.uiState$=this._uiState$.asObservable()}updateUiState(n,r){const a=Object.assign(Object.assign({},this._uiState$.value),{[n]:r});this._uiState$.next(a)}toggleUiState(n){const r=Object.assign(Object.assign({},this._uiState$.value),{[n]:!this._uiState$.value[n]});this._uiState$.next(r)}shiftMapTool(n){const r=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:[n]});this._uiState$.next(r)}addMapTool(n){const r=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:[...this._uiState$.value.activatedMapTools,n]});this._uiState$.next(r)}removeMapTool(n){const r=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:this._uiState$.value.activatedMapTools.filter(a=>a!==n)});this._uiState$.next(r)}removeAllMapTools(){const n=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:[]});this._uiState$.next(n)}updateDrawUiState(n,r){const a=Object.assign(Object.assign({},this._uiState$.value),{drawConfig:Object.assign(Object.assign({},this._uiState$.value.drawConfig),{[n]:r})});this._uiState$.next(a)}resetDrawUiState(){Object.assign(Object.assign({},this._uiState$.value),{drawConfig:this.initialState.drawConfig})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ai=S(2111);function ii(t,o){1&t&&(e.TgZ(0,"ion-badge"),e._uU(1,"Zoom ind for at v\xe6lge matrikler"),e.qZA())}function si(t,o){1&t&&(e.TgZ(0,"ion-badge"),e._uU(1,"Tryk p\xe5 kortet for at tegne"),e.qZA())}function ci(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab",6),e.TgZ(1,"ion-fab-button",7),e.NdJ("click",function(){return e.CHM(n),e.oxw().toggleModal()}),e._UZ(2,"ion-icon",8),e.qZA(),e.qZA()}}function li(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-header"),e._UZ(1,"ion-toolbar",9),e.qZA(),e.TgZ(2,"ion-content"),e.TgZ(3,"form",10),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onCreateProject()}),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",11),e.qZA(),e.TgZ(6,"ion-item"),e._UZ(7,"ion-textarea",12),e.qZA(),e.TgZ(8,"ion-button",13),e._uU(9,"Opret projekt"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.project)}}const ui=function(){return[0,.4,.5]};let pi=(()=>{class t{constructor(n,r,a,i,c,d,u,m){this.router=n,this.fb=r,this.noticationService=a,this.mapService=i,this.mapStore=c,this.uiState=d,this.dawaService=u,this.store=m,this.showModal=!1,this.bounds=ue.n,this.selectedArea$=this.store.select("map","selectedFeatures"),this.drawnGeometry$=this.store.select("map","drawnFeature")}ngOnInit(){this.project=this.fb.group({name:["",[E.kI.required]],description:[""]}),this.disableMatrikel$=this.store.select("map","viewParams").pipe((0,G.U)(n=>(null==n?void 0:n.zoom)<15)),this.store.select("saveProject","error").pipe((0,en.h)(n=>!!n),(0,ye.b)(n=>this.noticationService.presentToast({header:"Noget gik galt",message:n,duration:5e3,color:"danger",position:"top"}))).subscribe()}ngOnDestroy(){this.mapService.removeLayer("jordstykke")}toggleModal(){let n;switch(this.showModal=!this.showModal,this.boundsSource){case ue.n.Matrikel:n=this.store.select("map","selectedFeatures").pipe((0,G.U)(r=>r[0].feature.getGeometry().getExtent()));break;case ue.n.Draw:n=this.mapStore.drawnGeometry$;break;case ue.n.ViewExtent:n=(0,ei.of)(this.mapService.getViewExtent().getGeometry().getExtent())}n.pipe((0,ti.P)(),(0,G.U)(r=>this.mapService.transform((0,Ka.qg)(r),"EPSG:3857","EPSG:4326")),(0,ni.b)(r=>this.dawaService.reverseGeocode(r[0],r[1])),(0,ye.b)(r=>this.project.patchValue({name:`${r.vejnavn} ${r.husnr}`,description:`N\xe6r ${r.adressebetegnelse} - Matrikel: ${r.matrikelnr}, ${r.ejerlav.navn}`}))).subscribe()}selectionMethodChanged(n){switch(this.boundsSource=n.detail.value,this.boundsSource){case ue.n.Matrikel:this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),this.mapService.addMatrikelWithinViewExtent(),this.uiState.removeMapTool("draw");break;case ue.n.Draw:this.uiState.updateDrawUiState("inEditMode",!0),this.uiState.updateDrawUiState("showBack",!1),this.uiState.updateDrawUiState("showSave",!1),this.mapService.removeLayer("jordstykke"),this.mapService.removeDrawTool(),this.mapService.activateDrawTool("Polygon"),this.uiState.addMapTool("draw");break;case ue.n.ViewExtent:this.mapService.removeLayer("jordstykke"),this.uiState.removeMapTool("draw"),this.mapService.removeDrawTool()}}onCreateProject(){this.boundsSource===ue.n.Draw&&(this.mapService.finishDrawing(),this.uiState.removeMapTool("draw")),this.toggleModal(),this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),setTimeout(()=>{this.uiState.removeAllMapTools(),this.store.dispatch(oi.UI({payload:Object.assign(Object.assign({},this.project.value),{bounds:this.boundsSource})})),this.router.navigateByUrl("/app/projects")},250)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Ze.F0),e.Y36(E.qu),e.Y36(Wn.w),e.Y36(oe.S),e.Y36(lt.C),e.Y36(ri),e.Y36(ai.r),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-save-project"]],decls:15,vars:16,consts:[[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed",4,"ngIf"],["mode","md",3,"ionChange"],[3,"disabled","value"],[3,"value"],[3,"isOpen","initialBreakpoint","breakpoints"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","checkmark-outline"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(n,r){1&n&&(e.YNc(0,ii,2,0,"ion-badge",0),e.ALo(1,"async"),e.YNc(2,si,2,0,"ion-badge",0),e.YNc(3,ci,3,0,"ion-fab",1),e.ALo(4,"async"),e.TgZ(5,"ion-segment",2),e.NdJ("ionChange",function(i){return r.selectionMethodChanged(i)}),e.TgZ(6,"ion-segment-button",3),e.ALo(7,"async"),e.TgZ(8,"ion-label"),e._uU(9,"Matrikel"),e.qZA(),e.qZA(),e.TgZ(10,"ion-segment-button",4),e.TgZ(11,"ion-label"),e._uU(12,"Kortudsnit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-modal",5),e.YNc(14,li,10,1,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf",e.lcZ(1,9,r.disableMatrikel$)&&void 0===r.boundsSource),e.xp6(2),e.Q6J("ngIf",r.boundsSource===r.bounds.Draw),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,11,r.selectedArea$)&&r.boundsSource===r.bounds.Matrikel||r.boundsSource===r.bounds.Draw||r.boundsSource===r.bounds.ViewExtent),e.xp6(3),e.Q6J("disabled",e.lcZ(7,13,r.disableMatrikel$))("value",r.bounds.Matrikel),e.xp6(4),e.Q6J("value",r.bounds.ViewExtent),e.xp6(3),e.Q6J("isOpen",r.showModal)("initialBreakpoint",.4)("breakpoints",e.DdM(15,ui)))},directives:[Z.O5,f.cJ,f.QI,f.GO,f.Q$,f.ki,f.yp,f.IJ,f.W4,f.gu,f.Gu,f.sr,f.W2,E._Y,E.JL,E.sg,f.Ie,f.pK,f.j9,E.JJ,E.u,f.g2,f.YG],pipes:[Z.Ov],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}.fab-vertical-bottom[_ngcontent-%COMP%]{bottom:55px}"],changeDetection:0}),t})();function fi(t,o){1&t&&e._UZ(0,"ion-progress-bar",4)}function di(t,o){1&t&&e._UZ(0,"app-geo-search")}function vi(t,o){1&t&&e._UZ(0,"app-info-tool",5)}function mi(t,o){1&t&&e._UZ(0,"app-map-geolocation")}function gi(t,o){1&t&&e._UZ(0,"app-map-draw-tool")}function hi(t,o){1&t&&e._UZ(0,"app-photo-tool",5)}function _i(t,o){1&t&&e._UZ(0,"app-save-project",5)}function yi(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"ion-chip",7),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"ion-icon",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().onClearProject()}),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,1,n.selectedProject$).name)}}const bi=[{path:"",component:(()=>{class t{constructor(n,r,a,i,c,d){this.rounter=n,this.route=r,this.mapStore=a,this.mapService=i,this.modalController=c,this.store=d,this.abandon$=new Ht.xQ,this.loading$=this.mapStore.mapstate$.pipe((0,G.U)(({loadingFeatureInfo:u,loadingLayer:m})=>({loadingFeatureInfo:u,loadingLayer:m})),(0,G.U)(u=>Object.values(u).some(m=>m))),this.activatedMapTools$=this.store.select("mapTools","activatedMapTools"),this.selectedProject$=this.store.select("project","selectedProject")}ngOnInit(){this.route.queryParams.pipe((0,mo.q)(1),(0,ye.b)(r=>{const a=[Number(r.x),Number(r.y)],i=Number(r.zoom);a[0]&&setTimeout(()=>{this.mapService.setView({center:a,zoom:i})},3e3)})).subscribe(),this.store.select("map","viewParams").pipe((0,G.U)(r=>({x:null==r?void 0:r.center[0],y:null==r?void 0:r.center[1],zoom:null==r?void 0:r.zoom}))).pipe((0,go.R)(this.abandon$),(0,ye.b)(r=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:r})})).subscribe()}ngOnDestroy(){this.abandon$.next()}ionViewDidEnter(){this.mapService.resize()}onClearProject(){this.store.dispatch(ho._G()),this.store.dispatch(Vt.jd())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Ze.F0),e.Y36(Ze.gz),e.Y36(lt.C),e.Y36(oe.S),e.Y36(f.IN),e.Y36(re.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-tap-map"]],decls:22,vars:24,consts:[["type","indeterminate","color","tertiary",4,"ngIf"],[4,"ngIf"],["class","full-width-bottom-tool",4,"ngIf"],["class","current-project",4,"ngIf"],["type","indeterminate","color","tertiary"],[1,"full-width-bottom-tool"],[1,"current-project"],["color","primary","outline","",1,"project-chip"],["name","close-circle",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-content"),e.YNc(1,fi,1,0,"ion-progress-bar",0),e.ALo(2,"async"),e.TgZ(3,"app-map"),e._UZ(4,"app-map-layers-control"),e._UZ(5,"app-map-legend-fab"),e._UZ(6,"app-map-feature-info"),e.TgZ(7,"app-map-tools"),e.YNc(8,di,1,0,"app-geo-search",1),e.ALo(9,"async"),e.YNc(10,vi,1,0,"app-info-tool",2),e.ALo(11,"async"),e.YNc(12,mi,1,0,"app-map-geolocation",1),e.ALo(13,"async"),e.YNc(14,gi,1,0,"app-map-draw-tool",1),e.ALo(15,"async"),e.YNc(16,hi,1,0,"app-photo-tool",2),e.ALo(17,"async"),e.YNc(18,_i,1,0,"app-save-project",2),e.ALo(19,"async"),e.qZA(),e.qZA(),e.YNc(20,yi,6,3,"div",3),e.ALo(21,"async"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,8,r.loading$)),e.xp6(7),e.Q6J("ngIf",e.lcZ(9,10,r.activatedMapTools$).includes("geoSearch")),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,12,r.activatedMapTools$).includes("addressInfo")),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(13,14,r.activatedMapTools$).includes("saveProject")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,16,r.activatedMapTools$).includes("draw")),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,18,r.activatedMapTools$).includes("takePhoto")),e.xp6(2),e.Q6J("ngIf",e.lcZ(19,20,r.activatedMapTools$).includes("saveProject")),e.xp6(2),e.Q6J("ngIf",null!==e.lcZ(21,22,r.selectedProject$)))},directives:[f.W2,Z.O5,bo,Zo,Po,Qo,Ho,f.X7,Ea,Na,Ra,Wa,Xa,pi,f.hM,f.Q$,f.gu],pipes:[Z.Ov],styles:[".current-project[_ngcontent-%COMP%]{position:fixed;z-index:100;top:10px;width:100%;text-align:center}.project-chip[_ngcontent-%COMP%]{background:rgba(255,255,255,.4)}ion-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0px;z-index:100}app-map-draw-tool[_ngcontent-%COMP%]{position:fixed;top:calc(50% - 76px);z-index:100;background-color:rgba(var(--ion-color-tertiary-rgb),.8);border-radius:28px}.full-width-bottom-tool[_ngcontent-%COMP%]{position:fixed;z-index:10;bottom:0;width:100%}app-info-tool[_ngcontent-%COMP%], app-photo-tool[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),t})()}];let Ti=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[Ze.Bz.forChild(bi)],Ze.Bz]}),t})(),Ci=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[f.Pc,Z.ez,E.u5,E.UX,Ti]]}),t})()}}]);