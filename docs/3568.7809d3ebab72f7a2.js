(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3568],{3568:(bt,He,w)=>{"use strict";w.r(He),w.d(He,{MapPageModule:()=>yi});var u=w(3349),k=w(9808),U=w(3075),oe=w(5330),De=w(8929),Y=w(4850),X=w(2986),K=w(2994),Me=w(7625),T=w(6591),e=w(5e3),H=w(8273),M=w(8222),j=w(5094);function Tt(t,o){1&t&&e._UZ(0,"div",2)}const Ve=["*"];let Le=(()=>{class t{constructor(n,r){this.mapService=n,this.store=r,this.showMapCenter$=this.store.select("mapTools","activatedMapTools").pipe((0,Y.U)(a=>a.includes("takePhoto"))),this.center=[1360103,7491908],this.zoom=13}ngAfterViewInit(){this.mapService.createMap(this.center,this.zoom)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.S),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map"]],ngContentSelectors:Ve,decls:4,vars:3,consts:[["id","ol-map",1,"map-container"],["id","center",4,"ngIf"],["id","center"]],template:function(n,r){1&n&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,Tt,1,0,"div",1),e.ALo(2,"async"),e.Hsn(3),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.showMapCenter$)))},directives:[k.O5],pipes:[k.Ov],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}#center[_ngcontent-%COMP%]{top:50%;left:50%;margin-top:-13px;margin-left:-13px;padding:10px;border:3px dashed #fc1717;border-radius:50%;z-index:10000;position:absolute}"],changeDetection:0}),t})();var Ee=w(655),ge=w(7037);function he(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-item",14),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-toggle",15),e.NdJ("ionChange",function(a){const c=e.CHM(n).$implicit,d=e.oxw().$implicit;return e.oxw(2).onOverlayToggle(a,d,c)}),e.qZA(),e.qZA()}if(2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n.label),e.xp6(1),e.Q6J("name",n.name)("checked",n.addedToMap)}}function bo(t,o){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-accordion-group"),e.TgZ(2,"ion-accordion"),e.TgZ(3,"ion-item",10),e._UZ(4,"ion-icon",11),e.TgZ(5,"ion-label"),e._uU(6),e.qZA(),e.TgZ(7,"ion-badge",12),e._uU(8),e.qZA(),e.qZA(),e.YNc(9,he,4,3,"ion-item",13),e.qZA(),e.qZA(),e.qZA()),2&t){const n=o.$implicit,r=e.oxw(2);e.xp6(4),e.Q6J("name",n.icon),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.AsE("",n.layerCount.added,"/",n.layerCount.total,""),e.xp6(1),e.Q6J("ngForOf",n.layers)("ngForTrackBy",r.trackItems)}}function To(t,o){if(1&t&&(e.ynx(0),e.YNc(1,bo,10,6,"ion-list",9),e.ALo(2,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,n.overlays$))("ngForTrackBy",n.trackItems)}}const cn=function(t){return{selected:t}};function Co(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-col",17),e.TgZ(1,"div",18),e.NdJ("click",function(){const i=e.CHM(n).$implicit;return e.oxw(2).onBaseLayerSelect(i)}),e.TgZ(2,"ion-card",19),e.ALo(3,"async"),e._UZ(4,"ion-img",20),e.qZA(),e.TgZ(5,"ion-text",21),e.ALo(6,"async"),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=o.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,cn,n.id===e.lcZ(3,4,r.selectedBaseMap$))),e.xp6(2),e.Q6J("src",n.image),e.xp6(1),e.Q6J("ngClass",e.VKq(10,cn,n.id===e.lcZ(6,6,r.selectedBaseMap$))),e.xp6(2),e.hij(" ",n.name," ")}}function wo(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row"),e.YNc(3,Co,8,12,"ion-col",16),e.ALo(4,"async"),e.qZA(),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,n.baseMaps$))}}let So=(()=>{class t{constructor(n,r,a){this.modalController=n,this.mapLayersService=r,this.mapService=a,this.segment="overlays"}ngOnInit(){this.baseMaps$=this.mapLayersService.baseMaps$,this.overlays$=this.mapLayersService.overlays$.pipe((0,Y.U)(n=>n.map(r=>Object.assign(Object.assign({},r),{layerCount:{total:r.layers.length,added:r.layers.filter(a=>a.addedToMap).length}})))),this.selectedBaseMap$=this.mapLayersService.selectedBaseMap$}onOverlayToggle(n,r,a){this.mapLayersService.updateOverlays(r.name,a.name,n.detail.checked),n.detail.checked?this.mapService.addWMSLayer(r.url,a):this.mapService.removeLayer(a.name)}onBaseLayerSelect(n){this.mapLayersService.changeSelectedBaseMap(n.id),this.mapService.changeBaseMap(n.id)}dismiss(){this.modalController.dismiss()}trackItems(n,r){return r.name}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.IN),e.Y36(ge.Y),e.Y36(M.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-layers-control-modal"]],decls:12,vars:3,consts:[["mode","md",1,"ion-padding-top",3,"ngModel","ngModelChange"],["value","overlays"],["name","layers-outline"],["value","baselayers"],["name","map-outline"],[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed"],["size","small","color","primary",3,"click"],["name","checkmark"],[4,"ngFor","ngForOf","ngForTrackBy"],["slot","header"],["slot","start",3,"name"],["color","secondary"],["slot","content",4,"ngFor","ngForOf","ngForTrackBy"],["slot","content"],["mode","md","slot","end",3,"name","checked","ionChange"],["size","4","class","ion-text-center",4,"ngFor","ngForOf"],["size","4",1,"ion-text-center"],[1,"base-map",3,"click"],[3,"ngClass"],[3,"src"],["color","medium",3,"ngClass"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-segment",0),e.NdJ("ngModelChange",function(i){return r.segment=i}),e.TgZ(2,"ion-segment-button",1),e._UZ(3,"ion-icon",2),e.qZA(),e.TgZ(4,"ion-segment-button",3),e._UZ(5,"ion-icon",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content"),e.YNc(7,To,3,4,"ng-container",5),e.YNc(8,wo,5,3,"ng-container",5),e.qZA(),e.TgZ(9,"ion-fab",6),e.TgZ(10,"ion-fab-button",7),e.NdJ("click",function(){return r.dismiss()}),e._UZ(11,"ion-icon",8),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngModel",r.segment),e.xp6(6),e.Q6J("ngIf","overlays"===r.segment),e.xp6(1),e.Q6J("ngIf","baselayers"===r.segment))},directives:[u.Gu,u.cJ,u.QI,U.JJ,U.On,u.GO,u.gu,u.W2,k.O5,u.IJ,u.W4,k.sg,u.q_,u.eh,u.We,u.Ie,u.Q$,u.yp,u.ho,u.w,u.jY,u.Nd,u.wI,u.PM,k.mk,u.Xz,u.yW],pipes:[k.Ov],styles:["ion-segment[_ngcontent-%COMP%]{--background: var(--ion-color-tertiary)}ion-accordion.accordion-expanding[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%], ion-accordion.accordion-expanded[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%]{--color: var(--ion-color-primary-contrast);--background: var(--ion-color-primary)}ion-accordion.accordion-expanding[_ngcontent-%COMP%]   ion-item[slot=content][_ngcontent-%COMP%], ion-accordion.accordion-expanded[_ngcontent-%COMP%]   ion-item[slot=content][_ngcontent-%COMP%]{--background: var(--ion-color-light-tint)}ion-card[_ngcontent-%COMP%]{--background: var(--ion-color-secondary)}ion-card.selected[_ngcontent-%COMP%]{outline:4px solid var(--ion-color-secondary);outline-offset:5px;transition:ease-in-out .2s}.selected[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-weight:700;transition:ease-in-out .2s}"],changeDetection:0}),t})(),xo=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}onShowLayersControl(){return(0,Ee.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:So,cssClass:"layer-control-modal",breakpoints:[0,.5,1],initialBreakpoint:.5})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-layers-control"]],decls:3,vars:0,consts:[["horizontal","end","vertical","top","slot","fixed"],["color","primary",3,"click"],["name","layers-outline"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e.NdJ("click",function(){return r.onShowLayersControl()}),e._UZ(2,"ion-icon",2),e.qZA(),e.qZA())},directives:[u.IJ,u.W4,u.gu],styles:[""],changeDetection:0}),t})();function Mo(t,o){1&t&&e._UZ(0,"img",1),2&t&&e.Q6J("src",o.$implicit,e.LSH)}let Zo=(()=>{class t{constructor(n){this.mapLayersService=n,this.legends$=this.mapLayersService.legends$}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(ge.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-legend-popover"]],decls:2,vars:3,consts:[[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(n,r){1&n&&(e.YNc(0,Mo,1,1,"img",0),e.ALo(1,"async")),2&n&&e.Q6J("ngForOf",e.lcZ(1,1,r.legends$))},directives:[k.sg],pipes:[k.Ov],styles:["img[_ngcontent-%COMP%]{display:block;padding:10px}"],changeDetection:0}),t})();function Ao(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab",1),e.TgZ(1,"ion-fab-button",2),e.NdJ("click",function(a){return e.CHM(n),e.oxw().onShowPopover(a)}),e._UZ(2,"i",3),e.qZA(),e.qZA()}}let ko=(()=>{class t{constructor(n,r){this.popoverController=n,this.mapLayersService=r,this.showLegend$=this.mapLayersService.legends$.pipe((0,Y.U)(a=>0!==a.length))}onShowPopover(n){return(0,Ee.mG)(this,void 0,void 0,function*(){yield(yield this.popoverController.create({component:Zo,cssClass:"legend-popover",translucent:!0,showBackdrop:!1,animated:!1,event:n})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.Dh),e.Y36(ge.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-legend-fab"]],decls:2,vars:3,consts:[["horizontal","start","vertical","bottom","slot","fixed",4,"ngIf"],["horizontal","start","vertical","bottom","slot","fixed"],[3,"click"],[1,"fg-map-legend-o","fg-2x"]],template:function(n,r){1&n&&(e.YNc(0,Ao,3,0,"ion-fab",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,r.showLegend$))},directives:[k.O5,u.IJ,u.W4],pipes:[k.Ov],styles:[""],changeDetection:0}),t})();var We=w(5254),Ct=w(2198),Oo=w(7545),wt=w(1709);function Po(t,o){if(1&t&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",2),e.TgZ(2,"ion-label",3),e.TgZ(3,"p"),e._uU(4,"Beskrivelse"),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(6),e.Oqu(n.properties.description)}}function Io(t,o){1&t&&e._UZ(0,"i",6)}function jo(t,o){1&t&&e._UZ(0,"i",7)}function Do(t,o){if(1&t&&(e.TgZ(0,"ion-item"),e.YNc(1,Io,1,0,"i",4),e.YNc(2,jo,1,0,"i",5),e.TgZ(3,"ion-label",3),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"h3"),e._uU(7),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf","POLYGON"===n.properties.geom_type),e.xp6(1),e.Q6J("ngIf","LINESTRING"===n.properties.geom_type),e.xp6(3),e.Oqu("POLYGON"===n.properties.geom_type?"Areal":"L\xe6ngde"),e.xp6(2),e.AsE(" ",n.properties.geom_measure," ","POLYGON"===n.properties.geom_type?"m2":"m"," ")}}let Lo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-draw-info"]],inputs:{properties:"properties"},decls:10,vars:3,consts:[["name","information-circle-outline","slot","start"],[4,"ngIf"],["name","chatbox-outline","slot","start"],[1,"ion-text-wrap"],["slot","start","class","fg-measure-area",4,"ngIf"],["slot","start","class","fg-measure-line",4,"ngIf"],["slot","start",1,"fg-measure-area"],["slot","start",1,"fg-measure-line"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-item"),e._UZ(2,"ion-icon",0),e.TgZ(3,"ion-label"),e.TgZ(4,"p"),e._uU(5,"Navn"),e.qZA(),e.TgZ(6,"h3"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,Po,7,1,"ion-item",1),e.YNc(9,Do,8,5,"ion-item",1),e.qZA()),2&n&&(e.xp6(7),e.Oqu(r.properties.name),e.xp6(1),e.Q6J("ngIf",r.properties.description.length>0),e.xp6(1),e.Q6J("ngIf",r.properties.geom_measure))},directives:[u.q_,u.Ie,u.gu,u.Q$,k.O5],styles:[".fg-measure-area[_ngcontent-%COMP%], .fg-measure-line[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:x-large}"]}),t})();var Eo=w(9441),Uo=w(7914),$o=w(2313);function No(t,o){if(1&t){const n=e.EpF();e.ynx(0),e._UZ(1,"img",2),e.TgZ(2,"ion-fab",3),e.TgZ(3,"ion-fab-button",4),e._UZ(4,"ion-icon",5),e.qZA(),e.TgZ(5,"ion-fab-list"),e.TgZ(6,"ion-fab-button",6),e.NdJ("click",function(){return e.CHM(n),e.oxw().onDownloadPhoto()}),e._UZ(7,"ion-icon",7),e.qZA(),e.TgZ(8,"ion-fab-button",6),e.NdJ("click",function(){return e.CHM(n),e.oxw().onDeletePhoto()}),e._UZ(9,"ion-icon",8),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=o.ngIf;e.xp6(1),e.Q6J("src",n,e.LSH)}}function qo(t,o){1&t&&(e.TgZ(0,"div",9),e._UZ(1,"ion-spinner",10),e._UZ(2,"br"),e.TgZ(3,"ion-text",11),e._uU(4,"Henter billede..."),e.qZA(),e.qZA())}let Ro=(()=>{class t{constructor(n,r,a,i){this.modalCtrl=n,this.supabase=r,this.domSanitizer=a,this.store=i}set properties(n){this.fileName=n.file_name.replace("images/",""),this.photoUrl$=this.getImageUrl(this.fileName),this.photoId=n.id,this.props=n}ngOnInit(){}getImageUrl(n){return this.supabase.downloadImage(n).pipe((0,K.b)(r=>this.imageBlob=r.data),(0,Y.U)(r=>this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(r.data))))}onDownloadPhoto(){(0,Eo.saveAs)(this.imageBlob,this.fileName)}onDeletePhoto(){this.store.dispatch(T.rV.deletePhoto({id:this.props.id})),this.modalCtrl.dismiss()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.IN),e.Y36(Uo.T),e.Y36($o.H7),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-photo-viewer"]],inputs:{properties:"properties"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"src"],["horizontal","end","vertical","top","slot","fixed"],["size","small","color","light"],["name","ellipsis-vertical-outline"],["color","light",3,"click"],["name","download-outline"],["name","trash-outline"],[1,"ion-text-center","ion-margin-top"],["color","primary"],["color","medium"]],template:function(n,r){if(1&n&&(e.YNc(0,No,10,1,"ng-container",0),e.ALo(1,"async"),e.YNc(2,qo,5,0,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,r.photoUrl$))("ngIfElse",a)}},directives:[k.O5,u.IJ,u.W4,u.gu,u.zq,u.PQ,u.yW],pipes:[k.Ov],styles:[""]}),t})(),Fo=(()=>{class t{oisUrl(n){return`http://gis.frederiksberg.dk/vaerktoejer/ois-link.html?komnr=${n.kommunekode}&ejdnr=${n.esrejendomsnr}`}dinGeoUrl(n){return`https://www.dingeo.dk/adresse/${n.postnr}-${n.postnrnavn}/${n.vejnavn}-${n.husnr}/`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-address-info"]],inputs:{properties:"properties"},decls:25,vars:6,consts:[["color","primary"],[1,"ion-text-center"],["fullscreen",""],["name","home-outline","slot","start"],["target","_blank",3,"href"],["name","link-outline","slot","start"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title",1),e._uU(3,"Adresseinfo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"ion-list"),e.TgZ(6,"ion-item"),e._UZ(7,"ion-icon",3),e.TgZ(8,"ion-label"),e.TgZ(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-item",4),e._UZ(14,"ion-icon",5),e.TgZ(15,"ion-label"),e._uU(16," OIS "),e.qZA(),e.qZA(),e.TgZ(17,"ion-item",4),e._UZ(18,"ion-icon",5),e.TgZ(19,"ion-label"),e._uU(20," DinGeo "),e.qZA(),e.qZA(),e.TgZ(21,"ion-item",4),e._UZ(22,"ion-icon",5),e.TgZ(23,"ion-label"),e._uU(24," De Gule Sider "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(10),e.Oqu(r.properties.betegnelse),e.xp6(2),e.AsE("",r.properties.matrikelnr,", ",r.properties.ejerlavnavn,""),e.xp6(1),e.Q6J("href",r.oisUrl(r.properties)),e.xp6(4),e.Q6J("href",r.dinGeoUrl(r.properties)),e.xp6(4),e.Q6J("href","https://kort.degulesider.dk/s/"+r.properties.betegnelse))},directives:[u.Gu,u.sr,u.wd,u.W2,u.q_,u.Ie,u.gu,u.Q$],styles:[""]}),t})();function Jo(t,o){if(1&t&&e._UZ(0,"app-draw-info",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}function Yo(t,o){if(1&t&&e._UZ(0,"app-photo-viewer",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}function Bo(t,o){if(1&t&&e._UZ(0,"app-address-info",1),2&t){const n=e.oxw();e.Q6J("properties",n.feature.properties)}}let Go=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}onCloseModal(){this.modalController.dismiss()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-feature-info-modal"]],inputs:{feature:"feature"},decls:3,vars:3,consts:[[3,"properties",4,"ngIf"],[3,"properties"]],template:function(n,r){1&n&&(e.YNc(0,Jo,1,1,"app-draw-info",0),e.YNc(1,Yo,1,1,"app-photo-viewer",0),e.YNc(2,Bo,1,1,"app-address-info",0)),2&n&&(e.Q6J("ngIf","projectFeatures"===r.feature.layerName),e.xp6(1),e.Q6J("ngIf","projectPhotos"===r.feature.layerName),e.xp6(1),e.Q6J("ngIf","adresser"===r.feature.layerName))},directives:[k.O5,Lo,Ro,Fo],styles:[""]}),t})(),Qo=(()=>{class t{constructor(n,r,a){this.modalController=n,this.mapService=r,this.store=a,this.infoLayers=["adresser","projectPhotos","projectFeatures"]}ngOnInit(){this.store.select("map","selectedFeatures").pipe((0,Ct.h)(n=>!!n&&n.filter(r=>this.infoLayers.includes(r.layerName)).length>0),(0,Y.U)(n=>({properties:n[0].feature.getProperties(),layerName:n[0].layerName})),(0,Oo.w)(n=>this.showModal(n)),(0,wt.zg)(n=>(0,We.D)(n.onDidDismiss()).pipe((0,K.b)(()=>this.mapService.clearFeatureSelection())))).subscribe()}showModal(n){return(0,We.D)(this.modalController.create({component:Go,componentProps:{feature:n},initialBreakpoint:.4,breakpoints:[0,.4,1]})).pipe((0,K.b)(r=>r.present()))}onCloseModal(){this.modalController.dismiss(),this.mapService.clearFeatureSelection()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.IN),e.Y36(M.S),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-feature-info"]],decls:0,vars:0,template:function(n,r){},styles:["ion-modal[_ngcontent-%COMP%]{pointer-events:none}ion-backdrop[_ngcontent-%COMP%]{pointer-events:none!important}"],changeDetection:0}),t})();function _e(t,o){return t(o={exports:{}},o.exports),o.exports}var x=_e(function(t){var o=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=o)}),se=_e(function(t){var o=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=o)}),ce=function(t){return"object"==typeof t?null!==t:"function"==typeof t},V=function(t){if(!ce(t))throw TypeError(t+" is not an object!");return t},fe=function(t){try{return!!t()}catch(o){return!0}},Ue=!fe(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),St=x.document,Ho=ce(St)&&ce(St.createElement),Xe=function(t){return Ho?St.createElement(t):{}},Vo=!Ue&&!fe(function(){return 7!=Object.defineProperty(Xe("div"),"a",{get:function(){return 7}}).a}),Xo=Object.defineProperty,Ko=Ue?Object.defineProperty:function(o,n,r){if(V(o),n=function(t,o){if(!ce(t))return t;var n,r;if("function"==typeof(n=t.toString)&&!ce(r=n.call(t))||"function"==typeof(n=t.valueOf)&&!ce(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(n),V(r),Vo)try{return Xo(o,n,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(o[n]=r.value),o},Ke={f:Ko},ln=function(t,o){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:o}},ee=Ue?function(t,o,n){return Ke.f(t,o,ln(1,n))}:function(t,o,n){return t[o]=n,t},er={}.hasOwnProperty,Ze=function(t,o){return er.call(t,o)},tr=0,nr=Math.random(),xt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++tr+nr).toString(36))},Mt=_e(function(t){var o="__core-js_shared__",n=x[o]||(x[o]={});(t.exports=function(r,a){return n[r]||(n[r]=void 0!==a?a:{})})("versions",[]).push({version:se.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),Zt=Mt("native-function-to-string",Function.toString),Ae=_e(function(t){var o=xt("src"),n="toString",r=(""+Zt).split(n);se.inspectSource=function(a){return Zt.call(a)},(t.exports=function(a,i,c,d){var p="function"==typeof c;p&&(Ze(c,"name")||ee(c,"name",i)),a[i]!==c&&(p&&(Ze(c,o)||ee(c,o,a[i]?""+a[i]:r.join(String(i)))),a===x?a[i]=c:d?a[i]?a[i]=c:ee(a,i,c):(delete a[i],ee(a,i,c)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||Zt.call(this)})}),$e=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},W=function(t,o,n){if($e(t),void 0===o)return t;switch(n){case 1:return function(r){return t.call(o,r)};case 2:return function(r,a){return t.call(o,r,a)};case 3:return function(r,a,i){return t.call(o,r,a,i)}}return function(){return t.apply(o,arguments)}},At="prototype",Q=function(t,o,n){var f,y,_,C,r=t&Q.F,a=t&Q.G,c=t&Q.P,d=t&Q.B,p=a?x:t&Q.S?x[o]||(x[o]={}):(x[o]||{})[At],m=a?se:se[o]||(se[o]={}),h=m[At]||(m[At]={});for(f in a&&(n=o),n)_=((y=!r&&p&&void 0!==p[f])?p:n)[f],C=d&&y?W(_,x):c&&"function"==typeof _?W(Function.call,_):_,p&&Ae(p,f,_,t&Q.U),m[f]!=_&&ee(m,f,C),c&&h[f]!=_&&(h[f]=_)};x.core=se,Q.F=1,Q.G=2,Q.S=4,Q.P=8,Q.B=16,Q.W=32,Q.U=64,Q.R=128;var t,L=Q,or={}.toString,ye=function(t){return or.call(t).slice(8,-1)},un=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==ye(t)?t.split(""):Object(t)},et=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},kt=function(t){return un(et(t))},rr=Math.ceil,ar=Math.floor,tt=function(t){return isNaN(t=+t)?0:(t>0?ar:rr)(t)},ir=Math.min,nt=function(t){return t>0?ir(tt(t),9007199254740991):0},sr=Math.max,cr=Math.min,pn=Mt("keys"),Ot=function(t){return pn[t]||(pn[t]=xt(t))},pr=(t=!1,function(o,n,r){var a=kt(o),i=nt(a.length),c=function(t,o){return(t=tt(t))<0?sr(t+o,0):cr(t,o)}(r,i);for(t;i>c;c++)if(c in a&&a[c]===n)return c||0;return-1}),fr=Ot("IE_PROTO"),Pt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ne=Object.keys||function(o){return function(t,o){var i,n=kt(t),r=0,a=[];for(i in n)i!=fr&&Ze(n,i)&&a.push(i);for(;o.length>r;)Ze(n,i=o[r++])&&(~pr(a,i)||a.push(i));return a}(o,Pt)},mr={f:Object.getOwnPropertySymbols},hr={f:{}.propertyIsEnumerable},ot=function(t){return Object(et(t))},rt=Object.assign,_r=!rt||fe(function(){var t={},o={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(a){o[a]=a}),7!=rt({},t)[n]||Object.keys(rt({},o)).join("")!=r})?function(o,n){for(var r=ot(o),a=arguments.length,i=1,c=mr.f,d=hr.f;a>i;)for(var y,p=un(arguments[i++]),m=c?Ne(p).concat(c(p)):Ne(p),h=m.length,f=0;h>f;)d.call(p,y=m[f++])&&(r[y]=p[y]);return r}:rt;L(L.S+L.F,"Object",{assign:_r});var br=function(o,n){var c,d,r=String(et(o)),a=tt(n),i=r.length;return a<0||a>=i?"":(c=r.charCodeAt(a))<55296||c>56319||a+1===i||(d=r.charCodeAt(a+1))<56320||d>57343?r.charAt(a):r.slice(a,a+2)},fn=function(t,o,n){return o+(n?br(t,o).length:1)},B=_e(function(t){var o=Mt("wks"),n=x.Symbol,r="function"==typeof n;(t.exports=function(i){return o[i]||(o[i]=r&&n[i]||(r?n:xt)("Symbol."+i))}).store=o}),Tr=B("toStringTag"),Cr="Arguments"==ye(function(){return arguments}()),at=function(t){var o,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,o){try{return t[o]}catch(n){}}(o=Object(t),Tr))?n:Cr?ye(o):"Object"==(r=ye(o))&&"function"==typeof o.callee?"Arguments":r},Sr=RegExp.prototype.exec,It=function(t,o){var n=t.exec;if("function"==typeof n){var r=n.call(t,o);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==at(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Sr.call(t,o)},xr=function(){var t=V(this),o="";return t.global&&(o+="g"),t.ignoreCase&&(o+="i"),t.multiline&&(o+="m"),t.unicode&&(o+="u"),t.sticky&&(o+="y"),o},it=RegExp.prototype.exec,Mr=String.prototype.replace,dn=it,st="lastIndex",jt=function(){var t=/a/,o=/b*/g;return it.call(t,"a"),it.call(o,"a"),0!==t[st]||0!==o[st]}(),Dt=void 0!==/()??/.exec("")[1];(jt||Dt)&&(dn=function(o){var r,a,i,c,n=this;return Dt&&(a=new RegExp("^"+n.source+"$(?!\\s)",xr.call(n))),jt&&(r=n[st]),i=it.call(n,o),jt&&i&&(n[st]=n.global?i.index+i[0].length:r),Dt&&i&&i.length>1&&Mr.call(i[0],a,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)}),i});var ct=dn;L({target:"RegExp",proto:!0,forced:ct!==/./.exec},{exec:ct});var Ar=B("species"),kr=!fe(function(){var t=/./;return t.exec=function(){var o=[];return o.groups={a:"7"},o},"7"!=="".replace(t,"$<a>")}),Or=function(){var t=/(?:)/,o=t.exec;t.exec=function(){return o.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),vn=function(t,o,n){var r=B(t),a=!fe(function(){var h={};return h[r]=function(){return 7},7!=""[t](h)}),i=a?!fe(function(){var h=!1,f=/a/;return f.exec=function(){return h=!0,null},"split"===t&&(f.constructor={},f.constructor[Ar]=function(){return f}),f[r](""),!h}):void 0;if(!a||!i||"replace"===t&&!kr||"split"===t&&!Or){var c=/./[r],d=n(et,r,""[t],function(f,y,_,C,S){return y.exec===ct?a&&!S?{done:!0,value:c.call(y,_,C)}:{done:!0,value:f.call(_,y,C)}:{done:!1}}),m=d[1];Ae(String.prototype,t,d[0]),ee(RegExp.prototype,r,2==o?function(h,f){return m.call(h,this,f)}:function(h){return m.call(h,this)})}},Pr=Math.max,Ir=Math.min,jr=Math.floor,Dr=/\$([$&`']|\d\d?|<[^>]*>)/g,Lr=/\$([$&`']|\d\d?)/g,Er=function(t){return void 0===t?t:String(t)};vn("replace",2,function(t,o,n,r){return[function(c,d){var p=t(this),m=null==c?void 0:c[o];return void 0!==m?m.call(c,p,d):n.call(String(p),c,d)},function(i,c){var d=r(n,i,this,c);if(d.done)return d.value;var p=V(i),m=String(this),h="function"==typeof c;h||(c=String(c));var f=p.global;if(f){var y=p.unicode;p.lastIndex=0}for(var _=[];;){var C=It(p,m);if(null===C||(_.push(C),!f))break;""===String(C[0])&&(p.lastIndex=fn(m,nt(p.lastIndex),y))}for(var P="",Z=0,D=0;D<_.length;D++){C=_[D];for(var q=String(C[0]),$=Pr(Ir(tt(C.index),m.length),0),pe=[],we=1;we<C.length;we++)pe.push(Er(C[we]));var Se=C.groups;if(h){var Pe=[q].concat(pe,$,m);void 0!==Se&&Pe.push(Se);var G=String(c.apply(void 0,Pe))}else G=a(q,m,$,pe,Se,c);$>=Z&&(P+=m.slice(Z,$)+G,Z=$+q.length)}return P+m.slice(Z)}];function a(i,c,d,p,m,h){var f=d+i.length,y=p.length,_=Lr;return void 0!==m&&(m=ot(m),_=Dr),n.call(h,_,function(C,S){var P;switch(S.charAt(0)){case"$":return"$";case"&":return i;case"`":return c.slice(0,d);case"'":return c.slice(f);case"<":P=m[S.slice(1,-1)];break;default:var Z=+S;if(0===Z)return C;if(Z>y){var D=jr(Z/10);return 0===D?C:D<=y?void 0===p[D-1]?S.charAt(1):p[D-1]+S.charAt(1):C}P=p[Z-1]}return void 0===P?"":P})}});var Ur=B("match"),Nr=B("species"),mn=function(t,o){var r,n=V(t).constructor;return void 0===n||null==(r=V(n)[Nr])?o:$e(r)},qr=Math.min,Rr=[].push,be="split",te="length",Lt="lastIndex",gn=4294967295,qe=!fe(function(){});vn("split",2,function(t,o,n,r){var a;return a="c"=="abbc"[be](/(b)*/)[1]||4!="test"[be](/(?:)/,-1)[te]||2!="ab"[be](/(?:ab)*/)[te]||4!="."[be](/(.?)(.?)/)[te]||"."[be](/()()/)[te]>1||""[be](/.?/)[te]?function(i,c){var d=String(this);if(void 0===i&&0===c)return[];if(!function(t){var o;return ce(t)&&(void 0!==(o=t[Ur])?!!o:"RegExp"==ye(t))}(i))return n.call(d,i,c);for(var _,C,S,p=[],h=0,f=void 0===c?gn:c>>>0,y=new RegExp(i.source,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":"")+"g");(_=ct.call(y,d))&&!((C=y[Lt])>h&&(p.push(d.slice(h,_.index)),_[te]>1&&_.index<d[te]&&Rr.apply(p,_.slice(1)),S=_[0][te],h=C,p[te]>=f));)y[Lt]===_.index&&y[Lt]++;return h===d[te]?(S||!y.test(""))&&p.push(""):p.push(d.slice(h)),p[te]>f?p.slice(0,f):p}:"0"[be](void 0,0)[te]?function(i,c){return void 0===i&&0===c?[]:n.call(this,i,c)}:n,[function(c,d){var p=t(this),m=null==c?void 0:c[o];return void 0!==m?m.call(c,p,d):a.call(String(p),c,d)},function(i,c){var d=r(a,i,this,c,a!==n);if(d.done)return d.value;var p=V(i),m=String(this),h=mn(p,RegExp),f=p.unicode,_=new h(qe?p:"^(?:"+p.source+")",(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(qe?"y":"g")),C=void 0===c?gn:c>>>0;if(0===C)return[];if(0===m.length)return null===It(_,m)?[m]:[];for(var S=0,P=0,Z=[];P<m.length;){_.lastIndex=qe?P:0;var q,D=It(_,qe?m:m.slice(P));if(null===D||(q=qr(nt(_.lastIndex+(qe?0:P)),m.length))===S)P=fn(m,P,f);else{if(Z.push(m.slice(S,P)),Z.length===C)return Z;for(var $=1;$<=D.length-1;$++)if(Z.push(D[$]),Z.length===C)return Z;P=S=q}}return Z.push(m.slice(S)),Z}]});var O=_e(function(t,o){Object.defineProperty(o,"__esModule",{value:!0});var n={default:"__default"},r=Object.prototype.hasOwnProperty;function a(){}function i(s,l){return r.call(s,l)}function c(){return new a}function d(s,l){for(;s.length>l;)s.pop()}function m(s,l,v){if(null==v)s.removeAttribute(l);else{var g=function(s){return 0===s.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===s.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0}(l);g?s.setAttributeNS(g,l,String(v)):s.setAttribute(l,String(v))}}function h(s,l,v){s[l]=v}function f(s,l,v){l.indexOf("-")>=0?s.setProperty(l,v):s[l]=v}a.prototype=Object.create(null);var C=c();function S(s,l,v){(C[l]||C[n.default])(s,l,v)}C[n.default]=function(s,l,v){var g=typeof v;"object"===g||"function"===g?h(s,l,v):m(s,l,v)},C.style=function(s,l,v){if("string"==typeof v)s.style.cssText=v;else{s.style.cssText="";var g=s.style;for(var b in v)i(v,b)&&f(g,b,v[b])}};var Z={nodesCreated:null,nodesDeleted:null},D=function(){function s(){this.created=[],this.deleted=[]}return s.prototype.markCreated=function(l){this.created.push(l)},s.prototype.markDeleted=function(l){this.deleted.push(l)},s.prototype.notifyChanges=function(){Z.nodesCreated&&this.created.length>0&&Z.nodesCreated(this.created),Z.nodesDeleted&&this.deleted.length>0&&Z.nodesDeleted(this.deleted)},s}();function $(s){return 1===s.nodeType}var Se=Node.prototype.getRootNode||function(){for(var s=this,l=s;s;)l=s,s=s.parentNode;return l};var R=function(){function s(l,v,g){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=l,this.key=v,this.text=g}return s.prototype.hasEmptyAttrsArr=function(){var l=this._attrsArr;return!l||!l.length},s.prototype.getAttrsArr=function(l){return this._attrsArr||(this._attrsArr=new Array(l))},s}();function Ie(s,l,v,g){var b=new R(l,v,g);return s.__incrementalDOMData=b,b}function Qe(s,l){return ao(s,l)}function ao(s,l){if(s.__incrementalDOMData)return s.__incrementalDOMData;var v=$(s)?s.localName:s.nodeName,g=$(s)?s.getAttribute("key")||l:null,A=Ie(s,v,g,function(s){return 3===s.nodeType}(s)?s.data:void 0);return $(s)&&function(s,l){var v=s.attributes,g=v.length;if(g)for(var b=l.getAttrsArr(g),A=0,E=0;A<g;A+=1,E+=2){var ne=v[A],z=ne.value;b[E]=ne.name,b[E+1]=z}}(s,A),A}var je=null,N=null,F=null,ze=null,gt=[],ht=[];function _t(){return ht}function co(s){return function(v,g,b){var A=je,E=ze,ne=gt,le=ht,z=N,ae=F;je=new D,ze=v.ownerDocument,ht=[],gt=function(s,l){var v=function(s){var l=Se.call(s);return function(s){return 11===s.nodeType||9===s.nodeType}(l)?l.activeElement:null}(s);return v&&s.contains(v)?function(s,l){for(var v=[],g=s;g!==l;){var b=g;v.push(b),g=b.parentNode}return v}(v,l):[]}(v,F=v.parentNode);try{return s(v,g,b)}finally{ze=E,ht=le,N=z,F=ae,gt=ne,je.notifyChanges(),je=A}}}var lo=co(function(s,l,v){return N=s,vo(),l(v),mo(),s}),Mi=co(function(s,l,v){var g={nextSibling:s};return N=g,l(v),F&&fo(F,yt(),s.nextSibling),g===N?null:N});function uo(s,l,v){var g=Qe(s,v);return l==g.nameOrCtor&&v==g.key}function Ai(s,l){var v;return v="#text"===s?function(s){var l=s.createTextNode("");return Ie(l,"#text",null),l}(ze):function(s,l,v,g){var b;if("function"==typeof v)b=new v;else{var A=function(s,l){return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/Math/MathML":null==l||"foreignObject"===Qe(l).nameOrCtor?null:l.namespaceURI}(v,l);b=A?s.createElementNS(A,v):s.createElement(v)}return Ie(b,v,g),b}(ze,F,s,l),je.markCreated(v),v}function po(s,l){var v=function(s,l,v){if(!s)return null;if(uo(s,l,v))return s;if(v)for(;s=s.nextSibling;)if(uo(s,l,v))return s;return null}(N,s,l),g=v||Ai(s,l);g!==N&&(gt.indexOf(g)>=0?function(s,l,v){for(var g=l.nextSibling,b=v;null!==b&&b!==l;){var A=b.nextSibling;s.insertBefore(b,g),b=A}}(F,g,N):F.insertBefore(g,N),N=g)}function fo(s,l,v){for(var g=s,b=l;b!==v;){var A=b.nextSibling;g.removeChild(b),je.markDeleted(b),b=A}}function vo(){F=N,N=null}function yt(){return N?N.nextSibling:F.firstChild}function an(){N=yt()}function mo(){fo(F,yt(),null),N=F,F=F.parentNode}function go(s,l){return an(),po(s,l),vo(),F}function ho(){return mo(),N}function ki(){return an(),po("#text",null),N}var re=c();function ji(s,l,v){if(l.staticsApplied=!0,v&&v.length){if(l.hasEmptyAttrsArr()){for(var g=0;g<v.length;g+=2)S(s,v[g],v[g+1]);return}for(g=0;g<v.length;g+=2)re[v[g]]=g+1;var b=l.getAttrsArr(0),A=0;for(g=0;g<b.length;g+=2){var ne=b[g+1],le=re[E=b[g]];le?v[le]===ne&&delete re[E]:(b[A]=E,b[A+1]=ne,A+=2)}for(var E in d(b,A),re)S(s,E,v[re[E]]),delete re[E]}}function sn(s,l,v){for(var g=[],b=3;b<arguments.length;b++)g[b-3]=arguments[b];var A=go(s,l),E=Qe(A);E.staticsApplied||ji(A,E,v);var ne=Math.max(0,arguments.length-3),le=E.hasEmptyAttrsArr();if(!ne&&le)return A;for(var z=E.getAttrsArr(ne),ae=3,J=0;ae<arguments.length;ae+=2,J+=2){var ie=arguments[ae];if(le)z[J]=ie;else if(z[J]!==ie)break;var xe=arguments[ae+1];(le||z[J+1]!==xe)&&(z[J+1]=xe,S(A,ie,xe))}if(ae<arguments.length||J<z.length){for(var qi=J;J<z.length;J+=2)re[z[J]]=z[J+1];for(J=qi;ae<arguments.length;ae+=2,J+=2)re[ie=arguments[ae]]!==(xe=arguments[ae+1])&&S(A,ie,xe),z[J]=ie,z[J+1]=xe,delete re[ie];for(var ie in d(z,J),re)S(A,ie,void 0),delete re[ie]}return A}function yo(s){return ho()}o.applyAttr=m,o.applyProp=h,o.attributes=C,o.close=ho,o.currentElement=function(){return F},o.currentPointer=function(){return yt()},o.open=go,o.patch=lo,o.patchInner=lo,o.patchOuter=Mi,o.skip=function(){N=F.lastChild},o.skipNode=an,o.getKey=function(s){return Qe(s).key},o.clearCache=function so(s){s.__incrementalDOMData=null;for(var l=s.firstChild;l;l=l.nextSibling)so(l)},o.importNode=function io(s){ao(s);for(var l=s.firstChild;l;l=l.nextSibling)io(l)},o.isDataInitialized=function(s){return Boolean(s.__incrementalDOMData)},o.notifications=Z,o.symbols=n,o.attr=function(s,l){var v=_t();v.push(s),v.push(l)},o.elementClose=yo,o.elementOpen=sn,o.elementOpenEnd=function(){var s=_t(),l=sn.apply(null,s);return d(s,0),l},o.elementOpenStart=function(s,l,v){var g=_t();g[0]=s,g[1]=l,g[2]=v},o.elementVoid=function(s,l,v){for(var g=[],b=3;b<arguments.length;b++)g[b-3]=arguments[b];return sn.apply(null,arguments),yo()},o.text=function(s){for(var l=[],v=1;v<arguments.length;v++)l[v-1]=arguments[v];var g=ki(),b=Qe(g);if(b.text!==s){b.text=s;for(var A=s,E=1;E<arguments.length;E+=1){var ne=arguments[E];A=ne(A)}g.data=A}return g},o.key=function(s){_t()[1]=s}});!function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")}(O);var Fr=O.applyProp,hn=O.attributes,_n=O.patch,yn=O.elementClose,bn=O.elementOpen,Jr=O.elementVoid,Et=O.text;hn.caretpos=function(t,o,n){t.setSelectionRange(n,n)},hn.value=Fr;var Br=function(o,n,r,a){_n(o,function(){!function(o,n,r){if(o.suggestions.length>0&&o.focused){bn("ul","",["class","dawa-autocomplete-suggestions","role","listbox","unselectable","on"]);for(var a=function(d){var p=o.suggestions[d],m="dawa-autocomplete-suggestion";o.selected===d&&(m+=" dawa-selected"),bn("li","",["role","option"],"class",m,"onmousedown",function(y){n(d),y.preventDefault()});var h=p.forslagstekst.split("\n");if(h=h.map(function(y){return y.replace(/ /g,"\xa0")}),r){Et(h[0]);for(var f=1;f<h.length;++f)Jr("br"),Et(h[f])}else Et(h.join(", "));yn("li")},i=0;i<o.suggestions.length;++i)a(i);yn("ul")}}(n,r,a)})};function Tn(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Te,Ft,Jt,Vr=function(t,o,n,r){try{return r?o(V(n)[0],n[1]):o(n)}catch(i){var a=t.return;throw void 0!==a&&V(a.call(t)),i}},de={},Wr=B("iterator"),Xr=Array.prototype,ea=B("iterator"),ta=se.getIteratorMethod=function(t){if(null!=t)return t[ea]||t["@@iterator"]||de[at(t)]},Cn=_e(function(t){var o={},n={},r=t.exports=function(a,i,c,d,p){var y,_,C,S,m=p?function(){return a}:ta(a),h=W(c,d,i?2:1),f=0;if("function"!=typeof m)throw TypeError(a+" is not iterable!");if(function(t){return void 0!==t&&(de.Array===t||Xr[Wr]===t)}(m)){for(y=nt(a.length);y>f;f++)if((S=i?h(V(_=a[f])[0],_[1]):h(a[f]))===o||S===n)return S}else for(C=m.call(a);!(_=C.next()).done;)if((S=Vr(C,h,_.value,i))===o||S===n)return S};r.BREAK=o,r.RETURN=n}),na=function(t,o,n){var r=void 0===n;switch(o.length){case 0:return r?t():t.call(n);case 1:return r?t(o[0]):t.call(n,o[0]);case 2:return r?t(o[0],o[1]):t.call(n,o[0],o[1]);case 3:return r?t(o[0],o[1],o[2]):t.call(n,o[0],o[1],o[2]);case 4:return r?t(o[0],o[1],o[2],o[3]):t.call(n,o[0],o[1],o[2],o[3])}return t.apply(n,o)},wn=x.document,Ut=wn&&wn.documentElement,Sn=x.process,$t=x.setImmediate,Nt=x.clearImmediate,xn=x.MessageChannel,qt=x.Dispatch,Rt=0,Re={},Mn="onreadystatechange",Fe=function(){var t=+this;if(Re.hasOwnProperty(t)){var o=Re[t];delete Re[t],o()}},Zn=function(t){Fe.call(t.data)};(!$t||!Nt)&&($t=function(o){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return Re[++Rt]=function(){na("function"==typeof o?o:Function(o),n)},Te(Rt),Rt},Nt=function(o){delete Re[o]},"process"==ye(Sn)?Te=function(t){Sn.nextTick(W(Fe,t,1))}:qt&&qt.now?Te=function(t){qt.now(W(Fe,t,1))}:xn?(Jt=(Ft=new xn).port2,Ft.port1.onmessage=Zn,Te=W(Jt.postMessage,Jt,1)):x.addEventListener&&"function"==typeof postMessage&&!x.importScripts?(Te=function(t){x.postMessage(t+"","*")},x.addEventListener("message",Zn,!1)):Te=Mn in Xe("script")?function(t){Ut.appendChild(Xe("script"))[Mn]=function(){Ut.removeChild(this),Fe.call(t)}}:function(t){setTimeout(W(Fe,t,1),0)});var An={set:$t,clear:Nt},oa=An.set,kn=x.MutationObserver||x.WebKitMutationObserver,Yt=x.process,Bt=x.Promise,On="process"==ye(Yt);function aa(t){var o,n;this.promise=new t(function(r,a){if(void 0!==o||void 0!==n)throw TypeError("Bad Promise constructor");o=r,n=a}),this.resolve=$e(o),this.reject=$e(n)}var Gt={f:function(t){return new aa(t)}},Qt=function(t){try{return{e:!1,v:t()}}catch(o){return{e:!0,v:o}}},Pn=x.navigator,sa=Pn&&Pn.userAgent||"",ua=Ke.f,In=B("toStringTag"),zt=function(t,o,n){t&&!Ze(t=n?t:t.prototype,In)&&ua(t,In,{configurable:!0,value:o})},jn=B("species"),Ht=B("iterator"),Dn=!1;try{[7][Ht]().return=function(){Dn=!0}}catch(t){}var ut,Nn,qn,Rn,o,Ln=An.set,En=function(){var t,o,n,r=function(){var d,p;for(On&&(d=Yt.domain)&&d.exit();t;){p=t.fn,t=t.next;try{p()}catch(m){throw t?n():o=void 0,m}}o=void 0,d&&d.enter()};if(On)n=function(){Yt.nextTick(r)};else if(!kn||x.navigator&&x.navigator.standalone)if(Bt&&Bt.resolve){var c=Bt.resolve(void 0);n=function(){c.then(r)}}else n=function(){oa.call(x,r)};else{var a=!0,i=document.createTextNode("");new kn(r).observe(i,{characterData:!0}),n=function(){i.data=a=!a}}return function(d){var p={fn:d,next:void 0};o&&(o.next=p),t||(t=p,n()),o=p}}(),ve="Promise",Un=x.TypeError,ke=x.process,$n=ke&&ke.versions,va=$n&&$n.v8||"",ue=x[ve],Je="process"==at(ke),lt=function(){},Ye=Nn=Gt.f,Be=!!function(){try{var t=ue.resolve(1),o=(t.constructor={})[B("species")]=function(n){n(lt,lt)};return(Je||"function"==typeof PromiseRejectionEvent)&&t.then(lt)instanceof o&&0!==va.indexOf("6.6")&&-1===sa.indexOf("Chrome/66")}catch(n){}}(),Fn=function(t){var o;return!(!ce(t)||"function"!=typeof(o=t.then))&&o},Vt=function(t,o){if(!t._n){t._n=!0;var n=t._c;En(function(){for(var r=t._v,a=1==t._s,i=0,c=function(d){var y,_,C,p=a?d.ok:d.fail,m=d.resolve,h=d.reject,f=d.domain;try{p?(a||(2==t._h&&ga(t),t._h=1),!0===p?y=r:(f&&f.enter(),y=p(r),f&&(f.exit(),C=!0)),y===d.promise?h(Un("Promise-chain cycle")):(_=Fn(y))?_.call(y,m,h):m(y)):h(r)}catch(S){f&&!C&&f.exit(),h(S)}};n.length>i;)c(n[i++]);t._c=[],t._n=!1,o&&!t._h&&ma(t)})}},ma=function(t){Ln.call(x,function(){var r,a,i,o=t._v,n=Jn(t);if(n&&(r=Qt(function(){Je?ke.emit("unhandledRejection",o,t):(a=x.onunhandledrejection)?a({promise:t,reason:o}):(i=x.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=Je||Jn(t)?2:1),t._a=void 0,n&&r.e)throw r.v})},Jn=function(t){return 1!==t._h&&0===(t._a||t._c).length},ga=function(t){Ln.call(x,function(){var o;Je?ke.emit("rejectionHandled",t):(o=x.onrejectionhandled)&&o({promise:t,reason:t._v})})},Oe=function(t){var o=this;o._d||(o._d=!0,(o=o._w||o)._v=t,o._s=2,o._a||(o._a=o._c.slice()),Vt(o,!0))},Wt=function(t){var n,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===t)throw Un("Promise can't be resolved itself");(n=Fn(t))?En(function(){var r={_w:o,_d:!1};try{n.call(t,W(Wt,r,1),W(Oe,r,1))}catch(a){Oe.call(r,a)}}):(o._v=t,o._s=1,Vt(o,!1))}catch(r){Oe.call({_w:o,_d:!1},r)}}};Be||(ue=function(o){(function(t,o,n,r){if(!(t instanceof o)||"_h"in t)throw TypeError("Promise: incorrect invocation!")})(this,ue),$e(o),ut.call(this);try{o(W(Wt,this,1),W(Oe,this,1))}catch(n){Oe.call(this,n)}},(ut=function(o){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,o,n){for(var r in o)Ae(t,r,o[r],undefined);return t}(ue.prototype,{then:function(o,n){var r=Ye(mn(this,ue));return r.ok="function"!=typeof o||o,r.fail="function"==typeof n&&n,r.domain=Je?ke.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Vt(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),qn=function(){var t=new ut;this.promise=t,this.resolve=W(Wt,t,1),this.reject=W(Oe,t,1)},Gt.f=Ye=function(t){return t===ue||t===Rn?new qn(t):Nn(t)}),L(L.G+L.W+L.F*!Be,{Promise:ue}),zt(ue,ve),o=x.Promise,Ue&&o&&!o[jn]&&Ke.f(o,jn,{configurable:!0,get:function(){return this}}),Rn=se[ve],L(L.S+L.F*!Be,ve,{reject:function(o){var n=Ye(this);return(0,n.reject)(o),n.promise}}),L(L.S+L.F*!Be,ve,{resolve:function(o){return function(t,o){if(V(t),ce(o)&&o.constructor===t)return o;var n=Gt.f(t);return(0,n.resolve)(o),n.promise}(this,o)}}),L(L.S+L.F*!(Be&&function(t,o){if(!Dn)return!1;var n=!1;try{var r=[7],a=r[Ht]();a.next=function(){return{done:n=!0}},r[Ht]=function(){return a},function(t){ue.all(t).catch(lt)}(r)}catch(i){}return n}()),ve,{all:function(o){var n=this,r=Ye(n),a=r.resolve,i=r.reject,c=Qt(function(){var d=[],p=0,m=1;Cn(o,!1,function(h){var f=p++,y=!1;d.push(void 0),m++,n.resolve(h).then(function(_){y||(y=!0,d[f]=_,--m||a(d))},i)}),--m||a(d)});return c.e&&i(c.v),r.promise},race:function(o){var n=this,r=Ye(n),a=r.reject,i=Qt(function(){Cn(o,!1,function(c){n.resolve(c).then(r.resolve,a)})});return i.e&&a(i.v),r.promise}});var Xt=B("unscopables"),Kt=Array.prototype;null==Kt[Xt]&&ee(Kt,Xt,{});var en=function(t){Kt[Xt][t]=!0},pt=function(t,o){return{value:o,done:!!t}},ha=Ue?Object.defineProperties:function(o,n){V(o);for(var c,r=Ne(n),a=r.length,i=0;a>i;)Ke.f(o,c=r[i++],n[c]);return o},_a=Ot("IE_PROTO"),tn=function(){},nn="prototype",ft=function(){var a,t=Xe("iframe"),o=Pt.length;for(t.style.display="none",Ut.appendChild(t),t.src="javascript:",(a=t.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),ft=a.F;o--;)delete ft[nn][Pt[o]];return ft()},ya=Object.create||function(o,n){var r;return null!==o?(tn[nn]=V(o),r=new tn,tn[nn]=null,r[_a]=o):r=ft(),void 0===n?r:ha(r,n)},Yn={};ee(Yn,B("iterator"),function(){return this});var Bn=Ot("IE_PROTO"),Ta=Object.prototype,Ca=Object.getPrototypeOf||function(t){return t=ot(t),Ze(t,Bn)?t[Bn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ta:null},Ge=B("iterator"),on=!([].keys&&"next"in[].keys()),dt="values",Qn=function(){return this},zn=function(t,o,n,r,a,i,c){!function(t,o,n){t.prototype=ya(Yn,{next:ln(1,n)}),zt(t,"Array Iterator")}(n,0,function(){var t=this._t,o=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,pt(1)):pt(0,"keys"==o?n:"values"==o?t[n]:[n,t[n]])});var P,Z,D,d=function(q){if(!on&&q in f)return f[q];switch(q){case"keys":case dt:return function(){return new n(this,q)}}return function(){return new n(this,q)}},p=o+" Iterator",h=!1,f=t.prototype,y=f[Ge]||f["@@iterator"]||f[a],_=y||d(a),C=d("entries"),S=f.entries||y;if(S&&(D=Ca(S.call(new t)))!==Object.prototype&&D.next&&(zt(D,p,!0),"function"!=typeof D[Ge]&&ee(D,Ge,Qn)),y&&y.name!==dt&&(h=!0,_=function(){return y.call(this)}),(on||h||!f[Ge])&&ee(f,Ge,_),de[o]=_,de[p]=Qn,void(P={values:_,keys:d("keys"),entries:C}))for(Z in P)Z in f||Ae(f,Z,P[Z]);else L(L.P+L.F*(on||h),o,P);return P}(Array,"Array",function(t,o){this._t=kt(t),this._i=0,this._k=o},0,"values");de.Arguments=de.Array,en("keys"),en("values"),en("entries");for(var Hn=B("iterator"),Vn=B("toStringTag"),Wn=de.Array,Xn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Kn=Ne(Xn),rn=0;rn<Kn.length;rn++){var mt,vt=Kn[rn],xa=Xn[vt],eo=x[vt],Ce=eo&&eo.prototype;if(Ce&&(Ce[Hn]||ee(Ce,Hn,Wn),Ce[Vn]||ee(Ce,Vn,vt),de[vt]=Wn,xa))for(mt in zn)Ce[mt]||Ae(Ce,mt,zn[mt],!0)}var to={};to[B("toStringTag")]="z",to+""!="[object z]"&&Ae(Object.prototype,"toString",function(){return"[object "+at(this)+"]"},!0),function(t,o){var n=(se.Object||{})[t]||Object[t],r={keys:function(o){return Ne(ot(o))}};L(L.S+L.F*fe(function(){n(1)}),"Object",r)}("keys");var Oa={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(o,n){return function(t,o){return o=o||{},new Promise(function(n,r){var a=new XMLHttpRequest,i=[],c=[],d={},p=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(JSON.parse(a.responseText))},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:p,headers:{keys:function(){return i},entries:function(){return c},get:function(h){return d[h.toLowerCase()]},has:function(h){return h.toLowerCase()in d}}}};for(var m in a.open(o.method||"get",t,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(h,f,y){i.push(f=f.toLowerCase()),c.push([f,y]),d[f]=d[f]?d[f]+","+y:y}),n(p())},a.onerror=r,a.withCredentials="include"==o.credentials,o.headers)a.setRequestHeader(m,o.headers[m]);a.send(o.body||null)})}("".concat(o,"?").concat(function(o){return Object.keys(o).map(function(n){var r=o[n];return"".concat(n,"=").concat(encodeURIComponent(r))}).join("&")}(n)),{mode:"cors"}).then(function(r){return r.json()})}},Pa=function(){function t(o){(function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),o=Object.assign({},Oa,o||{}),this.options=o,this.state={currentRequest:null,pendingRequest:null},this.selected=null}return function(t,o,n){o&&Tn(t.prototype,o)}(t,[{key:"_getAutocompleteResponse",value:function(n,r,a,i,c,d){var p=Object.assign({},this.options.params,{q:n,type:this.options.type,caretpos:r,supplerendebynavn:c,stormodtagerpostnumre:d,multilinje:!0});return this.options.fuzzy&&(p.fuzzy=""),i&&(p.adgangsadresseid=i),a&&(p.startfra="adgangsadresse"),this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),p)}},{key:"_scheduleRequest",value:function(n){null!==this.state.currentRequest?this.state.pendingRequest=n:(this.state.currentRequest=n,this._executeRequest())}},{key:"_executeRequest",value:function(){var c,d,n=this,r=this.state.currentRequest,a=null,i=!1;if(r.selected){var p=r.selected;if(p.type===this.options.type)return this.options.selectCallback(p),this.selected=p,void this._requestCompleted();a="adgangsadresse"===p.type?p.data.id:null,i="vejnavn"===p.type,c=p.tekst,d=p.caretpos}else c=r.text,d=r.caretpos;if(r.selectedId){var m={id:r.selectedId,type:this.options.type};return this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),m).then(function(h){return n._handleResponse(r,h)},function(h){return n._handleFailedRequest(r,h)})}r.selected||r.text.length>=this.options.minLength?this._getAutocompleteResponse(c,d,i,a,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(h){return n._handleResponse(r,h)},function(h){return n._handleFailedRequest(r,h)}):this._handleResponse(r,[])}},{key:"_handleFailedRequest",value:function(n,r){var o,a=this;return console.error("DAWA request failed",r),(o=this.options.retryDelay,new Promise(function(n){return setTimeout(n,o)})).then(function(){a.state.pendingRequest||a._scheduleRequest(n),a._requestCompleted()})}},{key:"_handleResponse",value:function(n,r){if(n.selected)if(1===r.length){var a=r[0];a.type===this.options.type?this.options.selectCallback(a):this.state.pendingRequest||(this.state.pendingRequest={selected:a})}else this.options.renderCallback&&this.options.renderCallback(r);else n.selectedId?1===r.length&&(this.selected=r[0],this.options.initialRenderCallback(r[0].tekst)):this.options.renderCallback&&this.options.renderCallback(r);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(n){this.options.renderCallback=n}},{key:"setInitialRenderCallback",value:function(n){this.options.initialRenderCallback=n}},{key:"setSelectCallback",value:function(n){this.options.selectCallback=n}},{key:"update",value:function(n,r){this._scheduleRequest({text:n,caretpos:r})}},{key:"select",value:function(n){this._scheduleRequest({selected:n})}},{key:"selectInitial",value:function(n){this._scheduleRequest({selectedId:n})}},{key:"destroy",value:function(){}}]),t}();const ja=["input"];let Da=(()=>{class t{constructor(n,r,a){this.mapService=n,this.modalCtrl=r,this.store=a}ngOnInit(){}ngAfterViewInit(){this.autocomplete=function(t,o){o=Object.assign({select:function(){return null}},o);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn","type"].reduce(function(i,c){return o.hasOwnProperty(c)&&(i[c]=o[c]),i},{});n.type||(n.type=o.adgangsadresserOnly?"adgangsadresse":"adresse");var r=new Pa(n),a=function(o,n){var r=n.onSelect,a=n.onTextChange,i=n.render||Br,c=!1,d="",p=0,m=document.createElement("div");o.parentNode.insertBefore(m,o.nextSibling);var _,f={caretpos:2,inputText:"",selected:0,focused:document.activeElement===o,suggestions:[]},y=function(I){var R=I.value,Ie=I.selectionStart;f.caretpos=Ie,f.inputText=R,function(I,R){(d!==I||p!==R)&&(a(I,R),d=I,p=R)}(R,Ie)},C=function(I){var R=f.suggestions[I];f.inputText=R.tekst,f.caretpos=R.caretpos,f.suggestions=[],r(R),_(!0)},S=function(I){var R=window.event?I.keyCode:I.which;if(f.suggestions.length>0&&f.focused){if(40===R)f.selected=(f.selected+1)%f.suggestions.length,_();else if(38===R)f.selected=(f.selected-1+f.suggestions.length)%f.suggestions.length,_();else{if(13!==R&&9!==R)return!0;C(f.selected)}return I.preventDefault(),!1}},P=function(){f.focused=!0,_()},Z=function(){return f.focused=!1,_(),!1},D=function(I){y(I.target)},q=function(I){return y(I.target)},$=!1,pe=!1;return(_=function(I){I&&(pe=!0),$||($=!0,requestAnimationFrame(function(){c||($=!1,pe&&(o.value=f.inputText,o.setSelectionRange(f.caretpos,f.caretpos)),pe=!1,i(m,f,function(R){return C(R)},n.multiline))}))})(),o.addEventListener("keydown",S),o.addEventListener("blur",Z),o.addEventListener("focus",P),o.addEventListener("input",D),o.addEventListener("mouseup",q),o.setAttribute("aria-autocomplete","list"),o.setAttribute("autocomplete","off"),{destroy:function(){c=!0,o.removeEventListener("keydown",S),o.removeEventListener("blur",Z),o.removeEventListener("focus",P),o.removeEventListener("input",D),o.removeEventListener("mouseup",q),_n(m,function(){}),m.remove()},setSuggestions:function(I){f.suggestions=I,f.selected=0,_()},selectAndClose:function(I){f.inputText=I,f.caretpos=I.length,f.suggestions=[],f.selected=0,_(!0)}}}(t,{onSelect:function(c){r.select(c)},onTextChange:function(c,d){r.update(c,d)},render:o.render,multiline:o.multiline||!1});return r.setRenderCallback(function(i){return a.setSuggestions(i)}),r.setSelectCallback(function(i){a.selectAndClose(i.tekst),o.select(i)}),r.setInitialRenderCallback(function(i){return a.selectAndClose(i)}),o.id&&r.selectInitial(o.id),{id:function(c){return r.selectInitial(c)},destroy:function(){return a.destroy()},selected:function(){return r.selected}}}(this.input.nativeElement,{select:n=>{const r=[n.data.x,n.data.y];this.mapService.removeLayer("marker"),this.mapService.addMarker(r),this.mapService.flyTo(r),this.modalCtrl.dismiss(),this.store.dispatch(T.Sn.removeMapTool({tool:"geoSearch"}))},adgangsadresserOnly:!0}),setTimeout(()=>{this.input.nativeElement.focus()},500)}ngOnDestroy(){this.autocomplete.destroy()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.S),e.Y36(u.IN),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-geo-search"]],viewQuery:function(n,r){if(1&n&&e.Gf(ja,5),2&n){let a;e.iGM(a=e.CRH())&&(r.input=a.first)}},decls:8,vars:0,consts:[["color","primary"],[1,"ion-text-center"],[1,"autocomplete-container"],["placeholder","S\xf8g adresse","type","search","id","dawa-autocomplete-input"],["input",""]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title",1),e._uU(3," Adresses\xf8gning "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content"),e.TgZ(5,"div",2),e._UZ(6,"input",3,4),e.qZA(),e.qZA())},directives:[u.Gu,u.sr,u.wd,u.W2],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:30em;padding:10px;margin:auto}.autocomplete-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border-radius:5px;border:.01px solid var(--ion-color-medium)}"],changeDetection:0}),t})();function La(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-fab-button",3),e.NdJ("click",function(){return e.CHM(n),e.oxw().activateTool("takePhoto")}),e.ALo(2,"async"),e._UZ(3,"ion-icon",8),e.qZA(),e.TgZ(4,"ion-fab-button",3),e.NdJ("click",function(){return e.CHM(n),e.oxw().activateTool("draw")}),e.ALo(5,"async"),e._UZ(6,"i",9),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("color",e.lcZ(2,2,n.activatedMapTools$).includes("takePhoto")?"secondary":"light"),e.xp6(3),e.Q6J("color",e.lcZ(5,4,n.activatedMapTools$).includes("draw")?"secondary":"light")}}const Ea=["*"];let Ua=(()=>{class t{constructor(n,r){this.store=n,this.modalCtrl=r,this.selectedProject$=this.store.select("project","selectedProject"),this.activatedMapTools$=this.store.select("mapTools","activatedMapTools")}ngOnInit(){this.store.select("mapTools","activatedMapTools").pipe((0,Ct.h)(n=>n.includes("geoSearch")),(0,wt.zg)(()=>this.presentGeoSearchModal())).subscribe()}presentGeoSearchModal(){return(0,We.D)(this.modalCtrl.create({component:Da,breakpoints:[.5,1],initialBreakpoint:.5})).pipe((0,K.b)(n=>n.present()),(0,wt.zg)(n=>(0,We.D)(n.onDidDismiss()).pipe((0,K.b)(()=>this.store.dispatch(T.Sn.removeMapTool({tool:"geoSearch"}))))))}activateTool(n){this.store.dispatch(T.Sn.toggleMapTool({tool:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(j.yh),e.Y36(u.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-tools"]],ngContentSelectors:Ea,decls:16,vars:12,consts:[["horizontal","start","vertical","top","slot","fixed"],["color","primary"],["name","construct-outline"],[3,"color","click"],["name","search"],[1,"fg-poi-info","fg-lg"],[4,"ngIf"],["name","archive"],["name","camera"],[1,"fg-polygon-pt","fg-lg"]],template:function(n,r){1&n&&(e.F$t(),e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e._UZ(2,"ion-icon",2),e.qZA(),e.TgZ(3,"ion-fab-list"),e.TgZ(4,"ion-fab-button",3),e.NdJ("click",function(){return r.activateTool("geoSearch")}),e.ALo(5,"async"),e._UZ(6,"ion-icon",4),e.qZA(),e.TgZ(7,"ion-fab-button",3),e.NdJ("click",function(){return r.activateTool("addressInfo")}),e.ALo(8,"async"),e._UZ(9,"i",5),e.qZA(),e.YNc(10,La,7,6,"ng-container",6),e.ALo(11,"async"),e.TgZ(12,"ion-fab-button",3),e.NdJ("click",function(){return r.activateTool("saveProject")}),e.ALo(13,"async"),e._UZ(14,"ion-icon",7),e.qZA(),e.qZA(),e.qZA(),e.Hsn(15,0,["#mapTools",""])),2&n&&(e.xp6(4),e.Q6J("color",e.lcZ(5,4,r.activatedMapTools$).includes("geoSearch")?"secondary":"light"),e.xp6(3),e.Q6J("color",e.lcZ(8,6,r.activatedMapTools$).includes("addressInfo")?"secondary":"light"),e.xp6(3),e.Q6J("ngIf",null!==e.lcZ(11,8,r.selectedProject$)),e.xp6(2),e.Q6J("color",e.lcZ(13,10,r.activatedMapTools$).includes("saveProject")?"secondary":"light"))},directives:[u.IJ,u.W4,u.gu,u.zq,k.O5],pipes:[k.Ov],styles:[""],changeDetection:0}),t})();var no=w(591),oo=w(9385);let $a=(()=>{class t{constructor(n,r,a){this.mapService=n,this.notification=r,this.store=a,this.showModal=!1,this.adandon$=new De.xQ,this.dawaInfo$=new no.X(null),this.disableAddressButton$=this.store.select("map","viewParams").pipe((0,Y.U)(i=>(null==i?void 0:i.zoom)<15))}onShowPOI(){this.mapService.removeLayer("adresser"),this.mapService.addAdresserWithinViewExtent(),this.notification.presentToast({message:"Klik p\xe5 adresse for info",duration:2e3,position:"top",color:"secondary"})}ngOnDestroy(){this.mapService.removeLayer("adresser")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.S),e.Y36(oo.w),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-info-tool"]],decls:4,vars:6,consts:[["color","tertiary",3,"disabled","click"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-button",0),e.NdJ("click",function(){return r.onShowPOI()}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"async"),e.qZA()),2&n&&(e.Q6J("disabled",e.lcZ(1,2,r.disableAddressButton$)),e.xp6(2),e.hij(" ",!1===e.lcZ(3,4,r.disableAddressButton$)?"Hent adresser":"Zoom l\xe6ngere ind for info","\n"))},directives:[u.YG],pipes:[k.Ov],styles:["ion-chip[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"],changeDetection:0}),t})();var ro=w(373);function Na(t,o){1&t&&e._UZ(0,"ion-spinner",4)}let qa=(()=>{class t{constructor(n,r){this.mapService=n,this.mapStoreService=r,this.tracking$=this.mapStoreService.mapstate$.pipe((0,ro.j)("tracking")),this.locating$=this.mapStoreService.mapstate$.pipe((0,ro.j)("locating")),this.tracking=!1}ngOnInit(){}onToggleGeolocate(){this.tracking?(this.tracking=!1,this.mapService.stopTracking()):(this.tracking=!0,this.mapService.startTracking())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.S),e.Y36(H.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-geolocation"]],decls:5,vars:4,consts:[["horizontal","end","vertical","bottom","slot","fixed"],[3,"color","click"],["name","navigate-outline"],["color","medium",4,"ngIf"],["color","medium"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-fab",0),e.TgZ(1,"ion-fab-button",1),e.NdJ("click",function(){return r.onToggleGeolocate()}),e._UZ(2,"ion-icon",2),e.YNc(3,Na,1,0,"ion-spinner",3),e.ALo(4,"async"),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("color",r.tracking?"danger":"primary"),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,2,r.locating$)))},directives:[u.IJ,u.W4,u.gu,k.O5,u.PQ],pipes:[k.Ov],styles:[""],changeDetection:0}),t})();var Ra=w(2880);function Fa(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("Point")}),e._UZ(2,"i",3),e.qZA(),e.TgZ(3,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("LineString")}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onStartDraw("Polygon")}),e._UZ(6,"i",5),e.qZA(),e.TgZ(7,"ion-fab-button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().onEndDraw()}),e._UZ(8,"ion-icon",6),e.qZA(),e.BQk()}}function Ja(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",9),e.TgZ(1,"ion-icon",10),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onDisableEditMode()}),e.qZA(),e.qZA()}}function Ya(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onUndo()}),e._UZ(1,"ion-icon",12),e.qZA()}}function Ba(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onDelete()}),e._UZ(1,"ion-icon",13),e.qZA()}}function Ga(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab-button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onSave()}),e._UZ(1,"ion-icon",14),e.qZA()}}function Qa(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ja,2,0,"ion-fab-button",7),e.ALo(2,"async"),e.YNc(3,Ya,2,0,"ion-fab-button",8),e.ALo(4,"async"),e.YNc(5,Ba,2,0,"ion-fab-button",8),e.ALo(6,"async"),e.YNc(7,Ga,2,0,"ion-fab-button",8),e.ALo(8,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,n.drawConfig$).showBack),e.xp6(2),e.Q6J("ngIf","Point"!==n.drawGeometry&&e.lcZ(4,6,n.drawConfig$).showUndo),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,8,n.drawConfig$).showDelete),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,10,n.drawConfig$).showSave)}}function za(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-header"),e._UZ(1,"ion-toolbar",15),e.qZA(),e.TgZ(2,"ion-content"),e.TgZ(3,"form",16),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onAddFeature()}),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",17),e.qZA(),e.TgZ(6,"ion-item"),e._UZ(7,"ion-textarea",18),e.qZA(),e.TgZ(8,"ion-button",19),e._uU(9,"Gem geometri"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.featureProperties)}}const Ha=function(){return[0,.4,.5]};let Va=(()=>{class t{constructor(n,r,a){this.mapService=n,this.fb=r,this.store=a,this.showModal=!1,this.drawConfig$=this.store.select("drawTool")}ngOnInit(){this.store.dispatch(T.kq.resetDrawTool()),this.featureProperties=this.fb.group({name:["",[U.kI.required]],description:[""]})}onStartDraw(n){this.mapService.removeClickInfo(),this.mapService.removeDrawTool(),this.drawGeometry=n,this.mapService.activateDrawTool(n),this.store.dispatch(T.kq.changeDrawEditMode({change:{prop:"inEditMode",value:!0}}))}onEndDraw(){this.store.dispatch(T.Sn.removeMapTool({tool:"draw"})),this.mapService.removeDrawTool(),this.mapService.addClickInfo()}onDisableEditMode(){this.store.dispatch(T.kq.changeDrawEditMode({change:{prop:"inEditMode",value:!1}}))}onUndo(){this.mapService.removeLastDrawPoint()}onDelete(){this.mapService.removeDrawTool(),this.onStartDraw(this.drawGeometry)}onSave(){this.mapService.finishDrawing(),this.mapService.changeLayerStyle("draw",Ra.l.default),this.onDisableEditMode(),this.showModal=!0}onAddFeature(){this.store.dispatch(T.kq.addFeature({properties:this.featureProperties.value})),this.showModal=!1}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.S),e.Y36(U.qu),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-draw-tool"]],decls:6,vars:10,consts:[[4,"ngIf"],[3,"isOpen","initialBreakpoint","breakpoints"],["size","small","color","primary",3,"click"],[1,"fg-point","fg-lg"],[1,"fg-polyline-pt","fg-lg"],[1,"fg-polygon-pt","fg-lg"],["name","close"],["size","small","color","secondary",4,"ngIf"],["size","small","color","secondary",3,"click",4,"ngIf"],["size","small","color","secondary"],["name","arrow-back-outline",3,"click"],["size","small","color","secondary",3,"click"],["name","arrow-undo-circle-outline"],["name","trash"],["name","save"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(n,r){1&n&&(e.YNc(0,Fa,9,0,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Qa,9,12,"ng-container",0),e.ALo(3,"async"),e.TgZ(4,"ion-modal",1),e.YNc(5,za,10,1,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf",!1===e.lcZ(1,5,r.drawConfig$).inEditMode),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,7,r.drawConfig$).inEditMode),e.xp6(2),e.Q6J("isOpen",r.showModal)("initialBreakpoint",.4)("breakpoints",e.DdM(9,Ha)))},directives:[k.O5,u.ki,u.W4,u.gu,u.Gu,u.sr,u.W2,U._Y,U.JL,U.sg,u.Ie,u.pK,u.j9,U.JJ,U.u,u.g2,u.YG],pipes:[k.Ov],styles:[""],changeDetection:0}),t})(),Wa=(()=>{class t{constructor(n){this.store=n}ngOnInit(){this.store.dispatch(T.on.zoomToCurrentPosition())}onApprovePosition(){this.store.dispatch(T.$8.photoPosition()),this.store.dispatch(T.$8.takePhoto()),this.store.dispatch(T.Sn.removeAllMapTools())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-photo-tool"]],decls:2,vars:0,consts:[["size","large","color","tertiary",1,"ion-margin",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-button",0),e.NdJ("click",function(){return r.onApprovePosition()}),e._uU(1," V\xc6LG PLACERING\n"),e.qZA())},directives:[u.YG],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}"],changeDetection:0}),t})();var Xa=w(760),Ka=w(1086),ei=w(7224),ti=w(1406),me=w(4012);let ni=(()=>{class t{constructor(){this.initialState={activatedMapTools:[],uploadingImage:!1,drawConfig:{inEditMode:!1,showBack:!0,showDelete:!0,showSave:!0,showUndo:!0}},this._uiState$=new no.X(this.initialState),this.uiState$=this._uiState$.asObservable()}updateUiState(n,r){const a=Object.assign(Object.assign({},this._uiState$.value),{[n]:r});this._uiState$.next(a)}toggleUiState(n){const r=Object.assign(Object.assign({},this._uiState$.value),{[n]:!this._uiState$.value[n]});this._uiState$.next(r)}shiftMapTool(n){const r=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:[n]});this._uiState$.next(r)}addMapTool(n){const r=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:[...this._uiState$.value.activatedMapTools,n]});this._uiState$.next(r)}removeMapTool(n){const r=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:this._uiState$.value.activatedMapTools.filter(a=>a!==n)});this._uiState$.next(r)}removeAllMapTools(){const n=Object.assign(Object.assign({},this._uiState$.value),{activatedMapTools:[]});this._uiState$.next(n)}updateDrawUiState(n,r){const a=Object.assign(Object.assign({},this._uiState$.value),{drawConfig:Object.assign(Object.assign({},this._uiState$.value.drawConfig),{[n]:r})});this._uiState$.next(a)}resetDrawUiState(){Object.assign(Object.assign({},this._uiState$.value),{drawConfig:this.initialState.drawConfig})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var oi=w(2111);function ri(t,o){1&t&&(e.TgZ(0,"ion-badge"),e._uU(1,"Zoom ind for at v\xe6lge matrikler"),e.qZA())}function ai(t,o){1&t&&(e.TgZ(0,"ion-badge"),e._uU(1,"Tryk p\xe5 kortet for at tegne"),e.qZA())}function ii(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-fab",6),e.TgZ(1,"ion-fab-button",7),e.NdJ("click",function(){return e.CHM(n),e.oxw().toggleModal()}),e._UZ(2,"ion-icon",8),e.qZA(),e.qZA()}}function si(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-header"),e._UZ(1,"ion-toolbar",9),e.qZA(),e.TgZ(2,"ion-content"),e.TgZ(3,"form",10),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onCreateProject()}),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",11),e.qZA(),e.TgZ(6,"ion-item"),e._UZ(7,"ion-textarea",12),e.qZA(),e.TgZ(8,"ion-button",13),e._uU(9,"Opret projekt"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.project)}}const ci=function(){return[0,.4,.5]};let li=(()=>{class t{constructor(n,r,a,i,c,d,p,m){this.router=n,this.fb=r,this.noticationService=a,this.mapService=i,this.mapStore=c,this.uiState=d,this.dawaService=p,this.store=m,this.showModal=!1,this.bounds=me.n,this.selectedArea$=this.store.select("map","selectedFeatures"),this.drawnGeometry$=this.store.select("map","drawnFeature")}ngOnInit(){this.project=this.fb.group({name:["",[U.kI.required]],description:[""]}),this.disableMatrikel$=this.store.select("map","viewParams").pipe((0,Y.U)(n=>(null==n?void 0:n.zoom)<15)),this.store.select("saveProject","error").pipe((0,Ct.h)(n=>!!n),(0,K.b)(n=>this.noticationService.presentToast({header:"Noget gik galt",message:n,duration:5e3,color:"danger",position:"top"}))).subscribe()}ngOnDestroy(){this.mapService.removeLayer("jordstykke")}toggleModal(){let n;switch(this.showModal=!this.showModal,this.boundsSource){case me.n.Matrikel:n=this.store.select("map","selectedFeatures").pipe((0,Y.U)(r=>r[0].feature.getGeometry().getExtent()));break;case me.n.Draw:n=this.mapStore.drawnGeometry$;break;case me.n.ViewExtent:n=(0,Ka.of)(this.mapService.getViewExtent().getGeometry().getExtent())}n.pipe((0,ei.P)(),(0,Y.U)(r=>this.mapService.transform((0,Xa.qg)(r),"EPSG:3857","EPSG:4326")),(0,ti.b)(r=>this.dawaService.reverseGeocode(r[0],r[1])),(0,K.b)(r=>this.project.patchValue({name:`${r.vejnavn} ${r.husnr}`,description:`N\xe6r ${r.adressebetegnelse} - Matrikel: ${r.matrikelnr}, ${r.ejerlav.navn}`}))).subscribe()}selectionMethodChanged(n){switch(this.boundsSource=n.detail.value,this.boundsSource){case me.n.Matrikel:this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),this.mapService.addMatrikelWithinViewExtent(),this.uiState.removeMapTool("draw");break;case me.n.Draw:this.uiState.updateDrawUiState("inEditMode",!0),this.uiState.updateDrawUiState("showBack",!1),this.uiState.updateDrawUiState("showSave",!1),this.mapService.removeLayer("jordstykke"),this.mapService.removeDrawTool(),this.mapService.activateDrawTool("Polygon"),this.uiState.addMapTool("draw");break;case me.n.ViewExtent:this.mapService.removeLayer("jordstykke"),this.uiState.removeMapTool("draw"),this.mapService.removeDrawTool()}}onCreateProject(){this.boundsSource===me.n.Draw&&(this.mapService.finishDrawing(),this.uiState.removeMapTool("draw")),this.toggleModal(),this.mapService.removeDrawTool(),this.mapService.removeLayer("jordstykke"),setTimeout(()=>{this.uiState.removeAllMapTools(),this.store.dispatch(T.XZ.saveProject({payload:Object.assign(Object.assign({},this.project.value),{bounds:this.boundsSource})})),this.router.navigateByUrl("/app/projects")},250)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.F0),e.Y36(U.qu),e.Y36(oo.w),e.Y36(M.S),e.Y36(H.C),e.Y36(ni),e.Y36(oi.r),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-save-project"]],decls:15,vars:16,consts:[[4,"ngIf"],["vertical","bottom","horizontal","center","slot","fixed",4,"ngIf"],["mode","md",3,"ionChange"],[3,"disabled","value"],[3,"value"],[3,"isOpen","initialBreakpoint","breakpoints"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","checkmark-outline"],["color","primary"],[3,"formGroup","ngSubmit"],["placeholder","Navn","formControlName","name"],["placeholder","Beskrivelse","rows","3","formControlName","description"],["type","submit","size","large","expand","full","color","primary"]],template:function(n,r){1&n&&(e.YNc(0,ri,2,0,"ion-badge",0),e.ALo(1,"async"),e.YNc(2,ai,2,0,"ion-badge",0),e.YNc(3,ii,3,0,"ion-fab",1),e.ALo(4,"async"),e.TgZ(5,"ion-segment",2),e.NdJ("ionChange",function(i){return r.selectionMethodChanged(i)}),e.TgZ(6,"ion-segment-button",3),e.ALo(7,"async"),e.TgZ(8,"ion-label"),e._uU(9,"Matrikel"),e.qZA(),e.qZA(),e.TgZ(10,"ion-segment-button",4),e.TgZ(11,"ion-label"),e._uU(12,"Kortudsnit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-modal",5),e.YNc(14,si,10,1,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf",e.lcZ(1,9,r.disableMatrikel$)&&void 0===r.boundsSource),e.xp6(2),e.Q6J("ngIf",r.boundsSource===r.bounds.Draw),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,11,r.selectedArea$)&&r.boundsSource===r.bounds.Matrikel||r.boundsSource===r.bounds.Draw||r.boundsSource===r.bounds.ViewExtent),e.xp6(3),e.Q6J("disabled",e.lcZ(7,13,r.disableMatrikel$))("value",r.bounds.Matrikel),e.xp6(4),e.Q6J("value",r.bounds.ViewExtent),e.xp6(3),e.Q6J("isOpen",r.showModal)("initialBreakpoint",.4)("breakpoints",e.DdM(15,ci)))},directives:[k.O5,u.cJ,u.QI,u.GO,u.Q$,u.ki,u.yp,u.IJ,u.W4,u.gu,u.Gu,u.sr,u.W2,U._Y,U.JL,U.sg,u.Ie,u.pK,u.j9,U.JJ,U.u,u.g2,u.YG],pipes:[k.Ov],styles:["ion-segment[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}.fab-vertical-bottom[_ngcontent-%COMP%]{bottom:55px}"],changeDetection:0}),t})();function ui(t,o){1&t&&e._UZ(0,"ion-progress-bar",4)}function pi(t,o){1&t&&e._UZ(0,"app-info-tool",5)}function fi(t,o){1&t&&e._UZ(0,"app-map-geolocation")}function di(t,o){1&t&&e._UZ(0,"app-map-draw-tool")}function vi(t,o){1&t&&e._UZ(0,"app-photo-tool",5)}function mi(t,o){1&t&&e._UZ(0,"app-save-project",5)}function gi(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"ion-chip",7),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"ion-icon",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().onClearProject()}),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,1,n.selectedProject$).name)}}const hi=[{path:"",component:(()=>{class t{constructor(n,r,a,i,c,d){this.rounter=n,this.route=r,this.mapStore=a,this.mapService=i,this.modalController=c,this.store=d,this.abandon$=new De.xQ,this.loading$=this.mapStore.mapstate$.pipe((0,Y.U)(({loadingFeatureInfo:p,loadingLayer:m})=>({loadingFeatureInfo:p,loadingLayer:m})),(0,Y.U)(p=>Object.values(p).some(m=>m))),this.loadingImage$=this.store.select("photoTool","loading"),this.activatedMapTools$=this.store.select("mapTools","activatedMapTools"),this.selectedProject$=this.store.select("project","selectedProject")}ngOnInit(){this.route.queryParams.pipe((0,X.q)(1),(0,K.b)(r=>{const a=[Number(r.x),Number(r.y)],i=Number(r.zoom);a[0]&&setTimeout(()=>{this.mapService.setView({center:a,zoom:i})},3e3)})).subscribe(),this.store.select("map","viewParams").pipe((0,Y.U)(r=>({x:null==r?void 0:r.center[0],y:null==r?void 0:r.center[1],zoom:null==r?void 0:r.zoom}))).pipe((0,Me.R)(this.abandon$),(0,K.b)(r=>{this.rounter.navigate([],{relativeTo:this.route,queryParams:r})})).subscribe()}ngOnDestroy(){this.abandon$.next()}ionViewDidEnter(){this.mapService.resize()}onClearProject(){this.store.dispatch(T.rV.clearSelectedProject()),this.store.dispatch(T.on.removeProjectMapOverlays())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(oe.F0),e.Y36(oe.gz),e.Y36(H.C),e.Y36(M.S),e.Y36(u.IN),e.Y36(j.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-tap-map"]],decls:21,vars:23,consts:[["type","indeterminate","color","tertiary",4,"ngIf"],["class","full-width-bottom-tool",4,"ngIf"],[4,"ngIf"],["class","current-project",4,"ngIf"],["type","indeterminate","color","tertiary"],[1,"full-width-bottom-tool"],[1,"current-project"],["color","primary","outline","",1,"project-chip"],["name","close-circle",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-content"),e.YNc(1,ui,1,0,"ion-progress-bar",0),e.ALo(2,"async"),e.ALo(3,"async"),e.TgZ(4,"app-map"),e._UZ(5,"app-map-layers-control"),e._UZ(6,"app-map-legend-fab"),e._UZ(7,"app-map-feature-info"),e.TgZ(8,"app-map-tools"),e.YNc(9,pi,1,0,"app-info-tool",1),e.ALo(10,"async"),e.YNc(11,fi,1,0,"app-map-geolocation",2),e.ALo(12,"async"),e.YNc(13,di,1,0,"app-map-draw-tool",2),e.ALo(14,"async"),e.YNc(15,vi,1,0,"app-photo-tool",1),e.ALo(16,"async"),e.YNc(17,mi,1,0,"app-save-project",1),e.ALo(18,"async"),e.qZA(),e.qZA(),e.YNc(19,gi,6,3,"div",3),e.ALo(20,"async"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,7,r.loading$)||e.lcZ(3,9,r.loadingImage$)),e.xp6(8),e.Q6J("ngIf",e.lcZ(10,11,r.activatedMapTools$).includes("addressInfo")),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(12,13,r.activatedMapTools$).includes("saveProject")),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,15,r.activatedMapTools$).includes("draw")),e.xp6(2),e.Q6J("ngIf",e.lcZ(16,17,r.activatedMapTools$).includes("takePhoto")),e.xp6(2),e.Q6J("ngIf",e.lcZ(18,19,r.activatedMapTools$).includes("saveProject")),e.xp6(2),e.Q6J("ngIf",null!==e.lcZ(20,21,r.selectedProject$)))},directives:[u.W2,k.O5,Le,xo,ko,Qo,Ua,u.X7,$a,qa,Va,Wa,li,u.hM,u.Q$,u.gu],pipes:[k.Ov],styles:[".current-project[_ngcontent-%COMP%]{position:fixed;z-index:100;top:10px;width:100%;text-align:center}.project-chip[_ngcontent-%COMP%]{background:rgba(255,255,255,.4)}ion-progress-bar[_ngcontent-%COMP%]{position:fixed;height:7px;top:0px;z-index:100}app-map-draw-tool[_ngcontent-%COMP%]{position:fixed;top:calc(50% - 76px);z-index:100;background-color:rgba(var(--ion-color-tertiary-rgb),.8);border-radius:28px}.full-width-bottom-tool[_ngcontent-%COMP%]{position:fixed;z-index:10;bottom:0;width:100%}app-info-tool[_ngcontent-%COMP%], app-photo-tool[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),t})()}];let _i=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[oe.Bz.forChild(hi)],oe.Bz]}),t})(),yi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Pc,k.ez,U.u5,U.UX,_i]]}),t})()},9441:function(bt,He){var k;void 0!==(k=function(){"use strict";function oe(T,e,H){var M=new XMLHttpRequest;M.open("GET",T),M.responseType="blob",M.onload=function(){Me(M.response,e,H)},M.onerror=function(){console.error("could not download file")},M.send()}function De(T){var e=new XMLHttpRequest;e.open("HEAD",T,!1);try{e.send()}catch(H){}return 200<=e.status&&299>=e.status}function Y(T){try{T.dispatchEvent(new MouseEvent("click"))}catch(H){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),T.dispatchEvent(e)}}var X="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,K=X.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Me=X.saveAs||("object"!=typeof window||window!==X?function(){}:"download"in HTMLAnchorElement.prototype&&!K?function(T,e,H){var M=X.URL||X.webkitURL,j=document.createElement("a");j.download=e=e||T.name||"download",j.rel="noopener","string"==typeof T?(j.href=T,j.origin===location.origin?Y(j):De(j.href)?oe(T,e,H):Y(j,j.target="_blank")):(j.href=M.createObjectURL(T),setTimeout(function(){M.revokeObjectURL(j.href)},4e4),setTimeout(function(){Y(j)},0))}:"msSaveOrOpenBlob"in navigator?function(T,e,H){if(e=e||T.name||"download","string"!=typeof T)navigator.msSaveOrOpenBlob(function(T,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(T.type)?new Blob(["\ufeff",T],{type:T.type}):T}(T,H),e);else if(De(T))oe(T,e,H);else{var M=document.createElement("a");M.href=T,M.target="_blank",setTimeout(function(){Y(M)})}}:function(T,e,H,M){if((M=M||open("","_blank"))&&(M.document.title=M.document.body.innerText="downloading..."),"string"==typeof T)return oe(T,e,H);var j="application/octet-stream"===T.type,Tt=/constructor/i.test(X.HTMLElement)||X.safari,Ve=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ve||j&&Tt||K)&&"undefined"!=typeof FileReader){var Le=new FileReader;Le.onloadend=function(){var he=Le.result;he=Ve?he:he.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=he:location=he,M=null},Le.readAsDataURL(T)}else{var Ee=X.URL||X.webkitURL,ge=Ee.createObjectURL(T);M?M.location=ge:location.href=ge,M=null,setTimeout(function(){Ee.revokeObjectURL(ge)},4e4)}});X.saveAs=Me.saveAs=Me,bt.exports=Me}.apply(He,[]))&&(bt.exports=k)}}]);